"use strict";(self.webpackChunk_react_stockcharts3_stories=self.webpackChunk_react_stockcharts3_stories||[]).push([[8302],{"../../node_modules/d3-array/src/group.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>group,z:()=>rollup});var internmap__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/internmap/src/index.js"),_identity_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/d3-array/src/identity.js");function group(values,...keys){return nest(values,_identity_js__WEBPACK_IMPORTED_MODULE_1__.A,_identity_js__WEBPACK_IMPORTED_MODULE_1__.A,keys)}function rollup(values,reduce,...keys){return nest(values,_identity_js__WEBPACK_IMPORTED_MODULE_1__.A,reduce,keys)}function nest(values,map,reduce,keys){return function regroup(values,i){if(i>=keys.length)return reduce(values);const groups=new internmap__WEBPACK_IMPORTED_MODULE_0__.B,keyof=keys[i++];let index=-1;for(const value of values){const key=keyof(value,++index,values),group=groups.get(key);group?group.push(value):groups.set(key,[value])}for(const[key,values]of groups)groups.set(key,regroup(values,i));return map(groups)}(values,0)}},"../../node_modules/d3-array/src/identity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function __WEBPACK_DEFAULT_EXPORT__(x){return x}__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__})},"../../node_modules/d3-dsv/src/tsv.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Nu:()=>tsvParse});var EOL={},EOF={};function objectConverter(columns){return new Function("d","return {"+columns.map(function(name,i){return JSON.stringify(name)+": d["+i+'] || ""'}).join(",")+"}")}function inferColumns(rows){var columnSet=Object.create(null),columns=[];return rows.forEach(function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]=column)}),columns}function pad(value,width){var s=value+"",length=s.length;return length<width?new Array(width-length+1).join(0)+s:s}function formatDate(date){var hours=date.getUTCHours(),minutes=date.getUTCMinutes(),seconds=date.getUTCSeconds(),milliseconds=date.getUTCMilliseconds();return isNaN(date)?"Invalid Date":function formatYear(year){return year<0?"-"+pad(-year,6):year>9999?"+"+pad(year,6):pad(year,4)}(date.getUTCFullYear())+"-"+pad(date.getUTCMonth()+1,2)+"-"+pad(date.getUTCDate(),2)+(milliseconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"."+pad(milliseconds,3)+"Z":seconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"Z":minutes||hours?"T"+pad(hours,2)+":"+pad(minutes,2)+"Z":"")}var tsv=function dsv(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parseRows(text,f){var t,rows=[],N=text.length,I=0,n=0,eof=N<=0,eol=!1;function token(){if(eof)return EOF;if(eol)return eol=!1,EOL;var i,c,j=I;if(34===text.charCodeAt(j)){for(;I++<N&&34!==text.charCodeAt(I)||34===text.charCodeAt(++I););return(i=I)>=N?eof=!0:10===(c=text.charCodeAt(I++))?eol=!0:13===c&&(eol=!0,10===text.charCodeAt(I)&&++I),text.slice(j+1,i-1).replace(/""/g,'"')}for(;I<N;){if(10===(c=text.charCodeAt(i=I++)))eol=!0;else if(13===c)eol=!0,10===text.charCodeAt(I)&&++I;else if(c!==DELIMITER)continue;return text.slice(j,i)}return eof=!0,text.slice(j,N)}for(10===text.charCodeAt(N-1)&&--N,13===text.charCodeAt(N-1)&&--N;(t=token())!==EOF;){for(var row=[];t!==EOL&&t!==EOF;)row.push(t),t=token();f&&null==(row=f(row,n++))||rows.push(row)}return rows}function preformatBody(rows,columns){return rows.map(function(row){return columns.map(function(column){return formatValue(row[column])}).join(delimiter)})}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(value){return null==value?"":value instanceof Date?formatDate(value):reFormat.test(value+="")?'"'+value.replace(/"/g,'""')+'"':value}return{parse:function parse(text,f){var convert,columns,rows=parseRows(text,function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?function customConverter(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}(row,f):objectConverter(row)});return rows.columns=columns||[],rows},parseRows,format:function format(rows,columns){return null==columns&&(columns=inferColumns(rows)),[columns.map(formatValue).join(delimiter)].concat(preformatBody(rows,columns)).join("\n")},formatBody:function formatBody(rows,columns){return null==columns&&(columns=inferColumns(rows)),preformatBody(rows,columns).join("\n")},formatRows:function formatRows(rows){return rows.map(formatRow).join("\n")},formatRow,formatValue}}("\t"),tsvParse=tsv.parse;tsv.parseRows,tsv.format,tsv.formatBody,tsv.formatRows,tsv.formatRow,tsv.formatValue},"../../node_modules/d3-scale/src/ordinal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ordinal});var d3_array__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/internmap/src/index.js"),_init_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/d3-scale/src/init.js");const implicit=Symbol("implicit");function ordinal(){var index=new d3_array__WEBPACK_IMPORTED_MODULE_0__.B,domain=[],range=[],unknown=implicit;function scale(d){let i=index.get(d);if(void 0===i){if(unknown!==implicit)return unknown;index.set(d,i=domain.push(d)-1)}return range[i%range.length]}return scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=new d3_array__WEBPACK_IMPORTED_MODULE_0__.B;for(const value of _)index.has(value)||index.set(value,domain.push(value)-1);return scale},scale.range=function(_){return arguments.length?(range=Array.from(_),scale):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return ordinal(domain,range).unknown(unknown)},_init_js__WEBPACK_IMPORTED_MODULE_1__.C.apply(scale,arguments),scale}},"../../node_modules/internmap/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>InternMap});class InternMap extends Map{constructor(entries,key=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:key}}),null!=entries)for(const[key,value]of entries)this.set(key,value)}get(key){return super.get(intern_get(this,key))}has(key){return super.has(intern_get(this,key))}set(key,value){return super.set(intern_set(this,key),value)}delete(key){return super.delete(intern_delete(this,key))}}Set;function intern_get({_intern,_key},value){const key=_key(value);return _intern.has(key)?_intern.get(key):value}function intern_set({_intern,_key},value){const key=_key(value);return _intern.has(key)?_intern.get(key):(_intern.set(key,value),value)}function intern_delete({_intern,_key},value){const key=_key(value);return _intern.has(key)&&(value=_intern.get(value),_intern.delete(key)),value}function keyof(value){return null!==value&&"object"==typeof value?value.valueOf():value}},"../core/lib/utils/barWidth.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>plotDataLengthBarWidth});var ___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../core/lib/utils/index.js");const plotDataLengthBarWidth=(props,moreProps)=>{const{widthRatio}=props,{xAccessor,xScale,plotData}=moreProps,[l,r]=xScale.range();if(null!=xScale.invert){const[dl,dr]=xScale.domain();if("number"==typeof dl&&"number"==typeof dr){return Math.abs(r-l)/Math.abs(dl-dr)*widthRatio}return(xScale(xAccessor((0,___WEBPACK_IMPORTED_MODULE_0__.HV)(plotData)))-xScale(xAccessor((0,___WEBPACK_IMPORTED_MODULE_0__.$1)(plotData))))/plotData.length*widthRatio*.7}return Math.abs(r-l)/xScale.domain().length*widthRatio}},"../indicators/lib/calculator/defaultOptionsForComputation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Be:()=>Kagi,Mb:()=>Renko,Wq:()=>ForceIndex,Xt:()=>SAR,ZV:()=>FullStochasticOscillator,Zi:()=>RSI,e0:()=>MACD,jt:()=>ElderRay,lY:()=>Change,mV:()=>EMA,q7:()=>PointAndFigure,qd:()=>BollingerBand,yJ:()=>ATR});const BollingerBand={windowSize:20,sourcePath:"close",multiplier:2,movingAverageType:"sma"},ATR={windowSize:14},ForceIndex={sourcePath:"close",volumePath:"volume"},Change={sourcePath:"close",basePath:"close",mainKeys:[],compareKeys:[]},ElderRay={windowSize:13,sourcePath:"close",movingAverageType:"sma"},SAR={accelerationFactor:.02,maxAccelerationFactor:.2},MACD={fast:12,slow:26,signal:9,sourcePath:"close"},FullStochasticOscillator={windowSize:12,kWindowSize:3,dWindowSize:3},RSI={windowSize:14,sourcePath:"close"},EMA={sourcePath:"close",windowSize:10},Kagi={reversalType:"ATR",windowSize:14,reversal:2,sourcePath:"close"},Renko={reversalType:"ATR",windowSize:14,fixedBrickSize:2,sourcePath:"high/low"},PointAndFigure={boxSize:.5,reversal:3,sourcePath:"high/low"}},"../indicators/lib/calculator/ema.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../indicators/lib/utils/path.js"),_defaultOptionsForComputation__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../indicators/lib/calculator/defaultOptionsForComputation.js");function __WEBPACK_DEFAULT_EXPORT__(){let options=_defaultOptionsForComputation__WEBPACK_IMPORTED_MODULE_1__.mV;const calculator=data=>{const{windowSize,sourcePath}=options,source=(0,_utils__WEBPACK_IMPORTED_MODULE_0__.A)(sourcePath),alpha=2/(windowSize+1);let previous,initialAccumulator=0,skip=0;return data.map(function(d,i){const v=source(d,i);if(void 0!==previous||void 0!==v){if(!(i<windowSize+skip-1)){if(i===windowSize+skip-1){initialAccumulator+=v;const initialValue=initialAccumulator/windowSize;return previous=initialValue,initialValue}{const nextValue=v*alpha+(1-alpha)*previous;return previous=nextValue,nextValue}}initialAccumulator+=v}else skip++})};return calculator.undefinedLength=()=>{const{windowSize}=options;return windowSize-1},calculator.options=newOptions=>void 0===newOptions?options:(options={..._defaultOptionsForComputation__WEBPACK_IMPORTED_MODULE_1__.mV,...newOptions},calculator),calculator}},"../indicators/lib/indicator/ema.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../indicators/lib/utils/merge.js"),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../indicators/lib/utils/rebind.js"),_calculator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../indicators/lib/calculator/ema.js"),_baseIndicator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../indicators/lib/indicator/baseIndicator.js");const ALGORITHM_TYPE="EMA";function __WEBPACK_DEFAULT_EXPORT__(){const base=(0,_baseIndicator__WEBPACK_IMPORTED_MODULE_3__.A)().type(ALGORITHM_TYPE).accessor(d=>d.ema),underlyingAlgorithm=(0,_calculator__WEBPACK_IMPORTED_MODULE_2__.A)(),mergedAlgorithm=(0,_utils__WEBPACK_IMPORTED_MODULE_0__.A)().algorithm(underlyingAlgorithm).merge((datum,i)=>{datum.ema=i}),indicator=(data,options={merge:!0})=>{if(options.merge){if(!base.accessor())throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);return mergedAlgorithm(data)}return underlyingAlgorithm(data)};return(0,_utils__WEBPACK_IMPORTED_MODULE_1__.A)(indicator,base,"id","accessor","stroke","fill","echo","type"),(0,_utils__WEBPACK_IMPORTED_MODULE_1__.A)(indicator,underlyingAlgorithm,"options","undefinedLength"),(0,_utils__WEBPACK_IMPORTED_MODULE_1__.A)(indicator,mergedAlgorithm,"merge","skipUndefined"),indicator}},"../indicators/lib/utils/identity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>identity});const identity=d=>d},"../indicators/lib/utils/merge.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _zipper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../indicators/lib/utils/zipper.js"),_identity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../indicators/lib/utils/identity.js");function __WEBPACK_DEFAULT_EXPORT__(){let algorithm=_identity__WEBPACK_IMPORTED_MODULE_1__.D,skipUndefined=!0,merge=()=>{};const mergeCompute=data=>(0,_zipper__WEBPACK_IMPORTED_MODULE_0__.A)().combine((datum,indicator)=>{const result=skipUndefined&&void 0===indicator?datum:merge(datum,indicator);return void 0===result?datum:result})(data,algorithm(data));return mergeCompute.algorithm=newAlgorithm=>void 0===newAlgorithm?algorithm:(algorithm=newAlgorithm,mergeCompute),mergeCompute.merge=newMerge=>void 0===newMerge?merge:(merge=newMerge,mergeCompute),mergeCompute.skipUndefined=newSkipUndefined=>void 0===newSkipUndefined?skipUndefined:(skipUndefined=newSkipUndefined,mergeCompute),mergeCompute}},"../indicators/lib/utils/path.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>path});const path=(loc=[])=>{const key=Array.isArray(loc)?loc:[loc],length=key.length;return function(obj,defaultValue){if(0===length)return null!=obj?obj:defaultValue;let index=0;for(;null!=obj&&index<length;)obj=obj[key[index++]];return index===length?obj:defaultValue}}},"../indicators/lib/utils/zipper.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>zipper});var d3_array__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/d3-array/src/min.js"),_identity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../indicators/lib/utils/identity.js");function zipper(){let combine=_identity__WEBPACK_IMPORTED_MODULE_1__.D;function zip(){const n=arguments.length;if(0===n)return[];const m=(0,d3_array__WEBPACK_IMPORTED_MODULE_0__.A)(arguments,d3_zipLength)??0,zips=new Array(m);for(let i=-1;++i<m;){for(let j=-1,zip=zips[i]=new Array(n);++j<n;)zip[j]=arguments[j][i];zips[i]=combine.apply(this,zips[i])}return zips}function d3_zipLength(d){return d.length}return zip.combine=function(x){return arguments.length?(combine=x,zip):combine},zip}},"../series/lib/CandlestickSeries.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>CandlestickSeries});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../core/lib/GenericChartComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/GenericComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../core/lib/utils/index.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../core/lib/utils/barWidth.js"),d3_array__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/d3-array/src/group.js"),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/react/index.js");class CandlestickSeries extends react__WEBPACK_IMPORTED_MODULE_6__.Component{constructor(){super(...arguments),this.drawOnCanvas=(ctx,moreProps)=>{const{candleStrokeWidth=CandlestickSeries.defaultProps.candleStrokeWidth}=this.props,{xScale,chartConfig:{yScale},plotData,xAccessor}=moreProps,candleData=this.getCandleData(xAccessor,xScale,yScale,plotData);(0,d3_array__WEBPACK_IMPORTED_MODULE_5__.Ay)(candleData,d=>d.wick.stroke).forEach((values,key)=>{ctx.fillStyle=key,values.forEach(each=>{const d=each.wick;ctx.fillRect(d.x-.5,d.y1,1,d.y2-d.y1),ctx.fillRect(d.x-.5,d.y3,1,d.y4-d.y3)})});(0,d3_array__WEBPACK_IMPORTED_MODULE_5__.Ay)(candleData,d=>d.stroke,d=>d.fill).forEach((strokeValues,strokeKey)=>{"none"!==strokeKey&&(ctx.strokeStyle=strokeKey,ctx.lineWidth=candleStrokeWidth),strokeValues.forEach((values,key)=>{ctx.fillStyle=key,values.forEach(d=>{d.width<=1?ctx.fillRect(d.x-.5,d.y,1,d.height):0===d.height?ctx.fillRect(d.x-.5,d.y,d.width,1):(ctx.fillRect(d.x-.5,d.y,d.width,d.height),"none"!==strokeKey&&ctx.strokeRect(d.x,d.y,d.width,d.height))})})})},this.getCandleData=(xAccessor,xScale,yScale,plotData)=>{const{fill:fillProp,stroke:strokeProp,yAccessor,wickStroke:wickStrokeProp}=this.props,fill=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.ER)(fillProp),stroke=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.ER)(strokeProp),wickStroke=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.ER)(wickStrokeProp),offset=.5*(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.ER)(this.props.width)(this.props,{xScale,xAccessor,plotData});return plotData.filter(d=>void 0!==yAccessor(d)).map(d=>{const ohlc=yAccessor(d);if(void 0===ohlc)return;const xValue=xAccessor(d),x=xScale(xValue),y=Math.round(yScale(Math.max(ohlc.open,ohlc.close))),height=Math.max(1,Math.round(Math.abs(yScale(ohlc.open)-yScale(ohlc.close))));return{x:x-offset,y,wick:{stroke:wickStroke(ohlc),x,y1:Math.round(yScale(ohlc.high)),y2:y,y3:y+height,y4:Math.round(yScale(ohlc.low))},height,width:2*offset,fill:fill(ohlc),stroke:stroke(ohlc),direction:ohlc.close-ohlc.open}}).filter(d=>void 0!==d)}}render(){const{clip}=this.props;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__.P,{clip,canvasDraw:this.drawOnCanvas,canvasToDraw:_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.WJ,drawOn:["pan"]})}}CandlestickSeries.defaultProps={candleStrokeWidth:.5,clip:!0,fill:d=>d.close>d.open?"#26a69a":"#ef5350",stroke:"none",wickStroke:d=>d.close>d.open?"#26a69a":"#ef5350",width:_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_4__.h,widthRatio:.8,yAccessor:d=>({open:d.open,high:d.high,low:d.low,close:d.close})}},"./src/features/annotated/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories,labels:()=>labels,paths:()=>paths});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/react/index.js"),GenericChartComponent=__webpack_require__("../core/lib/GenericChartComponent.js");class Annotate extends react.Component{constructor(){super(...arguments),this.renderSVG=moreProps=>{const{xAccessor,xScale,chartConfig:{yScale},plotData}=moreProps,{className,usingProps,with:Annotation,when}=this.props,data=plotData.filter(when);return(0,jsx_runtime.jsx)("g",{className,children:data.map((d,idx)=>(0,jsx_runtime.jsx)(Annotation,{...usingProps,xScale,yScale,xAccessor,plotData,datum:d},idx))})}}render(){return(0,jsx_runtime.jsx)(GenericChartComponent.P,{svgDraw:this.renderSVG,drawOn:["pan"]})}}Annotate.defaultProps={className:"react-financial-charts-enable-interaction react-financial-charts-annotate react-financial-charts-default-cursor"};var discontinuousTimeScaleProvider=__webpack_require__("../scales/lib/discontinuousTimeScaleProvider.js"),ema=__webpack_require__("../indicators/lib/indicator/ema.js"),ChartCanvas=__webpack_require__("../core/lib/ChartCanvas.js"),Chart=__webpack_require__("../core/lib/Chart.js"),XAxis=__webpack_require__("../axes/lib/XAxis.js"),YAxis=__webpack_require__("../axes/lib/YAxis.js"),CandlestickSeries=__webpack_require__("../series/lib/CandlestickSeries.js"),utils=__webpack_require__("../core/lib/utils/index.js");class LabelAnnotation extends react.Component{constructor(){super(...arguments),this.handleClick=e=>{const{onClick,xScale,yScale,datum}=this.props;void 0!==onClick&&onClick(e,{xScale,yScale,datum})},this.helper=()=>{const{x,y,datum,fill,text,tooltip,xAccessor,xScale,yScale,plotData}=this.props,xFunc=(0,utils.ER)(x),yFunc=(0,utils.ER)(y),[xPos,yPos]=[xFunc({xScale,xAccessor,datum,plotData}),yFunc({yScale,datum,plotData})];return{xPos,yPos,text:(0,utils.ER)(text)(datum),fill:(0,utils.ER)(fill)(datum),tooltip:(0,utils.ER)(tooltip)(datum)}}}render(){const{className,textAnchor,fontFamily,fontSize,opacity,rotate}=this.props,{xPos,yPos,fill,text,tooltip}=this.helper();return(0,jsx_runtime.jsxs)("g",{className,children:[(0,jsx_runtime.jsx)("title",{children:tooltip}),(0,jsx_runtime.jsx)("text",{x:xPos,y:yPos,fontFamily,fontSize,fill,opacity,transform:`rotate(${rotate}, ${xPos}, ${yPos})`,onClick:this.handleClick,textAnchor,children:text})]})}}LabelAnnotation.defaultProps={className:"react-financial-charts-label-annotation",textAnchor:"middle",fontFamily:"-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",fontSize:12,fill:"#000000",opacity:1,rotate:0,x:({xScale,xAccessor,datum})=>xScale(xAccessor(datum))};class SvgPathAnnotation extends react.Component{constructor(){super(...arguments),this.handleClick=e=>{const{onClick,xScale,yScale,datum}=this.props;void 0!==onClick&&onClick(e,{xScale,yScale,datum})},this.helper=()=>{const{x,y,datum,fill,tooltip,xAccessor,xScale,yScale,plotData}=this.props,xFunc=(0,utils.ER)(x),yFunc=(0,utils.ER)(y),[xPos,yPos]=[xFunc({xScale,xAccessor,datum,plotData}),yFunc({yScale,datum,plotData})];return{x:Math.round(xPos),y:Math.round(yPos),fill:(0,utils.ER)(fill)(datum),tooltip:(0,utils.ER)(tooltip)(datum)}}}render(){const{className,datum,stroke,opacity,path,pathWidth,pathHeight}=this.props,{x,y,fill,tooltip}=this.helper();return(0,jsx_runtime.jsxs)("g",{className,onClick:this.handleClick,children:[(0,jsx_runtime.jsx)("title",{children:tooltip}),(0,jsx_runtime.jsx)("path",{transform:`translate(${x-pathWidth},${y-pathHeight})`,d:path(datum),stroke,fill,opacity})]})}}SvgPathAnnotation.defaultProps={className:"react-financial-charts-svg-path-annotation",opacity:1,x:({xScale,xAccessor,datum})=>xScale(xAccessor(datum))};var withSize=__webpack_require__("../utils/lib/withSize.js"),withDeviceRatio=__webpack_require__("../utils/lib/withDeviceRatio.js"),data=__webpack_require__("./src/data/index.ts");class Annotated extends react.Component{constructor(){super(...arguments),this.labelAnnotation={text:"Monday",tooltip:"Go short",y:({yScale,datum})=>yScale(datum.high)},this.svgAnnotation={fill:"#2196f3",path:()=>"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z",pathWidth:12,pathHeight:22,tooltip:"Svg Annotation",y:({yScale,datum})=>yScale(datum.high)},this.margin={left:0,right:48,top:0,bottom:24},this.xScaleProvider=(0,discontinuousTimeScaleProvider.L)().inputDateAccessor(d=>d.date),this.when=data=>1===data.date.getDay(),this.yExtents=data=>[data.high,data.low]}render(){const{data:initialData,height,ratio,width,labelAnnotation,svgAnnotation}=this.props,calculatedData=(0,ema.A)().id(1).options({windowSize:12}).merge((d,c)=>{d.ema12=c}).accessor(d=>d.ema12)(initialData),{data,xScale,xAccessor,displayXAccessor}=this.xScaleProvider(calculatedData),max=xAccessor(data[data.length-1]),xExtents=[xAccessor(data[Math.max(0,data.length-100)]),max];return(0,jsx_runtime.jsx)(ChartCanvas.v,{height,ratio,width,margin:this.margin,data,displayXAccessor,seriesName:"Data",xScale,xAccessor,xExtents,children:(0,jsx_runtime.jsxs)(Chart.t,{id:1,yExtents:this.yExtents,children:[(0,jsx_runtime.jsx)(XAxis.W,{showGridLines:!0}),(0,jsx_runtime.jsx)(YAxis.h,{showGridLines:!0}),(0,jsx_runtime.jsx)(CandlestickSeries.H,{}),labelAnnotation&&(0,jsx_runtime.jsx)(Annotate,{with:LabelAnnotation,usingProps:this.labelAnnotation,when:this.when}),svgAnnotation&&(0,jsx_runtime.jsx)(Annotate,{with:SvgPathAnnotation,usingProps:this.svgAnnotation,when:this.when})]})})}}const annotated_Annotated=(0,data.p)()((0,withSize.U)({style:{minHeight:600}})((0,withDeviceRatio.O)()(Annotated))),index_stories={component:Annotate,title:"Features/Annotate"},labels={render:()=>(0,jsx_runtime.jsx)(annotated_Annotated,{labelAnnotation:!0})},paths={render:()=>(0,jsx_runtime.jsx)(annotated_Annotated,{svgAnnotation:!0})},__namedExportsOrder=["labels","paths"];labels.parameters={...labels.parameters,docs:{...labels.parameters?.docs,source:{originalSource:"{\n  render: () => <Annotated labelAnnotation />\n}",...labels.parameters?.docs?.source}}},paths.parameters={...paths.parameters,docs:{...paths.parameters?.docs,source:{originalSource:"{\n  render: () => <Annotated svgAnnotation />\n}",...paths.parameters?.docs?.source}}}}}]);