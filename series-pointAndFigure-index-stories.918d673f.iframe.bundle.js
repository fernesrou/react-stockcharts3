"use strict";(self.webpackChunk_react_stockcharts3_stories=self.webpackChunk_react_stockcharts3_stories||[]).push([[9891],{"../../node_modules/d3-dsv/src/tsv.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Nu:()=>tsvParse});var EOL={},EOF={};function objectConverter(columns){return new Function("d","return {"+columns.map(function(name,i){return JSON.stringify(name)+": d["+i+'] || ""'}).join(",")+"}")}function inferColumns(rows){var columnSet=Object.create(null),columns=[];return rows.forEach(function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]=column)}),columns}function pad(value,width){var s=value+"",length=s.length;return length<width?new Array(width-length+1).join(0)+s:s}function formatDate(date){var hours=date.getUTCHours(),minutes=date.getUTCMinutes(),seconds=date.getUTCSeconds(),milliseconds=date.getUTCMilliseconds();return isNaN(date)?"Invalid Date":function formatYear(year){return year<0?"-"+pad(-year,6):year>9999?"+"+pad(year,6):pad(year,4)}(date.getUTCFullYear())+"-"+pad(date.getUTCMonth()+1,2)+"-"+pad(date.getUTCDate(),2)+(milliseconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"."+pad(milliseconds,3)+"Z":seconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"Z":minutes||hours?"T"+pad(hours,2)+":"+pad(minutes,2)+"Z":"")}var tsv=function dsv(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parseRows(text,f){var t,rows=[],N=text.length,I=0,n=0,eof=N<=0,eol=!1;function token(){if(eof)return EOF;if(eol)return eol=!1,EOL;var i,c,j=I;if(34===text.charCodeAt(j)){for(;I++<N&&34!==text.charCodeAt(I)||34===text.charCodeAt(++I););return(i=I)>=N?eof=!0:10===(c=text.charCodeAt(I++))?eol=!0:13===c&&(eol=!0,10===text.charCodeAt(I)&&++I),text.slice(j+1,i-1).replace(/""/g,'"')}for(;I<N;){if(10===(c=text.charCodeAt(i=I++)))eol=!0;else if(13===c)eol=!0,10===text.charCodeAt(I)&&++I;else if(c!==DELIMITER)continue;return text.slice(j,i)}return eof=!0,text.slice(j,N)}for(10===text.charCodeAt(N-1)&&--N,13===text.charCodeAt(N-1)&&--N;(t=token())!==EOF;){for(var row=[];t!==EOL&&t!==EOF;)row.push(t),t=token();f&&null==(row=f(row,n++))||rows.push(row)}return rows}function preformatBody(rows,columns){return rows.map(function(row){return columns.map(function(column){return formatValue(row[column])}).join(delimiter)})}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(value){return null==value?"":value instanceof Date?formatDate(value):reFormat.test(value+="")?'"'+value.replace(/"/g,'""')+'"':value}return{parse:function parse(text,f){var convert,columns,rows=parseRows(text,function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?function customConverter(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}(row,f):objectConverter(row)});return rows.columns=columns||[],rows},parseRows,format:function format(rows,columns){return null==columns&&(columns=inferColumns(rows)),[columns.map(formatValue).join(delimiter)].concat(preformatBody(rows,columns)).join("\n")},formatBody:function formatBody(rows,columns){return null==columns&&(columns=inferColumns(rows)),preformatBody(rows,columns).join("\n")},formatRows:function formatRows(rows){return rows.map(formatRow).join("\n")},formatRow,formatValue}}("\t"),tsvParse=tsv.parse;tsv.parseRows,tsv.format,tsv.formatBody,tsv.formatRows,tsv.formatRow,tsv.formatValue},"../../node_modules/d3-scale/src/ordinal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ordinal});var d3_array__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/internmap/src/index.js"),_init_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/d3-scale/src/init.js");const implicit=Symbol("implicit");function ordinal(){var index=new d3_array__WEBPACK_IMPORTED_MODULE_0__.B,domain=[],range=[],unknown=implicit;function scale(d){let i=index.get(d);if(void 0===i){if(unknown!==implicit)return unknown;index.set(d,i=domain.push(d)-1)}return range[i%range.length]}return scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=new d3_array__WEBPACK_IMPORTED_MODULE_0__.B;for(const value of _)index.has(value)||index.set(value,domain.push(value)-1);return scale},scale.range=function(_){return arguments.length?(range=Array.from(_),scale):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return ordinal(domain,range).unknown(unknown)},_init_js__WEBPACK_IMPORTED_MODULE_1__.C.apply(scale,arguments),scale}},"../../node_modules/internmap/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>InternMap});class InternMap extends Map{constructor(entries,key=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:key}}),null!=entries)for(const[key,value]of entries)this.set(key,value)}get(key){return super.get(intern_get(this,key))}has(key){return super.has(intern_get(this,key))}set(key,value){return super.set(intern_set(this,key),value)}delete(key){return super.delete(intern_delete(this,key))}}Set;function intern_get({_intern,_key},value){const key=_key(value);return _intern.has(key)?_intern.get(key):value}function intern_set({_intern,_key},value){const key=_key(value);return _intern.has(key)?_intern.get(key):(_intern.set(key,value),value)}function intern_delete({_intern,_key},value){const key=_key(value);return _intern.has(key)&&(value=_intern.get(value),_intern.delete(key)),value}function keyof(value){return null!==value&&"object"==typeof value?value.valueOf():value}},"../indicators/lib/calculator/defaultOptionsForComputation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Be:()=>Kagi,Mb:()=>Renko,Wq:()=>ForceIndex,Xt:()=>SAR,ZV:()=>FullStochasticOscillator,Zi:()=>RSI,e0:()=>MACD,jt:()=>ElderRay,lY:()=>Change,mV:()=>EMA,q7:()=>PointAndFigure,qd:()=>BollingerBand,yJ:()=>ATR});const BollingerBand={windowSize:20,sourcePath:"close",multiplier:2,movingAverageType:"sma"},ATR={windowSize:14},ForceIndex={sourcePath:"close",volumePath:"volume"},Change={sourcePath:"close",basePath:"close",mainKeys:[],compareKeys:[]},ElderRay={windowSize:13,sourcePath:"close",movingAverageType:"sma"},SAR={accelerationFactor:.02,maxAccelerationFactor:.2},MACD={fast:12,slow:26,signal:9,sourcePath:"close"},FullStochasticOscillator={windowSize:12,kWindowSize:3,dWindowSize:3},RSI={windowSize:14,sourcePath:"close"},EMA={sourcePath:"close",windowSize:10},Kagi={reversalType:"ATR",windowSize:14,reversal:2,sourcePath:"close"},Renko={reversalType:"ATR",windowSize:14,fixedBrickSize:2,sourcePath:"high/low"},PointAndFigure={boxSize:.5,reversal:3,sourcePath:"high/low"}},"./src/series/pointAndFigure/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,daily:()=>daily,default:()=>index_stories});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/react/index.js"),utils=__webpack_require__("../core/lib/utils/index.js"),GenericChartComponent=__webpack_require__("../core/lib/GenericChartComponent.js"),GenericComponent=__webpack_require__("../core/lib/GenericComponent.js");class PointAndFigureSeries extends react.Component{constructor(){super(...arguments),this.drawOnCanvas=(ctx,moreProps)=>{const{xAccessor,xScale,chartConfig:{yScale},plotData}=moreProps,columns=this.getColumns(xScale,xAccessor,yScale,plotData);this.drawOnCanvasPrivate(ctx,this.props,columns)},this.getColumns=(xScale,xAccessor,yScale,plotData)=>{const columnWidth=(xScale(xAccessor(plotData[plotData.length-1]))-xScale(xAccessor(plotData[0])))/(plotData.length-1);let anyBox,j=0;for(;(0,utils.pN)(anyBox)&&(0,utils.O9)(plotData[j].close);)anyBox=plotData[j].boxes[0],j++;const boxHeight=Math.abs(yScale(anyBox.open)-yScale(anyBox.close));return plotData.filter(d=>(0,utils.O9)(d.close)).map(d=>{const boxes=d.boxes.map(box=>({columnWidth,boxHeight,open:yScale(box.open),close:yScale(box.close)})),xOffset=xScale(xAccessor(d))-columnWidth/2;return{boxes,direction:d.direction,offset:[xOffset,0]}})},this.drawOnCanvasPrivate=(ctx,props,columns)=>{const{stroke,fill,strokeWidth}=props;ctx.lineWidth=strokeWidth,columns.forEach(col=>{const[offsetX,offsetY]=col.offset;col.boxes.forEach(box=>{if(col.direction>0)ctx.fillStyle=fill.up,ctx.strokeStyle=stroke.up,ctx.beginPath(),ctx.moveTo(offsetX,offsetY+box.open),ctx.lineTo(offsetX+box.columnWidth,offsetY+box.close),ctx.moveTo(offsetX,offsetY+box.close),ctx.lineTo(offsetX+box.columnWidth,offsetY+box.open),ctx.stroke();else{ctx.fillStyle=fill.down,ctx.strokeStyle=stroke.down,ctx.beginPath();const[x,y]=[offsetX+box.columnWidth/2,offsetY+box.open+box.boxHeight/2],[rx,ry]=[box.columnWidth/2,box.boxHeight/2];ctx.ellipse(x,y,rx,ry,0,0,2*Math.PI),ctx.stroke()}})}),ctx.stroke()}}render(){const{clip}=this.props;return(0,jsx_runtime.jsx)(GenericChartComponent.P,{clip,canvasDraw:this.drawOnCanvas,canvasToDraw:GenericComponent.WJ,drawOn:["pan"]})}}PointAndFigureSeries.defaultProps={className:"react-financial-charts-point-and-figure",strokeWidth:1,stroke:{up:"#6BA583",down:"#FF0000"},fill:{up:"none",down:"none"},clip:!0};var ChartCanvas=__webpack_require__("../core/lib/ChartCanvas.js"),Chart=__webpack_require__("../core/lib/Chart.js"),XAxis=__webpack_require__("../axes/lib/XAxis.js"),YAxis=__webpack_require__("../axes/lib/YAxis.js"),rebind=__webpack_require__("../indicators/lib/utils/rebind.js"),defaultOptionsForComputation=__webpack_require__("../indicators/lib/calculator/defaultOptionsForComputation.js");function createBox(d,dateAccessor,dateMutator){const box={open:d.open,fromDate:dateAccessor(d),toDate:dateAccessor(d),startOfYear:d.startOfYear,startOfQuarter:d.startOfQuarter,startOfMonth:d.startOfMonth,startOfWeek:d.startOfWeek};return dateMutator(box,dateAccessor(d)),box}function pointAndFigure(){let options=defaultOptionsForComputation.q7,dateAccessor=d=>d.date,dateMutator=(d,date)=>{d.date=date};const calculator=rawData=>{const{reversal,boxSize,sourcePath}=options,pricingMethod="high/low"===sourcePath?d=>({high:d.high,low:d.low}):d=>({high:d.close,low:d.close}),columnData=[];let column={boxes:[],open:rawData[0].open},box=createBox(rawData[0],dateAccessor,dateMutator);return columnData.push(column),rawData.forEach(function(d){if(column.volume=(column.volume||0)+d.volume,box.startOfYear||(box.startOfYear=d.startOfYear,box.startOfYear&&dateMutator(box,dateAccessor(d))),box.startOfYear||box.startOfQuarter||(box.startOfQuarter=d.startOfQuarter,box.startOfQuarter&&!box.startOfYear&&dateMutator(box,dateAccessor(d))),box.startOfQuarter||box.startOfMonth||(box.startOfMonth=d.startOfMonth,box.startOfMonth&&!box.startOfQuarter&&dateMutator(box,dateAccessor(d))),box.startOfMonth||box.startOfWeek||(box.startOfWeek=d.startOfWeek,box.startOfWeek&&!box.startOfMonth&&dateMutator(box,dateAccessor(d))),1===columnData.length&&0===column.boxes.length){const upwardMovement=Math.max(pricingMethod(d).high-column.open,0),downwardMovement=Math.abs(Math.min(column.open-pricingMethod(d).low,0));if(column.direction=upwardMovement>downwardMovement?1:-1,boxSize*reversal<upwardMovement||boxSize*reversal<downwardMovement){box.toDate=dateAccessor(d),box.open=column.open;const noOfBoxes=column.direction>0?Math.floor(upwardMovement/boxSize):Math.floor(downwardMovement/boxSize);for(let i=0;i<noOfBoxes;i++){box.close=box.open+column.direction*boxSize;const prevBoxClose=box.close;column.boxes.push(box),box=createBox(box,dateAccessor,dateMutator),box.open=prevBoxClose}box.fromDate=dateAccessor(d),box.date=dateAccessor(d)}}else{const upwardMovement=Math.max(pricingMethod(d).high-box.open,0),downwardMovement=Math.abs(Math.min(pricingMethod(d).low-box.open,0));if(column.direction>0&&upwardMovement>boxSize||column.direction<0&&downwardMovement>boxSize){box.close=box.open+column.direction*boxSize,box.toDate=dateAccessor(d);const prevBoxClose=box.close;column.boxes.push(box),box=createBox(d,dateAccessor,dateMutator),box.open=prevBoxClose,box.fromDate=dateAccessor(d),dateMutator(box,dateAccessor(d))}else if(column.direction>0&&downwardMovement>boxSize*reversal||column.direction<0&&upwardMovement>boxSize*reversal){box.open=box.open+-1*column.direction*boxSize,box.toDate=dateAccessor(d),dateMutator(box,dateAccessor(d)),column={boxes:[],volume:0,direction:-1*column.direction};const noOfBoxes=column.direction>0?Math.floor(upwardMovement/boxSize):Math.floor(downwardMovement/boxSize);for(let i=0;i<noOfBoxes;i++){box.close=box.open+column.direction*boxSize;const prevBoxClose=box.close;column.boxes.push(box),box=createBox(d,dateAccessor,dateMutator),box.open=prevBoxClose}columnData.push(column)}}}),function updateColumns(columnData,dateAccessor,dateMutator){return columnData.forEach(function(d){d.startOfYear=!1,d.startOfQuarter=!1,d.startOfMonth=!1,d.startOfWeek=!1,d.boxes.forEach(function(eachBox){void 0===d.open&&(d.open=eachBox.open),d.close=eachBox.close,d.high=Math.max(d.open,d.close),d.low=Math.min(d.open,d.close),void 0===d.fromDate&&(d.fromDate=eachBox.fromDate),void 0===d.date&&(d.date=eachBox.date),d.toDate=eachBox.toDate,eachBox.startOfYear&&(d.startOfYear=d.startOfYear||eachBox.startOfYear,d.startOfQuarter=eachBox.startOfQuarter,d.startOfMonth=eachBox.startOfMonth,d.startOfWeek=eachBox.startOfWeek,dateMutator(d,dateAccessor(eachBox))),!0!==d.startOfQuarter&&eachBox.startOfQuarter&&(d.startOfQuarter=eachBox.startOfQuarter,d.startOfMonth=eachBox.startOfMonth,d.startOfWeek=eachBox.startOfWeek,dateMutator(d,dateAccessor(eachBox))),!0!==d.startOfMonth&&eachBox.startOfMonth&&(d.startOfMonth=eachBox.startOfMonth,d.startOfWeek=eachBox.startOfWeek,dateMutator(d,dateAccessor(eachBox))),!0!==d.startOfWeek&&eachBox.startOfWeek&&(d.startOfWeek=eachBox.startOfWeek,dateMutator(d,dateAccessor(eachBox)))})}),columnData}(columnData,dateAccessor,dateMutator),columnData};return calculator.options=newOptions=>void 0===newOptions?options:(options={...defaultOptionsForComputation.q7,...newOptions},calculator),calculator.dateMutator=newDateMutator=>void 0===newDateMutator?dateMutator:(dateMutator=newDateMutator,calculator),calculator.dateAccessor=newDateAccessor=>void 0===newDateAccessor?dateAccessor:(dateAccessor=newDateAccessor,calculator),calculator}var baseIndicator=__webpack_require__("../indicators/lib/indicator/baseIndicator.js");var discontinuousTimeScaleProvider=__webpack_require__("../scales/lib/discontinuousTimeScaleProvider.js");class PointAndFigureSeries_PointAndFigureSeries extends react.Component{constructor(){super(...arguments),this.drawOnCanvas=(ctx,moreProps)=>{const{xAccessor,xScale,chartConfig:{yScale},plotData}=moreProps,columns=this.getColumns(xScale,xAccessor,yScale,plotData);this.drawOnCanvasPrivate(ctx,this.props,columns)},this.getColumns=(xScale,xAccessor,yScale,plotData)=>{const columnWidth=(xScale(xAccessor(plotData[plotData.length-1]))-xScale(xAccessor(plotData[0])))/(plotData.length-1);let anyBox,j=0;for(;(0,utils.pN)(anyBox)&&(0,utils.O9)(plotData[j].close);)anyBox=plotData[j].boxes[0],j++;const boxHeight=Math.abs(yScale(anyBox.open)-yScale(anyBox.close));return plotData.filter(d=>(0,utils.O9)(d.close)).map(d=>{const boxes=d.boxes.map(box=>({columnWidth,boxHeight,open:yScale(box.open),close:yScale(box.close)})),xOffset=xScale(xAccessor(d))-columnWidth/2;return{boxes,direction:d.direction,offset:[xOffset,0]}})},this.drawOnCanvasPrivate=(ctx,props,columns)=>{const{stroke,fill,strokeWidth}=props;ctx.lineWidth=strokeWidth,columns.forEach(col=>{const[offsetX,offsetY]=col.offset;col.boxes.forEach(box=>{if(col.direction>0)ctx.fillStyle=fill.up,ctx.strokeStyle=stroke.up,ctx.beginPath(),ctx.moveTo(offsetX,offsetY+box.open),ctx.lineTo(offsetX+box.columnWidth,offsetY+box.close),ctx.moveTo(offsetX,offsetY+box.close),ctx.lineTo(offsetX+box.columnWidth,offsetY+box.open),ctx.stroke();else{ctx.fillStyle=fill.down,ctx.strokeStyle=stroke.down,ctx.beginPath();const[x,y]=[offsetX+box.columnWidth/2,offsetY+box.open+box.boxHeight/2],[rx,ry]=[box.columnWidth/2,box.boxHeight/2];ctx.ellipse(x,y,rx,ry,0,0,2*Math.PI),ctx.stroke()}})}),ctx.stroke()}}render(){const{clip}=this.props;return(0,jsx_runtime.jsx)(GenericChartComponent.P,{clip,canvasDraw:this.drawOnCanvas,canvasToDraw:GenericComponent.WJ,drawOn:["pan"]})}}PointAndFigureSeries_PointAndFigureSeries.defaultProps={className:"react-financial-charts-point-and-figure",strokeWidth:1,stroke:{up:"#6BA583",down:"#FF0000"},fill:{up:"none",down:"none"},clip:!0};var data=__webpack_require__("./src/data/index.ts"),withSize=__webpack_require__("../utils/lib/withSize.js"),withDeviceRatio=__webpack_require__("../utils/lib/withDeviceRatio.js");class BasicPointAndFigureSeries extends react.Component{constructor(){super(...arguments),this.margin={left:0,right:40,top:0,bottom:24},this.xScaleProvider=(0,discontinuousTimeScaleProvider.L)().inputDateAccessor(d=>d.date),this.yExtents=data=>[data.high,data.low]}render(){const{data:initialData,height,ratio,width}=this.props,calculatedData=function indicator_pointAndFigure(){const base=(0,baseIndicator.A)().type("PointAndFigure"),underlyingAlgorithm=pointAndFigure(),indicator=underlyingAlgorithm;return(0,rebind.A)(indicator,base,"id","stroke","fill","echo","type"),(0,rebind.A)(indicator,underlyingAlgorithm,"dateAccessor","dateMutator","options"),indicator}()(initialData),{data,xScale,xAccessor,displayXAccessor}=this.xScaleProvider(calculatedData),max=xAccessor(data[data.length-1]),xExtents=[xAccessor(data[Math.max(0,data.length-100)]),max];return(0,jsx_runtime.jsx)(ChartCanvas.v,{height,ratio,width,margin:this.margin,data,displayXAccessor,seriesName:"Data",xScale,xAccessor,xExtents,children:(0,jsx_runtime.jsxs)(Chart.t,{id:1,yExtents:this.yExtents,children:[(0,jsx_runtime.jsx)(PointAndFigureSeries_PointAndFigureSeries,{}),(0,jsx_runtime.jsx)(XAxis.W,{}),(0,jsx_runtime.jsx)(YAxis.h,{})]})})}}const Daily=(0,data.p)()((0,withSize.U)({style:{minHeight:600}})((0,withDeviceRatio.O)()(BasicPointAndFigureSeries))),index_stories=((0,data.p)("MINUTES")((0,withSize.U)({style:{minHeight:600}})((0,withDeviceRatio.O)()(BasicPointAndFigureSeries))),{component:PointAndFigureSeries,title:"Visualization/Series/Point & Figure"}),daily={render:()=>(0,jsx_runtime.jsx)(Daily,{})},__namedExportsOrder=["daily"];daily.parameters={...daily.parameters,docs:{...daily.parameters?.docs,source:{originalSource:"{\n  render: () => <Daily />\n}",...daily.parameters?.docs?.source}}}}}]);