"use strict";(self.webpackChunk_react_stockcharts3_stories=self.webpackChunk_react_stockcharts3_stories||[]).push([[7915],{"../../node_modules/d3-array/src/group.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>group,z:()=>rollup});var internmap__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/internmap/src/index.js"),_identity_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/d3-array/src/identity.js");function group(values,...keys){return nest(values,_identity_js__WEBPACK_IMPORTED_MODULE_1__.A,_identity_js__WEBPACK_IMPORTED_MODULE_1__.A,keys)}function rollup(values,reduce,...keys){return nest(values,_identity_js__WEBPACK_IMPORTED_MODULE_1__.A,reduce,keys)}function nest(values,map,reduce,keys){return function regroup(values,i){if(i>=keys.length)return reduce(values);const groups=new internmap__WEBPACK_IMPORTED_MODULE_0__.B,keyof=keys[i++];let index=-1;for(const value of values){const key=keyof(value,++index,values),group=groups.get(key);group?group.push(value):groups.set(key,[value])}for(const[key,values]of groups)groups.set(key,regroup(values,i));return map(groups)}(values,0)}},"../../node_modules/d3-array/src/identity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function __WEBPACK_DEFAULT_EXPORT__(x){return x}__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__})},"../../node_modules/d3-dsv/src/tsv.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Nu:()=>tsvParse});var EOL={},EOF={};function objectConverter(columns){return new Function("d","return {"+columns.map(function(name,i){return JSON.stringify(name)+": d["+i+'] || ""'}).join(",")+"}")}function inferColumns(rows){var columnSet=Object.create(null),columns=[];return rows.forEach(function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]=column)}),columns}function pad(value,width){var s=value+"",length=s.length;return length<width?new Array(width-length+1).join(0)+s:s}function formatDate(date){var hours=date.getUTCHours(),minutes=date.getUTCMinutes(),seconds=date.getUTCSeconds(),milliseconds=date.getUTCMilliseconds();return isNaN(date)?"Invalid Date":function formatYear(year){return year<0?"-"+pad(-year,6):year>9999?"+"+pad(year,6):pad(year,4)}(date.getUTCFullYear())+"-"+pad(date.getUTCMonth()+1,2)+"-"+pad(date.getUTCDate(),2)+(milliseconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"."+pad(milliseconds,3)+"Z":seconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"Z":minutes||hours?"T"+pad(hours,2)+":"+pad(minutes,2)+"Z":"")}var tsv=function dsv(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parseRows(text,f){var t,rows=[],N=text.length,I=0,n=0,eof=N<=0,eol=!1;function token(){if(eof)return EOF;if(eol)return eol=!1,EOL;var i,c,j=I;if(34===text.charCodeAt(j)){for(;I++<N&&34!==text.charCodeAt(I)||34===text.charCodeAt(++I););return(i=I)>=N?eof=!0:10===(c=text.charCodeAt(I++))?eol=!0:13===c&&(eol=!0,10===text.charCodeAt(I)&&++I),text.slice(j+1,i-1).replace(/""/g,'"')}for(;I<N;){if(10===(c=text.charCodeAt(i=I++)))eol=!0;else if(13===c)eol=!0,10===text.charCodeAt(I)&&++I;else if(c!==DELIMITER)continue;return text.slice(j,i)}return eof=!0,text.slice(j,N)}for(10===text.charCodeAt(N-1)&&--N,13===text.charCodeAt(N-1)&&--N;(t=token())!==EOF;){for(var row=[];t!==EOL&&t!==EOF;)row.push(t),t=token();f&&null==(row=f(row,n++))||rows.push(row)}return rows}function preformatBody(rows,columns){return rows.map(function(row){return columns.map(function(column){return formatValue(row[column])}).join(delimiter)})}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(value){return null==value?"":value instanceof Date?formatDate(value):reFormat.test(value+="")?'"'+value.replace(/"/g,'""')+'"':value}return{parse:function parse(text,f){var convert,columns,rows=parseRows(text,function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?function customConverter(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}(row,f):objectConverter(row)});return rows.columns=columns||[],rows},parseRows,format:function format(rows,columns){return null==columns&&(columns=inferColumns(rows)),[columns.map(formatValue).join(delimiter)].concat(preformatBody(rows,columns)).join("\n")},formatBody:function formatBody(rows,columns){return null==columns&&(columns=inferColumns(rows)),preformatBody(rows,columns).join("\n")},formatRows:function formatRows(rows){return rows.map(formatRow).join("\n")},formatRow,formatValue}}("\t"),tsvParse=tsv.parse;tsv.parseRows,tsv.format,tsv.formatBody,tsv.formatRows,tsv.formatRow,tsv.formatValue},"../../node_modules/internmap/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>InternMap});class InternMap extends Map{constructor(entries,key=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:key}}),null!=entries)for(const[key,value]of entries)this.set(key,value)}get(key){return super.get(intern_get(this,key))}has(key){return super.has(intern_get(this,key))}set(key,value){return super.set(intern_set(this,key),value)}delete(key){return super.delete(intern_delete(this,key))}}Set;function intern_get({_intern,_key},value){const key=_key(value);return _intern.has(key)?_intern.get(key):value}function intern_set({_intern,_key},value){const key=_key(value);return _intern.has(key)?_intern.get(key):(_intern.set(key,value),value)}function intern_delete({_intern,_key},value){const key=_key(value);return _intern.has(key)&&(value=_intern.get(value),_intern.delete(key)),value}function keyof(value){return null!==value&&"object"==typeof value?value.valueOf():value}},"../coordinates/lib/CrossHairCursor.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>CrossHairCursor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/ChartCanvas.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../core/lib/GenericComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../core/lib/utils/strokeDasharray.js");class CrossHairCursor extends react__WEBPACK_IMPORTED_MODULE_1__.Component{constructor(){super(...arguments),this.drawOnCanvas=(ctx,moreProps)=>{const lines=this.getLines(this.props,moreProps);if(void 0===lines)return;const{margin,ratio}=this.context,originX=.5*ratio+margin.left,originY=.5*ratio+margin.top;ctx.save(),ctx.setTransform(1,0,0,1,0,0),ctx.scale(ratio,ratio),ctx.translate(originX,originY),lines.forEach(line=>{const dashArray=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_4__.y)(line.strokeDasharray);ctx.strokeStyle=line.strokeStyle,ctx.lineWidth=line.strokeWidth,ctx.setLineDash(dashArray),ctx.beginPath(),ctx.moveTo(line.x1,line.y1),ctx.lineTo(line.x2,line.y2),ctx.stroke()}),ctx.restore()},this.getLines=(props,moreProps)=>{const{mouseXY,currentItem,show,height,width}=moreProps,{customX=CrossHairCursor.defaultProps.customX,strokeStyle=CrossHairCursor.defaultProps.strokeStyle,strokeDasharray,strokeWidth=CrossHairCursor.defaultProps.strokeWidth}=props;if(!show||void 0===currentItem)return;const line1={x1:0,x2:width,y1:mouseXY[1]+.5,y2:mouseXY[1]+.5,strokeStyle,strokeDasharray,strokeWidth},x=customX(props,moreProps);return[line1,{x1:x,x2:x,y1:0,y2:height,strokeStyle,strokeDasharray,strokeWidth}]}}render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.By,{clip:!1,canvasDraw:this.drawOnCanvas,canvasToDraw:_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.wk,drawOn:["mousemove","pan","drag"]})}}CrossHairCursor.defaultProps={customX:(props,moreProps)=>{const{xScale,xAccessor,currentItem,mouseXY}=moreProps,{snapX}=props;return snapX?Math.round(xScale(xAccessor(currentItem))):mouseXY[0]+.5},snapX:!0,strokeStyle:"rgba(55, 71, 79, 0.8)",strokeDasharray:"Dash",strokeWidth:1},CrossHairCursor.contextType=_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.c0},"../coordinates/lib/EdgeCoordinateV3.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>drawOnCanvas});__webpack_require__("../../node_modules/react/jsx-runtime.js");var _react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../core/lib/utils/index.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/utils/strokeDasharray.js");const helper=props=>{const{coordinate:displayCoordinate,show,type,orient,edgeAt,hideLine,lineStrokeDasharray,fill,fontFamily,fontSize,textFill,lineStroke,stroke,strokeWidth,arrowWidth,rectWidth,rectHeight,rectRadius,x1,y1,x2,y2,dx}=props;if(!show)return null;let coordinateBase,coordinate;if(void 0!==displayCoordinate){let edgeXRect,edgeYRect,edgeXText,edgeYText;if("horizontal"===type)edgeXRect=dx+("right"===orient?edgeAt+1:edgeAt-rectWidth-1),edgeYRect=y1-rectHeight/2-strokeWidth,edgeXText=dx+("right"===orient?edgeAt+rectWidth/2:edgeAt-rectWidth/2),edgeYText=y1;else{const dy="bottom"===orient?strokeWidth-1:1-strokeWidth;edgeXRect=x1-rectWidth/2,edgeYRect=("bottom"===orient?edgeAt:edgeAt-rectHeight)+dy,edgeXText=x1,edgeYText=("bottom"===orient?edgeAt+rectHeight/2:edgeAt-rectHeight/2)+dy}coordinateBase={edgeXRect,edgeYRect,rectHeight:rectHeight+strokeWidth,rectWidth,rectRadius,fill,arrowWidth,stroke,strokeWidth},coordinate={edgeXText,edgeYText,textAnchor:"middle",fontFamily,fontSize,textFill,displayCoordinate}}return{coordinateBase,coordinate,line:hideLine?void 0:{stroke:lineStroke,strokeDasharray:lineStrokeDasharray,x1,y1,x2,y2},orient}},drawOnCanvas=(ctx,props)=>{const{coordinate,fitToText,fontSize,fontFamily,rectWidth}=props;ctx.font=`${fontSize}px ${fontFamily}`,ctx.textBaseline="middle";let width=rectWidth;fitToText&&(width=Math.round(ctx.measureText(coordinate).width+10));const edge=helper({...props,rectWidth:width});if(null!==edge){if(void 0!==edge.line&&(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__.O9)(edge.line)){const dashArray=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.y)(edge.line.strokeDasharray);ctx.setLineDash(dashArray),ctx.strokeStyle=edge.line.stroke,ctx.lineWidth=1,ctx.beginPath(),ctx.moveTo(edge.line.x1,edge.line.y1),ctx.lineTo(edge.line.x2,edge.line.y2),ctx.stroke()}if(ctx.setLineDash([]),void 0!==edge.coordinateBase){const{arrowWidth,rectWidth,rectHeight,rectRadius}=edge.coordinateBase;ctx.fillStyle=edge.coordinateBase.fill,void 0!==edge.coordinateBase.stroke&&(ctx.strokeStyle=edge.coordinateBase.stroke,ctx.lineWidth=edge.coordinateBase.strokeWidth);let x=edge.coordinateBase.edgeXRect;const y=edge.coordinateBase.edgeYRect,halfHeight=rectHeight/2;ctx.beginPath(),arrowWidth>0&&"right"===edge.orient?(x-=arrowWidth,ctx.moveTo(x,y+halfHeight),ctx.lineTo(x+arrowWidth,y),ctx.lineTo(x+rectWidth+arrowWidth,y),ctx.lineTo(x+rectWidth+arrowWidth,y+rectHeight),ctx.lineTo(x+arrowWidth,y+rectHeight),ctx.closePath()):arrowWidth>0&&"left"===edge.orient?(ctx.moveTo(x,y),ctx.lineTo(x+rectWidth,y),ctx.lineTo(x+rectWidth+arrowWidth,y+halfHeight),ctx.lineTo(x+rectWidth,y+rectHeight),ctx.lineTo(x,y+rectHeight),ctx.closePath()):rectRadius?roundRect(ctx,x-.5,y-.5,rectWidth,rectHeight,3):ctx.rect(x-.5,y,rectWidth,rectHeight),ctx.fill(),void 0!==edge.coordinateBase.stroke&&ctx.stroke(),void 0!==edge.coordinate&&(ctx.fillStyle=edge.coordinate.textFill,ctx.textAlign="middle"===edge.coordinate.textAnchor?"center":edge.coordinate.textAnchor,ctx.fillText(edge.coordinate.displayCoordinate,edge.coordinate.edgeXText,edge.coordinate.edgeYText))}}},roundRect=(ctx,x,y,width,height,radius)=>{ctx.beginPath(),ctx.moveTo(x+radius,y),ctx.lineTo(x+width-radius,y),ctx.quadraticCurveTo(x+width,y,x+width,y+radius),ctx.lineTo(x+width,y+height-radius),ctx.quadraticCurveTo(x+width,y+height,x+width-radius,y+height),ctx.lineTo(x+radius,y+height),ctx.quadraticCurveTo(x,y+height,x,y+height-radius),ctx.lineTo(x,y+radius),ctx.quadraticCurveTo(x,y,x+radius,y),ctx.closePath()}},"../coordinates/lib/MouseCoordinateX.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>MouseCoordinateX});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/GenericChartComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../core/lib/GenericComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../core/lib/utils/index.js"),_EdgeCoordinateV3__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../coordinates/lib/EdgeCoordinateV3.js");class MouseCoordinateX extends react__WEBPACK_IMPORTED_MODULE_1__.Component{constructor(){super(...arguments),this.drawOnCanvas=(ctx,moreProps)=>{const props=this.helper(this.props,moreProps);null!==props&&(0,_EdgeCoordinateV3__WEBPACK_IMPORTED_MODULE_5__.s)(ctx,props)},this.helper=(props,moreProps)=>{const{show,currentItem,chartConfig:{height}}=moreProps;if((0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_4__.pN)(currentItem))return null;const{customX,orient,at,rectRadius,rectWidth,rectHeight,stroke,strokeOpacity,strokeWidth}=props,{fill,opacity,fitToText,fontFamily,fontSize,textFill}=props,edgeAt="bottom"===at?height:0,{x,coordinate}=customX(props,moreProps);return{coordinate,fitToText,show,type:"vertical",orient,edgeAt,hideLine:!0,fill,opacity,fontFamily,fontSize,textFill,stroke,strokeOpacity,strokeWidth,rectWidth,rectHeight,rectRadius,arrowWidth:0,x1:x,x2:x,y1:0,y2:height}}}render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.P,{clip:!1,canvasDraw:this.drawOnCanvas,canvasToDraw:_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.wk,drawOn:["mousemove","pan","drag"]})}}MouseCoordinateX.defaultProps={at:"bottom",customX:(props,moreProps)=>{const{xScale,xAccessor,currentItem,mouseXY}=moreProps,{snapX}=props,x=snapX?xScale(xAccessor(currentItem)):mouseXY[0],{displayXAccessor}=moreProps,{displayFormat}=props;return{x,coordinate:displayFormat(snapX?displayXAccessor(currentItem):xScale.invert(x))}},fill:"#4C525E",fitToText:!0,fontFamily:"-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",fontSize:13,opacity:1,orient:"bottom",rectWidth:80,rectHeight:20,snapX:!0,strokeOpacity:1,strokeWidth:1,textFill:"#FFFFFF",yAxisPad:0}},"../coordinates/lib/MouseCoordinateY.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>MouseCoordinateY});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/GenericChartComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../core/lib/GenericComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../core/lib/utils/index.js"),_EdgeCoordinateV3__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../coordinates/lib/EdgeCoordinateV3.js");class MouseCoordinateY extends react__WEBPACK_IMPORTED_MODULE_1__.Component{constructor(){super(...arguments),this.drawOnCanvas=(ctx,moreProps)=>{const props=this.helper(this.props,moreProps);void 0!==props&&(0,_EdgeCoordinateV3__WEBPACK_IMPORTED_MODULE_5__.s)(ctx,props)},this.helper=(props,moreProps)=>{const{chartConfig:{yScale},chartId,currentItem,currentCharts,mouseXY,show}=moreProps;if(!show)return;if((0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_4__.pN)(mouseXY))return;if(currentCharts.indexOf(chartId)<0)return;const{displayFormat,yAccessor}=props;if(yAccessor&&!currentItem)return;const y=yAccessor?yScale(yAccessor(currentItem)):mouseXY[1];return function getYCoordinate(y,coordinate,props,moreProps){const{width}=moreProps,{orient,at,rectWidth,rectHeight,dx,stroke,strokeOpacity,strokeWidth}=props,{fill,opacity,fitToText,fontFamily,fontSize,textFill,arrowWidth}=props,coordinateProps={coordinate,show:!0,fitToText,type:"horizontal",orient,edgeAt:"right"===at?width:0,hideLine:!0,fill,opacity,fontFamily,fontSize,textFill,stroke,strokeOpacity,strokeWidth,rectWidth,rectHeight,arrowWidth,dx,x1:0,x2:width,y1:y,y2:y};return coordinateProps}(y,displayFormat(yScale.invert(y)),props,moreProps)}}render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.P,{clip:!1,canvasDraw:this.drawOnCanvas,canvasToDraw:_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.wk,drawOn:["mousemove","pan","drag"]})}}MouseCoordinateY.defaultProps={arrowWidth:0,at:"right",dx:0,fill:"#4C525E",fitToText:!1,fontFamily:"-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",fontSize:13,opacity:1,orient:"right",rectWidth:50,rectHeight:20,strokeOpacity:1,strokeWidth:1,textFill:"#FFFFFF",yAxisPad:0}},"../core/lib/utils/barWidth.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>plotDataLengthBarWidth});var ___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../core/lib/utils/index.js");const plotDataLengthBarWidth=(props,moreProps)=>{const{widthRatio}=props,{xAccessor,xScale,plotData}=moreProps,[l,r]=xScale.range();if(null!=xScale.invert){const[dl,dr]=xScale.domain();if("number"==typeof dl&&"number"==typeof dr){return Math.abs(r-l)/Math.abs(dl-dr)*widthRatio}return(xScale(xAccessor((0,___WEBPACK_IMPORTED_MODULE_0__.HV)(plotData)))-xScale(xAccessor((0,___WEBPACK_IMPORTED_MODULE_0__.$1)(plotData))))/plotData.length*widthRatio*.7}return Math.abs(r-l)/xScale.domain().length*widthRatio}},"../core/lib/utils/noop.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>noop});const noop=()=>{}},"../interactive/lib/DrawingObjectSelector.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>DrawingObjectSelector});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/GenericComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../core/lib/utils/index.js"),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../interactive/lib/utils.js");class DrawingObjectSelector extends react__WEBPACK_IMPORTED_MODULE_1__.Component{constructor(){super(...arguments),this.getInteraction=moreProps=>{const{getInteractiveNodes,drawingObjectMap}=this.props,interactiveNodes=getInteractiveNodes();return(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.s8)(interactiveNodes,each=>{const key=drawingObjectMap[each.type],valueArray=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.O9)(key)?each.node.props[key]:void 0;if((0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.O9)(valueArray)&&Array.isArray(valueArray)&&valueArray.length>0){const morePropsForChart=(0,_utils__WEBPACK_IMPORTED_MODULE_4__.xc)(moreProps,each.chartId),objects=each.node.getSelectionState(morePropsForChart);return{type:each.type,chartId:each.chartId,objects}}return{type:each.type,chartId:each.chartId,objects:[]}})},this.handleClick=(e,moreProps)=>{e.preventDefault();const{onSelect}=this.props,{enabled}=this.props;if(!enabled)return;const interactives=this.getInteraction(moreProps);void 0!==onSelect&&onSelect(e,interactives,moreProps)},this.handleDoubleClick=(e,moreProps)=>{e.preventDefault();const{onDoubleClick}=this.props,{enabled}=this.props;if(!enabled)return;const interactives=this.getInteraction(moreProps),allSelected=(0,_utils__WEBPACK_IMPORTED_MODULE_4__.ef)(interactives);if(allSelected.length>0){const selected=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.d5)(allSelected),item={type:selected.type,chartId:selected.chartId,object:(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.d5)(selected.objects)},morePropsForChart=(0,_utils__WEBPACK_IMPORTED_MODULE_4__.xc)(moreProps,selected.chartId);void 0!==onDoubleClick&&onDoubleClick(e,item,morePropsForChart)}}}render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.By,{svgDraw:()=>null,canvasToDraw:_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.wk,canvasDraw:()=>null,onMouseDown:this.handleClick,onDoubleClick:this.handleDoubleClick,drawOn:["mousemove","pan","drag","mousedown"]})}}DrawingObjectSelector.defaultProps={enabled:!0}},"../interactive/lib/components/HoverTextNearMouse.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>HoverTextNearMouse});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/GenericChartComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../core/lib/utils/index.js");class HoverTextNearMouse extends react__WEBPACK_IMPORTED_MODULE_1__.Component{constructor(props){super(props),this.textNode=react__WEBPACK_IMPORTED_MODULE_1__.createRef(),this.renderSVG=moreProps=>{const{fontFamily,fontSize,fill,bgFill,bgOpacity}=this.props,textMetaData=function helper(props,moreProps){const{show,bgWidth,bgHeight}=props,{mouseXY,chartConfig:{height,width},show:mouseInsideCanvas}=moreProps;if(show&&mouseInsideCanvas){const[x,y]=mouseXY,cx=x<width/2?x+10:x-bgWidth-10,cy=y<height/2?y+10:y-bgHeight-10;return{rect:{x:cx,y:cy,width:bgWidth,height:bgHeight},text:{text:props.text,x:cx+5,y:cy+bgHeight/2}}}}({...this.props,bgWidth:this.getBgWidth(),bgHeight:this.getBgHeight()},moreProps);if(void 0!==textMetaData&&(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.O9)(textMetaData)){const{rect,text}=textMetaData;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("g",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("rect",{fill:bgFill,fillOpacity:bgOpacity,stroke:bgFill,...rect}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("text",{ref:this.textNode,fontSize,fontFamily,textAnchor:"start",alignmentBaseline:"central",fill,x:text.x,y:text.y,children:text.text})]})}return null},this.getBgHeight=()=>{const{bgHeight}=this.props,{textHeight}=this.state;return"auto"!==bgHeight?bgHeight:void 0!==textHeight?textHeight+10:10},this.getBgWidth=()=>{const{bgWidth}=this.props,{textWidth}=this.state;return"auto"!==bgWidth?bgWidth:void 0!==textWidth?textWidth+10:10},this.updateTextSize=()=>{const{bgWidth,bgHeight}=this.props;if("auto"===bgWidth||"auto"===bgHeight){const textNode=this.textNode.current;if(null!==textNode){const{width,height}=textNode.getBBox();this.state.textWidth===width&&this.state.textHeight===height||this.setState({textWidth:width,textHeight:height})}}},this.state={textWidth:void 0,textHeight:void 0}}componentDidMount(){this.updateTextSize()}componentDidUpdate(){this.updateTextSize()}render(){const{text}=this.props;return text?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.P,{svgDraw:this.renderSVG,drawOn:["mousemove"]}):null}}HoverTextNearMouse.defaultProps={fontFamily:"-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",fontSize:12,fill:"#000000",bgFill:"#FA9325",bgOpacity:.5}},"../interactive/lib/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ap:()=>saveNodeType,FK:()=>isHover,MH:()=>terminate,Ur:()=>getValueFromOverride,_W:()=>isHoverForInteractiveType,ef:()=>getSelected,xc:()=>getMorePropsForChart});var _react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../core/lib/utils/index.js");function getValueFromOverride(override,index,key,defaultValue){return(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_0__.O9)(override)&&override.index===index?override[key]:defaultValue}function terminate(){this.setState({current:null,override:null})}function saveNodeType(type){return node=>{(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_0__.O9)(this.nodes)?(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_0__.pN)(node)&&(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_0__.O9)(this.nodes[type])?delete this.nodes[type]:this.nodes[type]=node:this.nodes=[]}}function isHoverForInteractiveType(interactiveType){return function(moreProps){if((0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_0__.O9)(this.nodes)){const selecedNodes=this.nodes.map(node=>node.isHover(moreProps));return this.props[interactiveType].map((t,idx)=>({...t,selected:selecedNodes[idx]}))}return[]}}function isHover(moreProps){return(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_0__.s8)(this.nodes,node=>node.isHover(moreProps)).reduce((a,b)=>a||b)}function getMorePropsForChart(moreProps,chartId){const{chartConfig:chartConfigList,chartConfigs}=moreProps,configList=chartConfigList||chartConfigs;if(Array.isArray(configList)){const chartConfig=configList.find(each=>each.id===chartId);if(chartConfig){const{origin}=chartConfig,mouseXY=function getMouseXY(moreProps,[ox,oy]){if(Array.isArray(moreProps.mouseXY)){const{mouseXY:[x,y]}=moreProps;return[x-ox,y-oy]}return moreProps.mouseXY}(moreProps,origin);return{...moreProps,chartConfig,mouseXY}}}const fallbackChartConfig={id:chartId,origin:[0,0],yScale:moreProps.yScale||moreProps.currentCharts?.[chartId]?.yScale};return{...moreProps,chartConfig:fallbackChartConfig,mouseXY:moreProps.mouseXY||[0,0],xScale:moreProps.xScale,yScale:fallbackChartConfig.yScale}}function getSelected(interactives){return interactives.map(each=>{const objects=each.objects.filter(obj=>obj.selected);return{...each,objects}}).filter(each=>each.objects.length>0)}},"../scales/lib/discontinuousTimeScaleProvider.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>discontinuousTimeScaleProvider,L:()=>discontinuousTimeScaleProviderBuilder});var utils=__webpack_require__("../core/lib/utils/index.js"),noop=__webpack_require__("../core/lib/utils/noop.js");var zipper=__webpack_require__("../core/lib/utils/zipper.js"),defaultLocale=__webpack_require__("../../node_modules/d3-time-format/src/defaultLocale.js"),ascending=__webpack_require__("../../node_modules/d3-array/src/ascending.js"),linear=__webpack_require__("../../node_modules/d3-scale/src/linear.js");const defaultFormatters={yearFormat:"%Y",quarterFormat:"%b",monthFormat:"%b",weekFormat:"%e",dayFormat:"%e",hourFormat:"%H:%M",minuteFormat:"%H:%M",secondFormat:"%H:%M:%S",milliSecondFormat:".%L"},levelDefinition=[(d,date,i)=>d.startOfYear&&date.getFullYear()%12==0&&"yearFormat",(d,date,i)=>d.startOfYear&&date.getFullYear()%4==0&&"yearFormat",(d,date,i)=>d.startOfYear&&date.getFullYear()%2==0&&"yearFormat",(d,date,i)=>d.startOfYear&&"yearFormat",(d,date,i)=>d.startOfQuarter&&"quarterFormat",(d,date,i)=>d.startOfMonth&&"monthFormat",(d,date,i)=>d.startOfWeek&&"weekFormat",(d,date,i)=>d.startOfDay&&i%2==0&&"dayFormat",(d,date,i)=>d.startOfDay&&"dayFormat",(d,date,i)=>d.startOfHalfDay&&"hourFormat",(d,date,i)=>d.startOfQuarterDay&&"hourFormat",(d,date,i)=>d.startOfEighthOfADay&&"hourFormat",(d,date,i)=>d.startOfHour&&date.getHours()%2==0&&"hourFormat",(d,date,i)=>d.startOfHour&&"hourFormat",(d,date,i)=>d.startOf30Minutes&&"minuteFormat",(d,date,i)=>d.startOf15Minutes&&"minuteFormat",(d,date,i)=>d.startOf5Minutes&&"minuteFormat",(d,date,i)=>d.startOfMinute&&"minuteFormat",(d,date,i)=>d.startOf30Seconds&&"secondFormat",(d,date,i)=>d.startOf15Seconds&&"secondFormat",(d,date,i)=>d.startOf5Seconds&&"secondFormat",(d,date,i)=>d.startOfSecond&&"secondFormat",(d,date,i)=>"milliSecondFormat"],MAX_LEVEL=levelDefinition.length-1;function financeDiscontinuousScale(index,backingLinearScale=(0,linear.A)()){if(void 0===index)throw new Error("Use the discontinuousTimeScaleProvider to create financeDiscontinuousScale");function scale(newScale){return backingLinearScale(newScale)}return scale.invert=value=>{const inverted=backingLinearScale.invert(value);return Math.round(1e4*inverted)/1e4},scale.domain=newDomain=>void 0===newDomain?backingLinearScale.domain():(backingLinearScale.domain(newDomain),scale),scale.range=range=>void 0===range?backingLinearScale.range():(backingLinearScale.range(range),scale),scale.rangeRound=range=>backingLinearScale.rangeRound(range),scale.clamp=clamp=>void 0===clamp?backingLinearScale.clamp():(backingLinearScale.clamp(clamp),scale),scale.interpolate=interpolate=>void 0===interpolate?backingLinearScale.interpolate():(backingLinearScale.interpolate(interpolate),scale),scale.ticks=m=>{const backingTicks=backingLinearScale.ticks(m),ticksMap=new Map,[domainStart,domainEnd]=backingLinearScale.domain(),dStart=Math.ceil(domainStart),dHead=index[0]?.index,start=Math.max(dStart,dHead)+Math.abs(dHead),end=Math.min(Math.floor(domainEnd),index[index.length-1]?.index)+Math.abs(dHead),desiredTickCount=Math.ceil((end-start)/(domainEnd-domainStart)*backingTicks.length);for(let i=MAX_LEVEL;i>=0;i--){const ticksAtLevel=ticksMap.get(i),temp=void 0===ticksAtLevel?[]:ticksAtLevel.slice();for(let j=start;j<=end;j++)index[j].level===i&&temp.push(index[j]);ticksMap.set(i,temp)}let unsortedTicks=[];for(let k=MAX_LEVEL;k>=0;k--){const selectedTicks=ticksMap.get(k)??[];if(selectedTicks.length+unsortedTicks.length>1.5*desiredTickCount)break;unsortedTicks=unsortedTicks.concat(selectedTicks.map(d=>d.index))}const ticks=unsortedTicks.sort(ascending.A);if(end-start>ticks.length){const ticksSet=new Set(ticks),d=Math.abs(index[0].index),distance=Math.ceil(1.5*(backingTicks.length>0?(backingTicks[backingTicks.length-1]-backingTicks[0])/backingTicks.length/4:1));for(let i=0;i<ticks.length-1;i++)for(let j=i+1;j<ticks.length;j++)ticks[j]-ticks[i]<=distance&&ticksSet.delete(index[ticks[i]+d].level>=index[ticks[j]+d].level?ticks[j]:ticks[i]);return[...ticksSet.values()].map(i=>parseInt(i,10))}return ticks},scale.tickFormat=()=>function(x){const d=Math.abs(index[0].index),{format,date}=index[Math.floor(x+d)];return format(date)},scale.value=x=>{const d=Math.abs(index[0].index),row=index[Math.floor(x+d)];if(void 0!==row){const{date}=row;return date}},scale.nice=count=>(backingLinearScale.nice(count),scale),scale.index=x=>void 0===x?index:(index=x,scale),scale.copy=()=>financeDiscontinuousScale(index,backingLinearScale.copy()),scale}const evaluateLevel=(row,date,i,formatters)=>levelDefinition.map((eachLevel,idx)=>({level:levelDefinition.length-idx-1,format:formatters[eachLevel(row,date,i)]})).find(level=>!!level.format),discontinuousIndexCalculator=function slidingWindow(){let undefinedValue,sourcePath,source,misc,windowSize=10,accumulator=noop.l,skipInitial=0;const slidingWindow=data=>{const sourceFunction=source||(0,utils.Ae)(sourcePath),size=(0,utils.ER)(windowSize).apply(this,arguments),windowData=data.slice(skipInitial,size+skipInitial).map(sourceFunction);let accumulatorIdx=0;const undef=(0,utils.ER)(undefinedValue);return data.map((d,i)=>i<skipInitial+size-1?undef(sourceFunction(d),i,misc):(i>=skipInitial+size&&(windowData.shift(),windowData.push(sourceFunction(d,i))),accumulator(windowData,i,accumulatorIdx++,misc)))};return slidingWindow.undefinedValue=function(x){return arguments.length?(undefinedValue=x,slidingWindow):undefinedValue},slidingWindow.windowSize=function(x){return arguments.length?(windowSize=x,slidingWindow):windowSize},slidingWindow.misc=function(x){return arguments.length?(misc=x,slidingWindow):misc},slidingWindow.accumulator=function(x){return arguments.length?(accumulator=x,slidingWindow):accumulator},slidingWindow.skipInitial=function(x){return arguments.length?(skipInitial=x,slidingWindow):skipInitial},slidingWindow.sourcePath=function(x){return arguments.length?(sourcePath=x,slidingWindow):sourcePath},slidingWindow.source=function(x){return arguments.length?(source=x,slidingWindow):source},slidingWindow}().windowSize(2).undefinedValue((d,idx,{initialIndex,formatters})=>{const i=initialIndex,row={date:d.getTime(),startOfSecond:!1,startOf5Seconds:!1,startOf15Seconds:!1,startOf30Seconds:!1,startOfMinute:!1,startOf5Minutes:!1,startOf15Minutes:!1,startOf30Minutes:!1,startOfHour:!1,startOfEighthOfADay:!1,startOfQuarterDay:!1,startOfHalfDay:!1,startOfDay:!0,startOfWeek:!1,startOfMonth:!1,startOfQuarter:!1,startOfYear:!1},level=evaluateLevel(row,d,i,formatters);return{...row,index:i,...level}}),discontinuousIndexCalculatorLocalTime=discontinuousIndexCalculator.accumulator(([prevDate,nowDate],i,idx,{initialIndex,formatters})=>{const nowSeconds=nowDate.getSeconds(),nowMinutes=nowDate.getMinutes(),nowHours=nowDate.getHours(),nowDay=nowDate.getDay(),nowMonth=nowDate.getMonth(),startOfSecond=nowSeconds!==prevDate.getSeconds(),startOf5Seconds=startOfSecond&&nowSeconds%5==0,startOf15Seconds=startOfSecond&&nowSeconds%15==0,startOf30Seconds=startOfSecond&&nowSeconds%30==0,startOfMinute=nowMinutes!==prevDate.getMinutes(),startOf5Minutes=startOfMinute&&nowMinutes%5<=prevDate.getMinutes()%5,startOf15Minutes=startOfMinute&&nowMinutes%15<=prevDate.getMinutes()%15,startOf30Minutes=startOfMinute&&nowMinutes%30<=prevDate.getMinutes()%30,startOfHour=nowHours!==prevDate.getHours(),startOfEighthOfADay=startOfHour&&nowHours%3==0,startOfQuarterDay=startOfHour&&nowHours%6==0,startOfHalfDay=startOfHour&&nowHours%12==0,startOfDay=nowDay!==prevDate.getDay(),startOfWeek=nowDay<prevDate.getDay(),startOfMonth=nowMonth!==prevDate.getMonth(),startOfQuarter=startOfMonth&&nowMonth%3<=prevDate.getMonth()%3,startOfYear=nowDate.getFullYear()!==prevDate.getFullYear(),row={date:nowDate.getTime(),startOfSecond,startOf5Seconds,startOf15Seconds,startOf30Seconds,startOfMinute,startOf5Minutes,startOf15Minutes,startOf30Minutes,startOfHour,startOfEighthOfADay,startOfQuarterDay,startOfHalfDay,startOfDay,startOfWeek,startOfMonth,startOfQuarter,startOfYear},level=evaluateLevel(row,nowDate,i,formatters);return{...row,index:i+initialIndex,...level}});function createIndex(realDateAccessor,inputDateAccessor,initialIndex,formatters){return function(data){const dateAccessor=realDateAccessor(inputDateAccessor);return{index:discontinuousIndexCalculatorLocalTime.source(dateAccessor).misc({initialIndex,formatters})(data).map(each=>{const{format}=each;return{index:each.index,level:each.level,date:new Date(each.date),format:(0,defaultLocale.DC)(format)}})}}}function discontinuousTimeScaleProviderBuilder(){let withIndex,initialIndex=0,realDateAccessor=d=>d,inputDateAccessor=d=>d.date,indexAccessor=d=>d.idx,indexMutator=(d,idx)=>({...d,idx}),currentFormatters=defaultFormatters;const discontinuousTimeScaleProvider=function(data){let index=withIndex;if(void 0===index){index=createIndex(realDateAccessor,inputDateAccessor,initialIndex,currentFormatters)(data).index}const inputIndex=index,xScale=financeDiscontinuousScale(inputIndex);return{data:(0,zipper.A)().combine(indexMutator)(data,inputIndex),xScale,xAccessor:d=>d&&indexAccessor(d)?.index,displayXAccessor:realDateAccessor(inputDateAccessor)}};return discontinuousTimeScaleProvider.initialIndex=function(x){return arguments.length?(initialIndex=x,discontinuousTimeScaleProvider):initialIndex},discontinuousTimeScaleProvider.inputDateAccessor=function(x){return arguments.length?(inputDateAccessor=x,discontinuousTimeScaleProvider):inputDateAccessor},discontinuousTimeScaleProvider.indexAccessor=function(x){return arguments.length?(indexAccessor=x,discontinuousTimeScaleProvider):indexAccessor},discontinuousTimeScaleProvider.indexMutator=function(x){return arguments.length?(indexMutator=x,discontinuousTimeScaleProvider):indexMutator},discontinuousTimeScaleProvider.withIndex=function(x){return arguments.length?(withIndex=x,discontinuousTimeScaleProvider):withIndex},discontinuousTimeScaleProvider.utc=()=>(realDateAccessor=dateAccessor=>d=>{const date=dateAccessor(d),offsetInMillis=60*date.getTimezoneOffset()*1e3;return new Date(date.getTime()+offsetInMillis)},discontinuousTimeScaleProvider),discontinuousTimeScaleProvider.setLocale=(locale,formatters)=>(void 0!==locale&&(0,defaultLocale.Ay)(locale),void 0!==formatters&&(currentFormatters=formatters),discontinuousTimeScaleProvider),discontinuousTimeScaleProvider.indexCalculator=function(){return createIndex(realDateAccessor,inputDateAccessor,initialIndex,currentFormatters)},discontinuousTimeScaleProvider}const discontinuousTimeScaleProvider=discontinuousTimeScaleProviderBuilder()},"../series/lib/CandlestickSeries.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>CandlestickSeries});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../core/lib/GenericChartComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/GenericComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../core/lib/utils/index.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../core/lib/utils/barWidth.js"),d3_array__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/d3-array/src/group.js"),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/react/index.js");class CandlestickSeries extends react__WEBPACK_IMPORTED_MODULE_6__.Component{constructor(){super(...arguments),this.drawOnCanvas=(ctx,moreProps)=>{const{candleStrokeWidth=CandlestickSeries.defaultProps.candleStrokeWidth}=this.props,{xScale,chartConfig:{yScale},plotData,xAccessor}=moreProps,candleData=this.getCandleData(xAccessor,xScale,yScale,plotData);(0,d3_array__WEBPACK_IMPORTED_MODULE_5__.Ay)(candleData,d=>d.wick.stroke).forEach((values,key)=>{ctx.fillStyle=key,values.forEach(each=>{const d=each.wick;ctx.fillRect(d.x-.5,d.y1,1,d.y2-d.y1),ctx.fillRect(d.x-.5,d.y3,1,d.y4-d.y3)})});(0,d3_array__WEBPACK_IMPORTED_MODULE_5__.Ay)(candleData,d=>d.stroke,d=>d.fill).forEach((strokeValues,strokeKey)=>{"none"!==strokeKey&&(ctx.strokeStyle=strokeKey,ctx.lineWidth=candleStrokeWidth),strokeValues.forEach((values,key)=>{ctx.fillStyle=key,values.forEach(d=>{d.width<=1?ctx.fillRect(d.x-.5,d.y,1,d.height):0===d.height?ctx.fillRect(d.x-.5,d.y,d.width,1):(ctx.fillRect(d.x-.5,d.y,d.width,d.height),"none"!==strokeKey&&ctx.strokeRect(d.x,d.y,d.width,d.height))})})})},this.getCandleData=(xAccessor,xScale,yScale,plotData)=>{const{fill:fillProp,stroke:strokeProp,yAccessor,wickStroke:wickStrokeProp}=this.props,fill=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.ER)(fillProp),stroke=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.ER)(strokeProp),wickStroke=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.ER)(wickStrokeProp),offset=.5*(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.ER)(this.props.width)(this.props,{xScale,xAccessor,plotData});return plotData.filter(d=>void 0!==yAccessor(d)).map(d=>{const ohlc=yAccessor(d);if(void 0===ohlc)return;const xValue=xAccessor(d),x=xScale(xValue),y=Math.round(yScale(Math.max(ohlc.open,ohlc.close))),height=Math.max(1,Math.round(Math.abs(yScale(ohlc.open)-yScale(ohlc.close))));return{x:x-offset,y,wick:{stroke:wickStroke(ohlc),x,y1:Math.round(yScale(ohlc.high)),y2:y,y3:y+height,y4:Math.round(yScale(ohlc.low))},height,width:2*offset,fill:fill(ohlc),stroke:stroke(ohlc),direction:ohlc.close-ohlc.open}}).filter(d=>void 0!==d)}}render(){const{clip}=this.props;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__.P,{clip,canvasDraw:this.drawOnCanvas,canvasToDraw:_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.WJ,drawOn:["pan"]})}}CandlestickSeries.defaultProps={candleStrokeWidth:.5,clip:!0,fill:d=>d.close>d.open?"#26a69a":"#ef5350",stroke:"none",wickStroke:d=>d.close>d.open?"#26a69a":"#ef5350",width:_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_4__.h,widthRatio:.8,yAccessor:d=>({open:d.open,high:d.high,low:d.low,close:d.close})}},"./src/data/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>withOHLCData,R:()=>withUpdatingData});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),tsv=__webpack_require__("../../node_modules/d3-dsv/src/tsv.js"),defaultLocale=__webpack_require__("../../node_modules/d3-time-format/src/defaultLocale.js"),react=__webpack_require__("../../node_modules/react/index.js");const parseDate=(0,defaultLocale.T6)("%Y-%m-%d"),parseData=()=>d=>{const date=parseDate(d.date);d.date=null===date?new Date(Number(d.date)):new Date(date);for(const key in d)"date"!==key&&Object.prototype.hasOwnProperty.call(d,key)&&(d[key]=+d[key]);return d};function withOHLCData(dataSet="DAILY"){return OriginalComponent=>class WithOHLCData extends react.Component{constructor(props){super(props),this.state={message:`Loading ${dataSet} data...`}}componentDidMount(){fetch(`https://raw.githubusercontent.com/reactivemarkets/react-financial-charts/master/packages/stories/src/data/${dataSet}.tsv`).then(response=>response.text()).then(data=>(0,tsv.Nu)(data,parseData())).then(data=>{this.setState({data})}).catch(()=>{this.setState({message:"Failed to fetch data."})})}render(){const{data,message}=this.state;return void 0===data?(0,jsx_runtime.jsx)("div",{className:"center",children:message}):(0,jsx_runtime.jsx)(OriginalComponent,{...this.props,data})}}}function withUpdatingData(initialLength=120,interval=1e3){return OriginalComponent=>class WithOHLCData extends react.Component{constructor(props){super(props),this.state={data:props.data.slice(0,initialLength),length:initialLength}}componentDidMount(){this.interval=window.setInterval(()=>{const{data}=this.props,{length}=this.state;length<data.length?this.setState({data:data.slice(0,length+1),length:length+1}):window.clearInterval(this.interval)},interval)}componentWillUnmount(){window.clearInterval(this.interval)}render(){const{data}=this.state;return(0,jsx_runtime.jsx)(OriginalComponent,{...this.props,data})}}}}}]);