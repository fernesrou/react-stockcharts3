"use strict";(self.webpackChunk_react_stockcharts3_stories=self.webpackChunk_react_stockcharts3_stories||[]).push([[1218],{"../axes/lib/Axis.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>Axis});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),GenericChartComponent=__webpack_require__("../core/lib/GenericChartComponent.js"),GenericComponent=__webpack_require__("../core/lib/GenericComponent.js"),utils=__webpack_require__("../core/lib/utils/index.js"),strokeDasharray=__webpack_require__("../core/lib/utils/strokeDasharray.js"),range=__webpack_require__("../../node_modules/d3-array/src/range.js"),zip=__webpack_require__("../../node_modules/d3-array/src/zip.js"),src_simulation=__webpack_require__("../../node_modules/d3-force/src/simulation.js"),x=__webpack_require__("../../node_modules/d3-force/src/x.js"),collide=__webpack_require__("../../node_modules/d3-force/src/collide.js"),react=__webpack_require__("../../node_modules/react/index.js"),mean=__webpack_require__("../../node_modules/d3-array/src/mean.js"),pointer=__webpack_require__("../../node_modules/d3-selection/src/pointer.js"),src_select=__webpack_require__("../../node_modules/d3-selection/src/select.js"),react_dom=__webpack_require__("../../node_modules/react-dom/index.js");class AxisZoomCapture extends react.Component{constructor(props){super(props),this.ref=react.createRef(),this.clicked=!1,this.dragHappened=!1,this.handleDragEnd=e=>{const container=this.ref.current;if(null!==container){if(!this.dragHappened)if(this.clicked){const mouseXY=(0,pointer.A)(e,container),{onDoubleClick}=this.props;void 0!==onDoubleClick&&onDoubleClick(e,mouseXY)}else this.clicked=!0,setTimeout(()=>{this.clicked=!1},300);(0,src_select.A)((0,utils.mK)(container)).on(utils.Xd,null).on(utils.du,null).on(utils.vx,null).on(utils.t2,null),this.setState({startPosition:null})}},this.handleDrag=e=>{const container=this.ref.current;if(null===container)return;this.dragHappened=!0;const{getMouseDelta,inverted=!0}=this.props,{startPosition}=this.state;if(null!==startPosition){const{startScale}=startPosition,{startXY}=startPosition,diff=getMouseDelta(startXY,(0,pointer.A)(e,container)),center=(0,mean.A)(startScale.range());if(void 0===center)return;const tempRange=startScale.range().map(d=>inverted?d-(0,utils._S)(d-center)*diff:d+(0,utils._S)(d-center)*diff),newDomain=tempRange.map(startScale.invert);if((0,utils._S)((0,utils.HV)(startScale.range())-(0,utils.$1)(startScale.range()))===(0,utils._S)((0,utils.HV)(tempRange)-(0,utils.$1)(tempRange))){const{axisZoomCallback}=this.props;void 0!==axisZoomCallback&&(0,react_dom.flushSync)(()=>{axisZoomCallback(newDomain)})}}},this.handleDragStartTouch=event=>{const container=this.ref.current;if(null===container)return;this.dragHappened=!1;const{getScale,getMoreProps}=this.props,startScale=getScale(getMoreProps());if(1===event.touches.length&&void 0!==startScale.invert){(0,src_select.A)((0,utils.mK)(container)).on(utils.vx,this.handleDrag).on(utils.t2,this.handleDragEnd);const startXY=(0,utils.L6)((0,utils.Sq)(event.touches[0]),event);react.startTransition(()=>{this.setState({startPosition:{startScale,startXY}})})}},this.handleDragStartMouse=event=>{event.preventDefault();const container=this.ref.current;if(null===container)return;this.dragHappened=!1;const{getScale,getMoreProps}=this.props,startScale=getScale(getMoreProps());if(void 0!==startScale.invert){(0,src_select.A)((0,utils.mK)(container)).on(utils.Xd,this.handleDrag,!1).on(utils.du,this.handleDragEnd,!1);const startXY=(0,utils.jQ)(event);react.startTransition(()=>{this.setState({startPosition:{startXY,startScale}})})}},this.handleRightClick=event=>{event.stopPropagation(),event.preventDefault();const container=this.ref.current;if(null===container)return;const{onContextMenu}=this.props;if(void 0===onContextMenu)return;const defaultRect=container.getBoundingClientRect(),mouseXY=(0,utils.jQ)(event,defaultRect);(0,src_select.A)((0,utils.mK)(container)).on(utils.Xd,null).on(utils.du,null),react.startTransition(()=>{this.setState({startPosition:null})}),onContextMenu(event,mouseXY)},this.state={startPosition:null}}render(){const{bg,className,zoomCursorClassName}=this.props,cursor=null!==this.state.startPosition?zoomCursorClassName:"react-financial-charts-default-cursor";return(0,jsx_runtime.jsx)("rect",{className:`react-financial-charts-enable-interaction ${cursor} ${className}`,ref:this.ref,x:bg.x,y:bg.y,opacity:0,height:bg.h,width:bg.w,onContextMenu:this.handleRightClick,onMouseDown:this.handleDragStartMouse,onTouchStart:this.handleDragStartTouch})}}class Axis extends react.Component{constructor(){super(...arguments),this.chartRef=react.createRef(),this.getMoreProps=()=>this.chartRef.current.getMoreProps(),this.drawOnCanvas=(ctx,moreProps)=>{const{showDomain,showGridLines,showTickLabel,showTicks,transform,range,getScale,tickLabelFill}=this.props;ctx.save(),ctx.translate(transform[0],transform[1]);const scale=getScale(moreProps),tickProps=tickHelper(this.props,scale);if(showTicks&&drawTicks(ctx,tickProps),showGridLines&&tickProps.ticks.forEach(tick=>{drawGridLine(ctx,tick,tickProps,moreProps)}),showTickLabel){const{fontFamily,fontSize,fontWeight,textAnchor}=tickProps;ctx.font=`${fontWeight} ${fontSize}px ${fontFamily}`,void 0!==tickLabelFill&&(ctx.fillStyle=tickLabelFill),ctx.textAlign="middle"===textAnchor?"center":textAnchor,tickProps.ticks.forEach(tick=>{drawEachTickLabel(ctx,tick,tickProps)})}showDomain&&drawAxisLine(ctx,this.props,range),ctx.restore()}}render(){const{bg,axisZoomCallback,className,zoomCursorClassName,zoomEnabled,getScale,inverted,transform,getMouseDelta,edgeClip,onContextMenu,onDoubleClick}=this.props,zoomCapture=zoomEnabled?(0,jsx_runtime.jsx)(AxisZoomCapture,{bg,getScale,getMoreProps:this.getMoreProps,getMouseDelta,axisZoomCallback,className,zoomCursorClassName,inverted,onContextMenu,onDoubleClick}):null;return(0,jsx_runtime.jsxs)("g",{transform:`translate(${transform[0]}, ${transform[1]})`,children:[zoomCapture,(0,jsx_runtime.jsx)(GenericChartComponent.P,{ref:this.chartRef,canvasToDraw:GenericComponent.WJ,clip:!1,edgeClip,canvasDraw:this.drawOnCanvas,drawOn:["pan"]})]})}}Axis.defaultProps={edgeClip:!1,zoomEnabled:!1,zoomCursorClassName:""};const tickHelper=(props,scale)=>{const{orient,innerTickSize=4,tickFormat,tickPadding=4,tickLabelFill,tickStrokeWidth,tickStrokeDasharray,fontSize=12,fontFamily,fontWeight,showTicks,showTickLabel,ticks:tickArguments,tickValues:tickValuesProp,tickStrokeStyle,tickInterval,tickIntervalFunction,...rest}=props;let tickValues;if(void 0!==tickValuesProp)tickValues="function"==typeof tickValuesProp?tickValuesProp(scale.domain()):tickValuesProp;else if(void 0!==tickInterval){const[min,max]=scale.domain(),baseTickValues=(0,range.A)(min,max,(max-min)/tickInterval);tickValues=tickIntervalFunction?tickIntervalFunction(min,max,tickInterval):baseTickValues}else tickValues=void 0!==scale.ticks?scale.ticks(tickArguments):scale.domain();const format=void 0===tickFormat?scale.tickFormat(tickArguments):d=>tickFormat(d)||"",sign="top"===orient||"left"===orient?-1:1,tickSpacing=Math.max(innerTickSize,0)+tickPadding;let ticks,dy,canvas_dy,textAnchor;if("bottom"===orient||"top"===orient){dy=sign<0?"0em":".71em",canvas_dy=sign<0?0:.71*fontSize,textAnchor="middle";const y2=sign*innerTickSize,labelY=sign*tickSpacing;if(ticks=tickValues.map(d=>{const x=Math.round(scale(d));return{value:d,x1:x,y1:0,x2:x,y2,labelX:x,labelY}}),showTicks){const nodes=ticks.map(d=>({id:d.value,value:d.value,fy:d.y2,origX:d.x1})),simulation=(0,src_simulation.A)(nodes).force("x",(0,x.A)(d=>d.origX).strength(1)).force("collide",(0,collide.A)(22)).stop();for(let i=0;i<100;++i)simulation.tick();ticks=(0,zip.A)(ticks,nodes).map(d=>{const a=d[0],b=d[1];return Math.abs(b.x-b.origX)>.01?{...a,x2:b.x,labelX:b.x}:a})}}else ticks=tickValues.map(d=>{const y=Math.round(scale(d));return{value:d,x1:0,y1:y,x2:sign*innerTickSize,y2:y,labelX:sign*tickSpacing,labelY:y}}),dy=".32em",canvas_dy=.32*fontSize,textAnchor=sign<0?"end":"start";return{orient,ticks,scale,tickStrokeStyle,tickLabelFill:tickLabelFill||tickStrokeStyle,tickStrokeWidth,tickStrokeDasharray,dy,canvas_dy,textAnchor,fontSize,fontFamily,fontWeight,format,showTickLabel,...rest}},drawAxisLine=(ctx,props,range)=>{const{orient,outerTickSize,strokeStyle,strokeWidth}=props,sign="top"===orient||"left"===orient?-1:1,xAxis="bottom"===orient||"top"===orient;ctx.lineWidth=strokeWidth,ctx.strokeStyle=strokeStyle,ctx.beginPath();const firstPoint=(0,utils.$1)(range),lastPoint=(0,utils.HV)(range),tickSize=sign*outerTickSize;xAxis?(ctx.moveTo(firstPoint,tickSize),ctx.lineTo(firstPoint,0),ctx.lineTo(lastPoint,0),ctx.lineTo(lastPoint,tickSize)):(ctx.moveTo(tickSize,firstPoint),ctx.lineTo(0,firstPoint),ctx.lineTo(0,lastPoint),ctx.lineTo(tickSize,lastPoint)),ctx.stroke()},drawTicks=(ctx,result)=>{const{ticks,tickStrokeStyle}=result;void 0!==tickStrokeStyle&&(ctx.strokeStyle=tickStrokeStyle,ctx.fillStyle=tickStrokeStyle),ticks.forEach(tick=>{drawEachTick(ctx,tick,result)})},drawGridLine=(ctx,tick,result,moreProps)=>{const{orient,gridLinesStrokeWidth,gridLinesStrokeStyle,gridLinesStrokeDasharray}=result,{chartConfig}=moreProps,{height,width}=chartConfig;void 0!==gridLinesStrokeStyle&&(ctx.strokeStyle=gridLinesStrokeStyle),ctx.beginPath();const sign="top"===orient||"left"===orient?1:-1;switch(orient){case"top":case"bottom":ctx.moveTo(tick.x1,0),ctx.lineTo(tick.x2,sign*height);break;default:ctx.moveTo(0,tick.y1),ctx.lineTo(sign*width,tick.y2)}ctx.lineWidth=gridLinesStrokeWidth;const lineDash=(0,strokeDasharray.y)(gridLinesStrokeDasharray);ctx.setLineDash(lineDash),ctx.stroke()},drawEachTick=(ctx,tick,result)=>{const{tickStrokeWidth,tickStrokeDasharray}=result;ctx.beginPath(),ctx.moveTo(tick.x1,tick.y1),ctx.lineTo(tick.x2,tick.y2),ctx.lineWidth=tickStrokeWidth;const lineDash=(0,strokeDasharray.y)(tickStrokeDasharray);ctx.setLineDash(lineDash),ctx.stroke()},drawEachTickLabel=(ctx,tick,result)=>{const{canvas_dy,format}=result,text=format(tick.value);ctx.beginPath(),ctx.fillText(text,tick.labelX,tick.labelY+canvas_dy)}},"../axes/lib/XAxis.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>XAxis});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../core/lib/Chart.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react/index.js"),_Axis__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../axes/lib/Axis.js");class XAxis extends react__WEBPACK_IMPORTED_MODULE_2__.Component{constructor(){super(...arguments),this.axisZoomCallback=newXDomain=>{const{xAxisZoom}=this.context;xAxisZoom&&xAxisZoom(newXDomain)},this.helper=()=>{const{axisAt,xZoomHeight=XAxis.defaultProps.xZoomHeight,orient,ticks}=this.props,{chartConfig:{width,height}}=this.context;let axisLocation;const w=width,h=xZoomHeight;switch(axisAt){case"top":axisLocation=0;break;case"bottom":axisLocation=height;break;case"middle":axisLocation=height/2;break;default:axisLocation="number"==typeof axisAt?axisAt:height}const y="top"===orient?-xZoomHeight:0;return{transform:[0,axisLocation],range:[0,width],getScale:this.getXScale,bg:{x:0,y,h,w},ticks:ticks??this.getXTicks(width)}},this.getXTicks=width=>width<400?2:width<500?6:8,this.getXScale=moreProps=>{const{xScale:scale,width}=moreProps;if(scale.invert){const trueRange=[0,width],trueDomain=trueRange.map(scale.invert);return scale.copy().domain(trueDomain).range(trueRange)}return scale}}render(){const{getMouseDelta=XAxis.defaultProps.getMouseDelta,outerTickSize=XAxis.defaultProps.outerTickSize,showTicks,strokeStyle=XAxis.defaultProps.strokeStyle,strokeWidth=XAxis.defaultProps.strokeWidth,zoomEnabled,...rest}=this.props,{...moreProps}=this.helper();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Axis__WEBPACK_IMPORTED_MODULE_3__._,{...rest,...moreProps,getMouseDelta,outerTickSize,showTicks,strokeStyle,strokeWidth,zoomEnabled:zoomEnabled&&showTicks,axisZoomCallback:this.axisZoomCallback})}}XAxis.defaultProps={axisAt:"bottom",className:"react-financial-charts-x-axis",domainClassName:"react-financial-charts-axis-domain",fontFamily:"-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",fontSize:12,fontWeight:400,getMouseDelta:(startXY,mouseXY)=>startXY[0]-mouseXY[0],gridLinesStrokeStyle:"#E2E4EC",gridLinesStrokeWidth:1,orient:"bottom",outerTickSize:0,innerTickSize:4,showDomain:!0,showGridLines:!1,showTicks:!0,showTickLabel:!0,strokeStyle:"#000000",strokeWidth:1,tickPadding:4,tickLabelFill:"#000000",tickStrokeStyle:"#000000",xZoomHeight:25,zoomEnabled:!0,zoomCursorClassName:"react-financial-charts-ew-resize-cursor"},XAxis.contextType=_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__.u},"../axes/lib/YAxis.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>YAxis});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../core/lib/Chart.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react/index.js"),_Axis__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../axes/lib/Axis.js");class YAxis extends react__WEBPACK_IMPORTED_MODULE_2__.Component{constructor(){super(...arguments),this.axisZoomCallback=newYDomain=>{const{chartId,yAxisZoom}=this.context;yAxisZoom&&yAxisZoom(String(chartId),newYDomain)},this.helper=()=>{const{axisAt,ticks,yZoomWidth=YAxis.defaultProps.yZoomWidth,orient}=this.props,{chartConfig:{width,height}}=this.context;let axisLocation;const w=yZoomWidth,h=height;switch(axisAt){case"left":axisLocation=0;break;case"right":axisLocation=width;break;case"middle":axisLocation=width/2;break;default:axisLocation="number"==typeof axisAt?axisAt:width}const x="left"===orient?-yZoomWidth:0;return{transform:[axisLocation,0],range:[0,height],getScale:this.getYScale,bg:{x,y:0,h,w},ticks:ticks??this.getYTicks(height),zoomEnabled:this.context.chartConfig.yPan}},this.getYTicks=height=>height<300?2:height<500?6:8,this.getYScale=moreProps=>{const{yScale:scale,flipYScale,height}=moreProps.chartConfig;if(scale.invert){const trueRange=flipYScale?[0,height]:[height,0],trueDomain=trueRange.map(scale.invert);return scale.copy().domain(trueDomain).range(trueRange)}return scale}}render(){const{getMouseDelta=YAxis.defaultProps.getMouseDelta,outerTickSize=YAxis.defaultProps.outerTickSize,strokeStyle=YAxis.defaultProps.strokeStyle,strokeWidth=YAxis.defaultProps.strokeWidth,...rest}=this.props,{zoomEnabled,...moreProps}=this.helper();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Axis__WEBPACK_IMPORTED_MODULE_3__._,{...rest,...moreProps,edgeClip:!0,getMouseDelta,outerTickSize,strokeStyle,strokeWidth,zoomEnabled:this.props.zoomEnabled&&zoomEnabled,axisZoomCallback:this.axisZoomCallback})}}YAxis.defaultProps={axisAt:"right",className:"react-financial-charts-y-axis",domainClassName:"react-financial-charts-axis-domain",fontFamily:"-apple-system, system-ui, Roboto, 'Helvetica Neue', Ubuntu, sans-serif",fontSize:12,fontWeight:400,getMouseDelta:(startXY,mouseXY)=>startXY[1]-mouseXY[1],gridLinesStrokeStyle:"#E2E4EC",gridLinesStrokeWidth:1,innerTickSize:4,outerTickSize:0,orient:"right",showDomain:!0,showGridLines:!1,showTicks:!0,showTickLabel:!0,strokeStyle:"#000000",strokeWidth:1,tickPadding:4,tickLabelFill:"#000000",tickStrokeStyle:"#000000",yZoomWidth:40,zoomEnabled:!0,zoomCursorClassName:"react-financial-charts-ns-resize-cursor"},YAxis.contextType=_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__.u},"../core/lib/Chart.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>Chart,u:()=>ChartContext});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),_ChartCanvas__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/ChartCanvas.js");const ChartContext=react__WEBPACK_IMPORTED_MODULE_1__.createContext({..._ChartCanvas__WEBPACK_IMPORTED_MODULE_2__.w$,chartConfig:{},chartId:0}),Chart=react__WEBPACK_IMPORTED_MODULE_1__.memo(props=>{const{id=0,onContextMenu,onDoubleClick}=props,chartCanvasContextValue=react__WEBPACK_IMPORTED_MODULE_1__.useContext(_ChartCanvas__WEBPACK_IMPORTED_MODULE_2__.c0),{subscribe,unsubscribe,chartConfigs}=chartCanvasContextValue,listener=react__WEBPACK_IMPORTED_MODULE_1__.useCallback((type,moreProps,_,e)=>{switch(type){case"contextmenu":{if(void 0===onContextMenu)return;const{currentCharts}=moreProps;currentCharts.indexOf(id)>-1&&onContextMenu(e,moreProps);break}case"dblclick":{if(void 0===onDoubleClick)return;const{currentCharts}=moreProps;currentCharts.indexOf(id)>-1&&onDoubleClick(e,moreProps);break}}},[onContextMenu,onDoubleClick,id]);react__WEBPACK_IMPORTED_MODULE_1__.useEffect(()=>(subscribe(`chart_${id}`,{listener}),()=>unsubscribe(`chart_${id}`)),[subscribe,unsubscribe,id,listener]);const config=chartConfigs.find(({id})=>id===props.id),contextValue=react__WEBPACK_IMPORTED_MODULE_1__.useMemo(()=>({...chartCanvasContextValue,chartId:id,chartConfig:config}),[id,config,chartCanvasContextValue]),{origin:[x,y]}=config;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ChartContext.Provider,{value:contextValue,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("g",{transform:`translate(${x}, ${y})`,id:`chart_${id}`,children:props.children})})});Chart.displayName="Chart"},"../core/lib/ChartCanvas.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{v:()=>ChartCanvas,c0:()=>ChartCanvasContext,w$:()=>chartCanvasContextDefaultValue});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),src_extent=__webpack_require__("../../node_modules/d3-array/src/extent.js"),min=__webpack_require__("../../node_modules/d3-array/src/min.js"),max=__webpack_require__("../../node_modules/d3-array/src/max.js"),react=__webpack_require__("../../node_modules/react/index.js"),react_dom=__webpack_require__("../../node_modules/react-dom/index.js"),shallowEqual=__webpack_require__("../core/lib/utils/shallowEqual.js"),identity=__webpack_require__("../core/lib/utils/identity.js"),utils=__webpack_require__("../core/lib/utils/index.js"),zoomBehavior=__webpack_require__("../core/lib/zoom/zoomBehavior.js"),ChartDataUtil=__webpack_require__("../core/lib/utils/ChartDataUtil.js"),src_select=__webpack_require__("../../node_modules/d3-selection/src/select.js"),pointer=__webpack_require__("../../node_modules/d3-selection/src/pointer.js"),pointers=__webpack_require__("../../node_modules/d3-selection/src/pointers.js");class EventCapture extends react.Component{constructor(props){super(props),this.dx=0,this.dy=0,this.mouseInside=!1,this.mouseInteraction=!0,this.ref=react.createRef(),this.handleEnter=e=>{const{onMouseEnter}=this.props;if(void 0!==onMouseEnter){if(this.mouseInside=!0,!this.state.panInProgress&&!this.state.dragInProgress){const win=(0,utils.mK)(this.ref.current);(0,src_select.A)(win).on(utils.Xd,this.handleMouseMove)}onMouseEnter(e)}},this.handleLeave=e=>{const{onMouseLeave}=this.props;if(void 0!==onMouseLeave){if(this.mouseInside=!1,!this.state.panInProgress&&!this.state.dragInProgress){const win=(0,utils.mK)(this.ref.current);(0,src_select.A)(win).on(utils.Xd,null)}onMouseLeave(e)}},this.handleWheel=e=>{const{pan,onPan,zoom,onZoom}=this.props;if(!pan&&!zoom)return;const{panInProgress}=this.state,yZoom=Math.abs(e.deltaY)>Math.abs(e.deltaX)&&Math.abs(e.deltaY)>0,mouseXY=(0,utils.jQ)(e);if(e.preventDefault(),zoom&&this.focus&&yZoom&&!panInProgress){const zoomDir=e.deltaY>0?1:-1;void 0!==onZoom&&(0,react_dom.flushSync)(()=>{onZoom(zoomDir,mouseXY,e)})}else if(this.focus){if(this.shouldPan()&&void 0!==this.state.panStart){const{panStartXScale,chartsToPan}=this.state.panStart;this.lastNewPos=mouseXY,this.panHappened=!0,void 0===this.dx&&(this.dx=0),void 0===this.dy&&(this.dy=0),this.dx-=e.deltaX,this.dy+=e.deltaY;const dxdy={dx:this.dx,dy:this.dy};void 0!==onPan&&onPan(mouseXY,panStartXScale,dxdy,chartsToPan,e)}else{const{xScale,chartConfig}=this.props,currentCharts=(0,ChartDataUtil.Ry)(chartConfig,mouseXY);this.dx=0,this.dy=0,react.startTransition(()=>{this.setState({panInProgress:!0,panStart:{panStartXScale:xScale,panOrigin:mouseXY,chartsToPan:currentCharts}})})}this.queuePanEnd(e)}},this.handleMouseMove=e=>{const{onMouseMove,mouseMove}=this.props;if(void 0!==onMouseMove&&this.mouseInteraction&&mouseMove&&!this.state.panInProgress){onMouseMove((0,pointer.A)(e,this.ref.current),"mouse",e)}},this.handleClick=e=>{const mouseXY=(0,utils.jQ)(e),{onClick,onDoubleClick}=this.props;this.panHappened||this.dragHappened||(this.clicked&&void 0!==onDoubleClick?(onDoubleClick(mouseXY,e),this.clicked=!1):void 0!==onClick&&(onClick(mouseXY,e),this.clicked=!0,setTimeout(()=>{this.clicked&&(this.clicked=!1)},400)))},this.handleRightClick=e=>{e.stopPropagation(),e.preventDefault();const{onContextMenu,onPanEnd}=this.props,mouseXY=(0,utils.jQ)(e,this.ref.current.getBoundingClientRect());if(void 0!==this.state.panStart){const{panStartXScale,panOrigin:[dx,dy],chartsToPan}=this.state.panStart;this.panHappened&&void 0!==onPanEnd&&onPanEnd(mouseXY,panStartXScale,{dx,dy},chartsToPan,e);const win=(0,utils.mK)(this.ref.current);(0,src_select.A)(win).on(utils.Xd,null).on(utils.du,null),this.setState({panInProgress:!1,panStart:void 0})}void 0!==onContextMenu&&onContextMenu(mouseXY,e)},this.handleDrag=e=>{const{onDrag}=this.props;if(void 0===onDrag)return;this.dragHappened=!0;const{dragStartPosition}=this.state;if(void 0===dragStartPosition)return;onDrag({startPos:dragStartPosition,mouseXY:(0,pointer.A)(e,this.ref.current)},e)},this.handleDragEnd=e=>{const mouseXY=(0,pointer.A)(e,this.ref.current),win=(0,utils.mK)(this.ref.current);if((0,src_select.A)(win).on(utils.Xd,this.mouseInside?this.handleMouseMove:null).on(utils.du,null),this.dragHappened){const{onDragComplete}=this.props;void 0!==onDragComplete&&onDragComplete({mouseXY},e)}this.setState({dragInProgress:!1}),this.mouseInteraction=!0},this.canPan=()=>{const{getAllPanConditions}=this.props,{pan:initialPanEnabled}=this.props,{panEnabled,draggable:somethingSelected}=getAllPanConditions().reduce((returnObj,a)=>({draggable:returnObj.draggable||a.draggable,panEnabled:returnObj.panEnabled&&a.panEnabled}),{draggable:!1,panEnabled:initialPanEnabled});return{panEnabled,somethingSelected}},this.handleMouseDown=e=>{if(0!==e.button)return;const{xScale,chartConfig,onMouseDown}=this.props;if(this.panHappened=!1,this.dragHappened=!1,this.focus=!0,!this.state.panInProgress&&this.mouseInteraction){const mouseXY=(0,utils.jQ)(e),currentCharts=(0,ChartDataUtil.Ry)(chartConfig,mouseXY),{panEnabled,somethingSelected}=this.canPan(),pan=panEnabled&&!somethingSelected;if(pan){react.startTransition(()=>{this.setState({panInProgress:pan,panStart:{panStartXScale:xScale,panOrigin:mouseXY,chartsToPan:currentCharts}})});const win=(0,utils.mK)(this.ref.current);(0,src_select.A)(win).on(utils.Xd,this.handlePan).on(utils.du,this.handlePanEnd)}else if(somethingSelected){react.startTransition(()=>{this.setState({panInProgress:!1,dragInProgress:!0,panStart:void 0,dragStartPosition:mouseXY})});const{onDragStart}=this.props;void 0!==onDragStart&&onDragStart({startPos:mouseXY},e);const win=(0,utils.mK)(this.ref.current);(0,src_select.A)(win).on(utils.Xd,this.handleDrag).on(utils.du,this.handleDragEnd)}void 0!==onMouseDown&&onMouseDown(mouseXY,currentCharts,e)}e.preventDefault()},this.shouldPan=()=>{const{pan:panEnabled,onPan}=this.props;return panEnabled&&onPan&&void 0!==this.state.panStart},this.handlePan=e=>{if(this.shouldPan()&&void 0!==this.state.panStart){this.panHappened=!0;const{panStartXScale,panOrigin,chartsToPan}=this.state.panStart;let dx,dy,mouseXY;this.mouseInteraction?(mouseXY=(0,pointer.A)(e,this.ref.current),this.lastNewPos=mouseXY,dx=mouseXY[0]-panOrigin[0],dy=mouseXY[1]-panOrigin[1]):(mouseXY=(0,pointers.A)(e,this.ref.current)[0],this.lastNewPos=mouseXY,dx=panOrigin[0]-mouseXY[0],dy=panOrigin[1]-mouseXY[1]),this.dx=dx,this.dy=dy;const{onPan}=this.props;void 0!==onPan&&onPan(mouseXY,panStartXScale,{dx,dy},chartsToPan,e)}},this.handlePanEnd=e=>{const{pan:panEnabled,onPanEnd}=this.props;if(void 0!==this.state.panStart){const{panStartXScale,chartsToPan}=this.state.panStart,win=(0,utils.mK)(this.ref.current);if((0,src_select.A)(win).on(utils.Xd,this.mouseInside?this.handleMouseMove:null).on(utils.du,null).on(utils.vx,null).on(utils.t2,null),this.panHappened&&panEnabled&&onPanEnd){const{dx=0,dy=0}=this;delete this.dx,delete this.dy,void 0!==this.lastNewPos&&onPanEnd(this.lastNewPos,panStartXScale,{dx,dy},chartsToPan,e)}react.startTransition(()=>{this.setState({panInProgress:!1,panStart:void 0})})}},this.handleTouchMove=e=>{const{onMouseMove}=this.props;if(void 0===onMouseMove)return;const touch=(0,utils.Sq)(e.touches[0]);onMouseMove((0,utils.L6)(touch,e),"touch",e)},this.handleTouchStart=e=>{this.mouseInteraction=!1;const{pan:panEnabled,chartConfig,onMouseMove,xScale,onPanEnd}=this.props;if(1===e.touches.length){this.panHappened=!1;const touchXY=(0,utils.L6)((0,utils.Sq)(e.touches[0]),e);if(void 0!==onMouseMove&&onMouseMove(touchXY,"touch",e),panEnabled){const currentCharts=(0,ChartDataUtil.Ry)(chartConfig,touchXY);this.setState({panInProgress:!0,panStart:{panStartXScale:xScale,panOrigin:touchXY,chartsToPan:currentCharts}});const win=(0,utils.mK)(this.ref.current);(0,src_select.A)(win).on(utils.vx,this.handlePan,!1).on(utils.t2,this.handlePanEnd,!1)}}else if(2===e.touches.length){const{panInProgress,panStart}=this.state;if(panInProgress&&panEnabled&&onPanEnd&&void 0!==panStart){const{panStartXScale,panOrigin:[dx,dy],chartsToPan}=panStart,win=(0,utils.mK)(this.ref.current);(0,src_select.A)(win).on(utils.Xd,this.mouseInside?this.handleMouseMove:null).on(utils.du,null).on(utils.vx,this.handlePinchZoom,!1).on(utils.t2,this.handlePinchZoomEnd,!1);const touch1Pos=(0,utils.L6)((0,utils.Sq)(e.touches[0]),e),touch2Pos=(0,utils.L6)((0,utils.Sq)(e.touches[1]),e);this.panHappened&&panEnabled&&onPanEnd&&void 0!==this.lastNewPos&&onPanEnd(this.lastNewPos,panStartXScale,{dx,dy},chartsToPan,e),this.setState({panInProgress:!1,pinchZoomStart:{xScale,touch1Pos,touch2Pos,range:xScale.range(),chartsToPan}})}}},this.handlePinchZoom=e=>{const{pinchZoomStart}=this.state;if(void 0===pinchZoomStart)return;const{xScale,zoom:zoomEnabled,onPinchZoom}=this.props;if(!zoomEnabled||void 0===onPinchZoom)return;const[touch1Pos,touch2Pos]=(0,pointers.A)(this.ref.current),{chartsToPan,...initialPinch}=pinchZoomStart;onPinchZoom(initialPinch,{touch1Pos,touch2Pos,xScale},e)},this.handlePinchZoomEnd=e=>{const win=(0,utils.mK)(this.ref.current);(0,src_select.A)(win).on(utils.vx,null).on(utils.t2,null);const{pinchZoomStart}=this.state;if(void 0===pinchZoomStart)return;const{chartsToPan,...initialPinch}=pinchZoomStart,{zoom:zoomEnabled,onPinchZoomEnd}=this.props;zoomEnabled&&onPinchZoomEnd&&onPinchZoomEnd(initialPinch,e),this.setState({pinchZoomStart:void 0})},this.setCursorClass=cursorOverrideClass=>{cursorOverrideClass!==this.state.cursorOverrideClass&&this.setState({cursorOverrideClass:null===cursorOverrideClass?void 0:cursorOverrideClass})},this.focus=props.focus,this.state={panInProgress:!1}}componentDidMount(){const{disableInteraction}=this.props,{current}=this.ref;null!==current&&(disableInteraction||((0,src_select.A)(current).on(utils._J,this.handleEnter).on(utils.vs,this.handleLeave),current.addEventListener("wheel",this.handleWheel,{passive:!1})))}componentDidUpdate(){this.componentDidMount()}componentWillUnmount(){const{disableInteraction}=this.props,{current}=this.ref;if(null!==current&&!disableInteraction){(0,src_select.A)(current).on(utils._J,null).on(utils.vs,null);const win=(0,utils.mK)(current);(0,src_select.A)(win).on(utils.Xd,null),current.removeEventListener("wheel",this.handleWheel,{passive:!1})}}queuePanEnd(e){void 0!==this.panEndTimeout&&window.clearTimeout(this.panEndTimeout),this.panEndTimeout=window.setTimeout(()=>{this.handlePanEnd(e)},100)}cancelDrag(){const win=(0,utils.mK)(this.ref.current);(0,src_select.A)(win).on(utils.Xd,this.mouseInside?this.handleMouseMove:null).on(utils.du,null),this.setState({dragInProgress:!1}),this.mouseInteraction=!0}render(){const{height,width,disableInteraction,useCrossHairStyleCursor}=this.props,className=disableInteraction?void 0:void 0!==this.state.cursorOverrideClass?this.state.cursorOverrideClass:useCrossHairStyleCursor?this.state.panInProgress?"react-financial-charts-grabbing-cursor":"react-financial-charts-crosshair-cursor":void 0,interactionProps=disableInteraction?void 0:{onMouseDown:this.handleMouseDown,onClick:this.handleClick,onContextMenu:this.handleRightClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove};return(0,jsx_runtime.jsx)("rect",{ref:this.ref,className,width,height,style:{opacity:0},...interactionProps})}}EventCapture.defaultProps={mouseMove:!1,zoom:!1,pan:!1,panSpeedMultiplier:1,focus:!1,disableInteraction:!1};class CanvasContainer extends react.PureComponent{constructor(){super(...arguments),this.bgRef=react.createRef(),this.axesRef=react.createRef(),this.mouseRef=react.createRef()}getCanvasContexts(){return{bg:this.bgRef.current?.getContext("2d")??void 0,axes:this.axesRef.current?.getContext("2d")??void 0,mouseCoord:this.mouseRef.current?.getContext("2d")??void 0}}render(){const{height,ratio,style,width}=this.props,adjustedWidth=width*ratio,adjustedHeight=height*ratio,canvasStyle={position:"absolute",width,height};return(0,jsx_runtime.jsxs)("div",{style:{...style,position:"absolute"},children:[(0,jsx_runtime.jsx)("canvas",{ref:this.bgRef,width:adjustedWidth,height:adjustedHeight,style:canvasStyle}),(0,jsx_runtime.jsx)("canvas",{ref:this.axesRef,width:adjustedWidth,height:adjustedHeight,style:canvasStyle}),(0,jsx_runtime.jsx)("canvas",{ref:this.mouseRef,width:adjustedWidth,height:adjustedHeight,style:canvasStyle})]})}}var closestItem=__webpack_require__("../core/lib/utils/closestItem.js");function getNewEnd(fallbackEnd,xAccessor,initialXScale,start){const{lastItem,lastItemX}=fallbackEnd,lastItemXValue=xAccessor(lastItem),[rangeStart,rangeEnd]=initialXScale.range();return(rangeEnd-rangeStart)/(lastItemX.valueOf()-rangeStart)*(lastItemXValue.valueOf()-start.valueOf())+start.valueOf()}function extentsWrapper(useWholeData,clamp,pointsPerPxThreshold,minPointsPerPxThreshold,flipXScale){return{filterData:function filterData(data,inputDomain,xAccessor,initialXScale,{currentPlotData,currentDomain,fallbackStart,fallbackEnd,ignoreThresholds=!1}={}){if(useWholeData)return{plotData:data,domain:inputDomain};let left=(0,utils.d5)(inputDomain),right=(0,utils.HV)(inputDomain),clampedDomain=inputDomain,filteredData=getFilteredResponse(data,left,right,xAccessor);1===filteredData.length&&void 0!==fallbackStart&&(left=fallbackStart,right=getNewEnd(fallbackEnd,xAccessor,initialXScale,left),clampedDomain=[left,right],filteredData=getFilteredResponse(data,left,right,xAccessor)),"function"==typeof clamp?clampedDomain=clamp(clampedDomain,[xAccessor((0,utils.d5)(data)),xAccessor((0,utils.HV)(data))]):("left"!==clamp&&"both"!==clamp&&!0!==clamp||(clampedDomain=[(0,max.A)([left,xAccessor((0,utils.d5)(data))]),clampedDomain[1]]),"right"!==clamp&&"both"!==clamp&&!0!==clamp||(clampedDomain=[clampedDomain[0],(0,min.A)([right,xAccessor((0,utils.HV)(data))])])),clampedDomain!==inputDomain&&(filteredData=getFilteredResponse(data,clampedDomain[0],clampedDomain[1],xAccessor));const realInputDomain=clampedDomain,xScale=initialXScale.copy().domain(realInputDomain);let plotData,domain,width=Math.floor(xScale(xAccessor((0,utils.HV)(filteredData)))-xScale(xAccessor((0,utils.d5)(filteredData))));flipXScale&&width<0&&(width*=-1);const chartWidth=(0,utils.HV)(xScale.range())-(0,utils.d5)(xScale.range());if(ignoreThresholds&&filteredData.length>1||function canShowTheseManyPeriods(width,arrayLength,maxThreshold,minThreshold){const widthAdjustedMinThreshold=function showMinThreshold(width,threshold){return Math.max(1,Math.ceil(width*threshold))}(width,minThreshold),widthAdjustedMaxTheshold=showMaxThreshold(width,maxThreshold);return arrayLength>=widthAdjustedMinThreshold&&arrayLength<widthAdjustedMaxTheshold}(width,filteredData.length,pointsPerPxThreshold,minPointsPerPxThreshold))plotData=filteredData,domain=realInputDomain;else if(chartWidth>showMaxThreshold(width,pointsPerPxThreshold)&&(0,utils.O9)(fallbackEnd)){plotData=filteredData;const newEnd=getNewEnd(fallbackEnd,xAccessor,initialXScale,(0,utils.d5)(realInputDomain));domain=[(0,utils.d5)(realInputDomain),newEnd]}else plotData=currentPlotData??filteredData.slice(filteredData.length-function showMax(width,threshold){return Math.floor(.97*showMaxThreshold(width,threshold))}(width,pointsPerPxThreshold)),domain=currentDomain??[xAccessor((0,utils.d5)(plotData)),xAccessor((0,utils.HV)(plotData))];return{plotData,domain}}}}function showMaxThreshold(width,threshold){return Math.floor(width*threshold)}function getFilteredResponse(data,left,right,xAccessor){const newLeftIndex=(0,closestItem.f)(data,left,xAccessor).left,newRightIndex=(0,closestItem.f)(data,right,xAccessor).right;return data.slice(newLeftIndex,newRightIndex+1)}const CANDIDATES_FOR_RESET=["seriesName"],noop=()=>{},chartCanvasContextDefaultValue={amIOnTop:()=>!1,chartConfigs:[],chartId:0,ratio:0,displayXAccessor:()=>0,fullData:[],getMutableState:()=>({}),height:0,margin:{top:0,right:0,bottom:0,left:0},plotData:[],setCursorClass:noop,subscribe:noop,unsubscribe:noop,redraw:noop,width:0,xAccessor:()=>0,xScale:noop},ChartCanvasContext=react.createContext(chartCanvasContextDefaultValue),getDimensions=props=>{const{margin,height,width}=props;return{height:height-margin.top-margin.bottom,width:width-margin.left-margin.right}},getXScaleDirection=flipXScale=>flipXScale?-1:1,calculateFullData=props=>{const{data:fullData,plotFull,xScale,clamp,pointsPerPxThreshold,flipXScale,xAccessor,displayXAccessor,minPointsPerPxThreshold}=props,useWholeData=void 0!==plotFull?plotFull:xAccessor===identity.D,{filterData}=function evaluator({xScale,useWholeData,clamp,pointsPerPxThreshold,minPointsPerPxThreshold,flipXScale}){return extentsWrapper(useWholeData||(0,utils.pN)(xScale.invert),clamp,pointsPerPxThreshold,minPointsPerPxThreshold,flipXScale)}({xScale,useWholeData,clamp,pointsPerPxThreshold,minPointsPerPxThreshold,flipXScale});return{xAccessor,displayXAccessor:displayXAccessor??xAccessor,xScale:xScale.copy(),fullData,filterData}},resetChart=props=>{const state=calculateState(props),{xAccessor,displayXAccessor,fullData,plotData:initialPlotData,xScale}=state,{postCalculator,children}=props,plotData=void 0!==postCalculator?postCalculator(initialPlotData):initialPlotData,dimensions=getDimensions(props),chartConfigs=(0,ChartDataUtil.mZ)((0,ChartDataUtil.bS)(dimensions,children),{plotData,xAccessor,displayXAccessor,fullData},xScale.domain());return{...state,xScale,plotData,chartConfigs}},calculateState=props=>{const{xAccessor:inputXAccessor,xExtents:xExtentsProp,data,padding,flipXScale}=props,direction=getXScaleDirection(flipXScale),dimensions=getDimensions(props),extent="function"==typeof xExtentsProp?xExtentsProp(data):(0,src_extent.A)(xExtentsProp.map(d=>(0,utils.ER)(d)).map(each=>each(data,inputXAccessor))),{xAccessor,displayXAccessor,xScale,fullData,filterData}=calculateFullData(props),updatedXScale=setXRange(xScale,dimensions,padding,direction),{plotData,domain}=filterData(fullData,extent,inputXAccessor,updatedXScale);return{plotData,xScale:updatedXScale.domain(domain),xAccessor,displayXAccessor,fullData,filterData}},setXRange=(xScale,dimensions,padding,direction=1)=>{if(xScale.rangeRoundPoints){if(isNaN(padding))throw new Error("padding has to be a number for ordinal scale");xScale.rangeRoundPoints([0,dimensions.width],padding)}else if(xScale.padding){if(isNaN(padding))throw new Error("padding has to be a number for ordinal scale");xScale.range([0,dimensions.width]),xScale.padding(padding/2)}else{const{left,right}=isNaN(padding)?padding:{left:padding,right:padding};direction>0?xScale.range([left,dimensions.width-right]):xScale.range([dimensions.width-right,left])}return xScale},pinchCoordinates=pinch=>{const{touch1Pos,touch2Pos}=pinch;return{topLeft:[Math.min(touch1Pos[0],touch2Pos[0]),Math.min(touch1Pos[1],touch2Pos[1])],bottomRight:[Math.max(touch1Pos[0],touch2Pos[0]),Math.max(touch1Pos[1],touch2Pos[1])]}},isInteractionEnabled=(xScale,xAccessor,data)=>!isNaN(xScale(xAccessor((0,utils.d5)(data))))&&(0,utils.O9)(xScale.invert);class ChartCanvas extends react.Component{constructor(props){super(props),this.canvasContainerRef=react.createRef(),this.eventCaptureRef=react.createRef(),this.lastSubscriptionId=0,this.mutableState={mouseXY:[0,0],currentCharts:[],currentItem:null},this.panInProgress=!1,this.subscriptions=[],this.isStrictMode=!1,this.strictModeRenderCount=0,this.canvasUpdateQueue=[],this.isProcessingQueue=!1,this.getMutableState=()=>this.mutableState,this.getCanvasContexts=()=>this.canvasContainerRef.current?.getCanvasContexts(),this.generateSubscriptionId=()=>(this.lastSubscriptionId++,this.lastSubscriptionId),this.subscribe=(id,rest)=>{const{getPanConditions=(0,utils.ER)({draggable:!1,panEnabled:!0})}=rest;this.subscriptions=this.subscriptions.concat({id,...rest,getPanConditions})},this.unsubscribe=id=>{this.subscriptions=this.subscriptions.filter(each=>each.id!==id)},this.getAllPanConditions=()=>this.subscriptions.map(each=>each.getPanConditions()),this.setCursorClass=className=>{this.eventCaptureRef.current?.setCursorClass(className)},this.amIOnTop=id=>{const dragableComponents=this.subscriptions.filter(each=>each.getPanConditions().draggable);return dragableComponents.length>0&&(0,utils.HV)(dragableComponents).id===id},this.handleContextMenu=(mouseXY,e)=>{const{xAccessor,chartConfigs,plotData,xScale}=this.state,currentCharts=(0,ChartDataUtil.Ry)(chartConfigs,mouseXY),currentItem=(0,ChartDataUtil.Bp)(xScale,xAccessor,mouseXY,plotData);this.triggerEvent("contextmenu",{mouseXY,currentItem,currentCharts},e)},this.calculateStateForDomain=newDomain=>{const{xAccessor,displayXAccessor,xScale:initialXScale,chartConfigs:initialChartConfig,plotData:initialPlotData}=this.state,{filterData,fullData}=this.state,{postCalculator=ChartCanvas.defaultProps.postCalculator}=this.props,{plotData:beforePlotData,domain}=filterData(fullData,newDomain,xAccessor,initialXScale,{currentPlotData:initialPlotData,currentDomain:initialXScale.domain()}),plotData=postCalculator(beforePlotData),updatedScale=initialXScale.copy().domain(domain),chartConfigs=(0,ChartDataUtil.mZ)(initialChartConfig,{plotData,xAccessor,displayXAccessor,fullData},updatedScale.domain());return{xScale:updatedScale,plotData,chartConfigs}},this.pinchZoomHelper=(initialPinch,finalPinch)=>{const{xScale:initialPinchXScale}=initialPinch,{xScale:initialXScale,chartConfigs:initialChartConfig,plotData:initialPlotData,xAccessor,displayXAccessor,filterData,fullData}=this.state,{postCalculator=ChartCanvas.defaultProps.postCalculator}=this.props,{topLeft:iTL,bottomRight:iBR}=pinchCoordinates(initialPinch),{topLeft:fTL,bottomRight:fBR}=pinchCoordinates(finalPinch),e=initialPinchXScale.range()[1],xDash=Math.round(-(iBR[0]*fTL[0]-iTL[0]*fBR[0])/(iTL[0]-iBR[0])),yDash=Math.round(e+((e-iBR[0])*(e-fTL[0])-(e-iTL[0])*(e-fBR[0]))/(e-iTL[0]-(e-iBR[0]))),newDomain=[Math.round(-xDash*iTL[0]/(-xDash+fTL[0])),Math.round(e-(yDash-e)*(e-iTL[0])/(yDash+(e-fTL[0])))].map(initialPinchXScale.invert),{plotData:beforePlotData,domain}=filterData(fullData,newDomain,xAccessor,initialPinchXScale,{currentPlotData:initialPlotData,currentDomain:initialXScale.domain()}),plotData=postCalculator(beforePlotData),updatedScale=initialXScale.copy().domain(domain),mouseXY=finalPinch.touch1Pos;return{chartConfigs:(0,ChartDataUtil.mZ)(initialChartConfig,{plotData,xAccessor,displayXAccessor,fullData},updatedScale.domain()),xScale:updatedScale,plotData,mouseXY,currentItem:(0,ChartDataUtil.Bp)(updatedScale,xAccessor,mouseXY,plotData),xAccessor,fullData}},this.handlePinchZoom=(initialPinch,finalPinch,e)=>{if(!this.waitingForPinchZoomAnimationFrame){this.waitingForPinchZoomAnimationFrame=!0;const state=this.pinchZoomHelper(initialPinch,finalPinch);this.triggerEvent("pinchzoom",state,e),this.finalPinch=finalPinch,this.safeCanvasUpdate(()=>{this.clearBothCanvas(),this.draw({trigger:"pinchzoom"}),this.waitingForPinchZoomAnimationFrame=!1})}},this.handlePinchZoomEnd=(initialPinch,e)=>{const{xAccessor=ChartCanvas.defaultProps.xAccessor}=this.state;if(this.finalPinch){const state=this.pinchZoomHelper(initialPinch,this.finalPinch),{xScale,fullData}=state;this.triggerEvent("pinchzoom",state,e),this.finalPinch=void 0,this.clearThreeCanvas();const firstItem=(0,utils.d5)(fullData),scale_start=(0,utils.d5)(xScale.domain()),data_start=xAccessor(firstItem),lastItem=(0,utils.HV)(fullData),scale_end=(0,utils.HV)(xScale.domain()),data_end=xAccessor(lastItem),{onLoadAfter,onLoadBefore}=this.props;this.setState(state,()=>{scale_start<data_start&&void 0!==onLoadBefore&&onLoadBefore(scale_start,data_start),data_end<scale_end&&void 0!==onLoadAfter&&onLoadAfter(data_end,scale_end)})}},this.handleZoom=(zoomDirection,mouseXY,e)=>{if(this.panInProgress)return;const{xAccessor,xScale:initialXScale,plotData:initialPlotData,fullData}=this.state,{zoomMultiplier=ChartCanvas.defaultProps.zoomMultiplier,zoomAnchor=ChartCanvas.defaultProps.zoomAnchor}=this.props,item=zoomAnchor({xScale:initialXScale,xAccessor,mouseXY,plotData:initialPlotData}),cx=initialXScale(item),c=zoomDirection>0?1*zoomMultiplier:1/zoomMultiplier,newDomain=initialXScale.range().map(x=>cx+(x-cx)*c).map(x=>initialXScale.invert(x)),{xScale,plotData,chartConfigs}=this.calculateStateForDomain(newDomain),currentItem=(0,ChartDataUtil.Bp)(xScale,xAccessor,mouseXY,plotData),currentCharts=(0,ChartDataUtil.Ry)(chartConfigs,mouseXY);this.clearThreeCanvas();const firstItem=(0,utils.d5)(fullData),scale_start=(0,utils.d5)(xScale.domain()),data_start=xAccessor(firstItem),lastItem=(0,utils.HV)(fullData),scale_end=(0,utils.HV)(xScale.domain()),data_end=xAccessor(lastItem);this.mutableState={mouseXY,currentItem,currentCharts},this.triggerEvent("zoom",{xScale,plotData,chartConfigs,mouseXY,currentCharts,currentItem,show:!0},e);const{onLoadAfter,onLoadBefore}=this.props;this.safeCanvasUpdate(()=>{this.setState({xScale,plotData,chartConfigs},()=>{scale_start<data_start&&void 0!==onLoadBefore&&onLoadBefore(scale_start,data_start),data_end<scale_end&&void 0!==onLoadAfter&&onLoadAfter(data_end,scale_end)})})},this.xAxisZoom=newDomain=>{const{xScale,plotData,chartConfigs}=this.calculateStateForDomain(newDomain);this.clearThreeCanvas();const{xAccessor,fullData}=this.state,firstItem=(0,utils.d5)(fullData),scale_start=(0,utils.d5)(xScale.domain()),data_start=xAccessor(firstItem),lastItem=(0,utils.HV)(fullData),scale_end=(0,utils.HV)(xScale.domain()),data_end=xAccessor(lastItem),{onLoadAfter,onLoadBefore}=this.props;this.safeCanvasUpdate(()=>{this.setState({xScale,plotData,chartConfigs},()=>{scale_start<data_start&&void 0!==onLoadBefore&&onLoadBefore(scale_start,data_start),data_end<scale_end&&void 0!==onLoadAfter&&onLoadAfter(data_end,scale_end)})})},this.yAxisZoom=(chartId,newDomain)=>{this.clearThreeCanvas();const{chartConfigs:initialChartConfig}=this.state,chartConfigs=initialChartConfig.map(each=>{if(each.id==chartId){const{yScale}=each;return{...each,yScale:yScale.copy().domain(newDomain),yPanEnabled:!0}}return each});this.safeCanvasUpdate(()=>{this.setState({chartConfigs})})},this.safeCanvasUpdate=operation=>{if(this.isStrictMode)try{(0,react_dom.flushSync)(()=>{operation()})}catch(error){console.warn("[React Financial Charts] flushSync failed, falling back to direct execution:",error),operation()}else this.canvasUpdateQueue.push(operation),this.processCanvasQueue()},this.processCanvasQueue=()=>{if(this.isProcessingQueue||0===this.canvasUpdateQueue.length)return;this.isProcessingQueue=!0;const processNext=()=>{const operation=this.canvasUpdateQueue.shift();operation&&operation(),this.canvasUpdateQueue.length>0?"scheduler"in window&&"postTask"in window.scheduler?window.scheduler.postTask(processNext,{priority:"user-blocking"}):requestAnimationFrame(processNext):this.isProcessingQueue=!1};processNext()},this.draw=props=>{this.subscriptions.forEach(each=>{(0,utils.O9)(each.draw)&&each.draw(props)})},this.redraw=()=>{this.clearThreeCanvas(),this.draw({force:!0})},this.panHelper=(mouseXY,initialXScale,{dx,dy},chartsToPan)=>{const{xAccessor,displayXAccessor,chartConfigs:initialChartConfig,filterData,fullData}=this.state,{postCalculator=ChartCanvas.defaultProps.postCalculator}=this.props,newDomain=initialXScale.range().map(x=>x-dx).map(x=>initialXScale.invert(x)),{plotData:beforePlotData,domain}=filterData(fullData,newDomain,xAccessor,initialXScale,{currentPlotData:this.hackyWayToStopPanBeyondBounds__plotData,currentDomain:this.hackyWayToStopPanBeyondBounds__domain,ignoreThresholds:!0}),updatedScale=initialXScale.copy().domain(domain),plotData=postCalculator(beforePlotData),currentItem=(0,ChartDataUtil.Bp)(updatedScale,xAccessor,mouseXY,plotData),chartConfigs=(0,ChartDataUtil.mZ)(initialChartConfig,{plotData,xAccessor,displayXAccessor,fullData},updatedScale.domain(),dy,chartsToPan);return{xScale:updatedScale,plotData,chartConfigs,mouseXY,currentCharts:(0,ChartDataUtil.Ry)(chartConfigs,mouseXY),currentItem}},this.handlePan=(mousePosition,panStartXScale,dxdy,chartsToPan,e)=>{if(this.waitingForPanAnimationFrame)return;this.waitingForPanAnimationFrame=!0,this.hackyWayToStopPanBeyondBounds__plotData=this.hackyWayToStopPanBeyondBounds__plotData??this.state.plotData,this.hackyWayToStopPanBeyondBounds__domain=this.hackyWayToStopPanBeyondBounds__domain??this.state.xScale.domain();const newState=this.panHelper(mousePosition,panStartXScale,dxdy,chartsToPan);this.hackyWayToStopPanBeyondBounds__plotData=newState.plotData,this.hackyWayToStopPanBeyondBounds__domain=newState.xScale.domain(),this.panInProgress=!0,this.triggerEvent("pan",newState,e),this.mutableState={mouseXY:newState.mouseXY,currentItem:newState.currentItem,currentCharts:newState.currentCharts},this.safeCanvasUpdate(()=>{this.waitingForPanAnimationFrame=!1,this.clearBothCanvas(),this.draw({trigger:"pan"})})},this.handlePanEnd=(mousePosition,panStartXScale,dxdy,chartsToPan,e)=>{const state=this.panHelper(mousePosition,panStartXScale,dxdy,chartsToPan);this.hackyWayToStopPanBeyondBounds__plotData=null,this.hackyWayToStopPanBeyondBounds__domain=null,this.panInProgress=!1;const{xScale,plotData,chartConfigs}=state;this.triggerEvent("panend",state,e),this.safeCanvasUpdate(()=>{const{xAccessor,fullData}=this.state,firstItem=(0,utils.d5)(fullData),scale_start=(0,utils.d5)(xScale.domain()),data_start=xAccessor(firstItem),lastItem=(0,utils.HV)(fullData),scale_end=(0,utils.HV)(xScale.domain()),data_end=xAccessor(lastItem),{onLoadAfter,onLoadBefore}=this.props;this.clearThreeCanvas(),this.setState({xScale,plotData,chartConfigs},()=>{scale_start<data_start&&void 0!==onLoadBefore&&onLoadBefore(scale_start,data_start),data_end<scale_end&&void 0!==onLoadAfter&&onLoadAfter(data_end,scale_end)})})},this.handleMouseDown=(_,__,e)=>{this.triggerEvent("mousedown",this.mutableState,e)},this.handleMouseEnter=e=>{this.triggerEvent("mouseenter",{show:!0},e)},this.handleMouseMove=(mouseXY,_,e)=>{if(this.waitingForMouseMoveAnimationFrame)return;this.waitingForMouseMoveAnimationFrame=!0;const{chartConfigs,plotData,xScale,xAccessor}=this.state,currentCharts=(0,ChartDataUtil.Ry)(chartConfigs,mouseXY),currentItem=(0,ChartDataUtil.Bp)(xScale,xAccessor,mouseXY,plotData);this.triggerEvent("mousemove",{show:!0,mouseXY,prevMouseXY:this.prevMouseXY,currentItem,currentCharts},e),this.prevMouseXY=mouseXY,this.mutableState={mouseXY,currentItem,currentCharts},this.safeCanvasUpdate(()=>{this.clearMouseCanvas(),this.draw({trigger:"mousemove"}),this.waitingForMouseMoveAnimationFrame=!1})},this.handleMouseLeave=e=>{this.triggerEvent("mouseleave",{show:!1},e),this.clearMouseCanvas(),this.draw({trigger:"mouseleave"})},this.handleDragStart=({startPos},e)=>{this.triggerEvent("dragstart",{startPos},e)},this.handleDrag=({startPos,mouseXY},e)=>{const{chartConfigs,plotData,xScale,xAccessor}=this.state,currentCharts=(0,ChartDataUtil.Ry)(chartConfigs,mouseXY),currentItem=(0,ChartDataUtil.Bp)(xScale,xAccessor,mouseXY,plotData);this.triggerEvent("drag",{startPos,mouseXY,currentItem,currentCharts},e),this.mutableState={mouseXY,currentItem,currentCharts},this.safeCanvasUpdate(()=>{this.clearMouseCanvas(),this.draw({trigger:"drag"})})},this.handleDragEnd=({mouseXY},e)=>{this.triggerEvent("dragend",{mouseXY},e),this.safeCanvasUpdate(()=>{this.clearMouseCanvas(),this.draw({trigger:"dragend"})})},this.handleClick=(_,e)=>{this.triggerEvent("click",this.mutableState,e),this.safeCanvasUpdate(()=>{this.clearMouseCanvas(),this.draw({trigger:"click"})})},this.handleDoubleClick=(_,e)=>{this.triggerEvent("dblclick",{},e)},this.resetYDomain=chartId=>{const{chartConfigs}=this.state;let changed=!1;const newChartConfig=chartConfigs.map(each=>!(0,utils.pN)(chartId)&&each.id!==chartId||(0,shallowEqual.b)(each.yScale.domain(),each.realYDomain)?each:(changed=!0,{...each,yScale:each.yScale.domain(each.realYDomain),yPanEnabled:!1}));changed&&(this.clearThreeCanvas(),this.setState({chartConfigs:newChartConfig}))},this.resetChart=()=>{const newState=resetChart(this.props);this.clearThreeCanvas(),this.setState(newState)},this.state=resetChart(props),this.strictModeRenderCount++,setTimeout(()=>{this.strictModeRenderCount>1&&(this.isStrictMode=!0,console.info("[React Financial Charts] React Strict Mode detected - using optimized canvas rendering"))},0)}static getDerivedStateFromProps(props,state){const{chartConfigs:initialChartConfig,plotData,xAccessor,xScale}=state,interaction=isInteractionEnabled(xScale,xAccessor,plotData),shouldReset=(thisProps=state.lastProps||{},nextProps=props,!CANDIDATES_FOR_RESET.every(key=>(0,shallowEqual.b)(thisProps[key],nextProps[key])));var thisProps,nextProps;let newState;if(interaction&&!shouldReset&&(0,shallowEqual.b)(state.lastProps?.xExtents,props.xExtents)){const[start,end]=xScale.domain(),prevLastItem=(0,utils.HV)(state.fullData),calculatedState=calculateFullData(props),{xAccessor}=calculatedState,previousX=xAccessor(prevLastItem);newState=((newState,initialXScale,props,lastItemWasVisible,initialChartConfig)=>{const{fullData,xScale,xAccessor,displayXAccessor,filterData}=newState,lastItem=(0,utils.HV)(fullData),lastXItem=xAccessor(lastItem),[start,end]=initialXScale.domain(),{postCalculator,children,padding,flipXScale,maintainPointsPerPixelOnResize}=props,direction=getXScaleDirection(flipXScale),dimensions=getDimensions(props),updatedXScale=setXRange(xScale,dimensions,padding,direction);let initialPlotData;if(!lastItemWasVisible||end>=lastXItem){const[rangeStart,rangeEnd]=initialXScale.range(),[newRangeStart,newRangeEnd]=updatedXScale.range(),newDomainExtent=(newRangeEnd-newRangeStart)/(rangeEnd-rangeStart)*(end.valueOf()-start.valueOf()),response=filterData(fullData,[maintainPointsPerPixelOnResize?end.valueOf()-newDomainExtent:start,end],xAccessor,updatedXScale,{fallbackStart:start,fallbackEnd:{lastItem,lastItemX:initialXScale(lastXItem)}});initialPlotData=response.plotData,updatedXScale.domain(response.domain)}else if(lastItemWasVisible&&end<lastXItem){const dx=initialXScale(lastXItem)-initialXScale.range()[1],[newStart,newEnd]=initialXScale.range().map(x=>x+dx).map(x=>initialXScale.invert(x)),response=filterData(fullData,[newStart,newEnd],xAccessor,updatedXScale);initialPlotData=response.plotData,updatedXScale.domain(response.domain)}const plotData=postCalculator(initialPlotData),chartConfigs=(0,ChartDataUtil.mZ)((0,ChartDataUtil.bS)(dimensions,children,initialChartConfig),{plotData,xAccessor,displayXAccessor,fullData},updatedXScale.domain());return{xScale:updatedXScale,xAccessor,chartConfigs,plotData,fullData,filterData}})(calculatedState,xScale,props,previousX<=end&&previousX>=start,initialChartConfig)}else newState=resetChart(props);return{...newState,lastProps:props,propIteration:(state.propIteration||0)+1}}getSnapshotBeforeUpdate(prevProps,prevState){return prevState.propIteration===this.state.propIteration||this.panInProgress||this.clearThreeCanvas(),null}componentDidUpdate(prevProps){prevProps.data!==this.props.data&&this.triggerEvent("dataupdated",{chartConfigs:this.state.chartConfigs,xScale:this.state.xScale,plotData:this.state.plotData})}clearBothCanvas(){const canvases=this.getCanvasContexts();canvases&&canvases.axes&&canvases.mouseCoord&&(0,utils.iV)([canvases.axes,canvases.mouseCoord],this.props.ratio)}clearMouseCanvas(){const canvases=this.getCanvasContexts();canvases&&canvases.mouseCoord&&(0,utils.iV)([canvases.mouseCoord],this.props.ratio)}clearThreeCanvas(){const canvases=this.getCanvasContexts();canvases&&canvases.axes&&canvases.mouseCoord&&canvases.bg&&(0,utils.iV)([canvases.axes,canvases.mouseCoord,canvases.bg],this.props.ratio)}cancelDrag(){this.eventCaptureRef.current?.cancelDrag(),this.triggerEvent("dragcancel")}triggerEvent(type,props,e){this.subscriptions.forEach(each=>{const state={...this.state,subscriptions:this.subscriptions};each.listener(type,props,state,e)})}getContextValues(){const dimensions=getDimensions(this.props);return{chartId:-1,fullData:this.state.fullData,plotData:this.state.plotData,width:dimensions.width,height:dimensions.height,chartConfigs:this.state.chartConfigs,xScale:this.state.xScale,xAccessor:this.state.xAccessor,displayXAccessor:this.state.displayXAccessor,margin:this.props.margin,ratio:this.props.ratio,xAxisZoom:this.xAxisZoom,yAxisZoom:this.yAxisZoom,resetYDomain:this.resetYDomain,resetChart:this.resetChart,getCanvasContexts:this.getCanvasContexts,redraw:this.redraw,subscribe:this.subscribe,unsubscribe:this.unsubscribe,generateSubscriptionId:this.generateSubscriptionId,getMutableState:this.getMutableState,amIOnTop:this.amIOnTop,setCursorClass:this.setCursorClass}}shouldComponentUpdate(){return!this.panInProgress}render(){const{disableInteraction,disablePan,disableZoom,useCrossHairStyleCursor,onClick,onDoubleClick,height,width,margin=ChartCanvas.defaultProps.margin,className,zIndex=ChartCanvas.defaultProps.zIndex,defaultFocus,ratio,mouseMoveEvent}=this.props,{plotData,xScale,xAccessor,chartConfigs}=this.state,dimensions=getDimensions(this.props),interaction=isInteractionEnabled(xScale,xAccessor,plotData),cursorStyle=useCrossHairStyleCursor&&interaction,cursor=(0,jsx_runtime.jsx)("style",{type:"text/css",children:"\n\t.react-financial-charts-grabbing-cursor {\n\t\tpointer-events: all;\n\t\tcursor: -moz-grabbing;\n\t\tcursor: -webkit-grabbing;\n\t\tcursor: grabbing;\n\t}\n\t.react-financial-charts-crosshair-cursor {\n\t\tpointer-events: all;\n\t\tcursor: crosshair;\n\t}\n\t.react-financial-charts-tooltip-hover {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.react-financial-charts-avoid-interaction {\n\t\tpointer-events: none;\n\t}\n\t.react-financial-charts-enable-interaction {\n\t\tpointer-events: all;\n\t}\n\t.react-financial-charts-tooltip {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.react-financial-charts-default-cursor {\n\t\tcursor: default;\n\t}\n\t.react-financial-charts-move-cursor {\n\t\tcursor: move;\n\t}\n\t.react-financial-charts-pointer-cursor {\n\t\tcursor: pointer;\n\t}\n\t.react-financial-charts-ns-resize-cursor {\n\t\tcursor: ns-resize;\n\t}\n\t.react-financial-charts-ew-resize-cursor {\n\t\tcursor: ew-resize;\n\t}"});return(0,jsx_runtime.jsx)(ChartCanvasContext.Provider,{value:this.getContextValues(),children:(0,jsx_runtime.jsxs)("div",{style:{position:"relative",width,height},className,onClick,onDoubleClick,children:[(0,jsx_runtime.jsx)(CanvasContainer,{ref:this.canvasContainerRef,ratio,width,height,style:{height,zIndex,width}}),(0,jsx_runtime.jsxs)("svg",{className,width,height,style:{position:"absolute",zIndex:zIndex+5},children:[cursor,(0,jsx_runtime.jsxs)("defs",{children:[(0,jsx_runtime.jsx)("clipPath",{id:"chart-area-clip",children:(0,jsx_runtime.jsx)("rect",{x:"0",y:"0",width:dimensions.width,height:dimensions.height})}),chartConfigs.map((each,idx)=>(0,jsx_runtime.jsx)("clipPath",{id:`chart-area-clip-${each.id}`,children:(0,jsx_runtime.jsx)("rect",{x:"0",y:"0",width:each.width,height:each.height})},idx))]}),(0,jsx_runtime.jsxs)("g",{transform:`translate(${margin.left+.5}, ${margin.top+.5})`,children:[(0,jsx_runtime.jsx)(EventCapture,{ref:this.eventCaptureRef,useCrossHairStyleCursor:cursorStyle,mouseMove:mouseMoveEvent&&interaction,zoom:!disableZoom&&interaction,pan:!disablePan&&interaction,width:dimensions.width,height:dimensions.height,chartConfig:chartConfigs,xScale,xAccessor,focus:defaultFocus,disableInteraction,getAllPanConditions:this.getAllPanConditions,onContextMenu:this.handleContextMenu,onClick:this.handleClick,onDoubleClick:this.handleDoubleClick,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onDragStart:this.handleDragStart,onDrag:this.handleDrag,onDragComplete:this.handleDragEnd,onZoom:this.handleZoom,onPinchZoom:this.handlePinchZoom,onPinchZoomEnd:this.handlePinchZoomEnd,onPan:this.handlePan,onPanEnd:this.handlePanEnd}),(0,jsx_runtime.jsx)("g",{className:"react-financial-charts-avoid-interaction",children:this.props.children})]})]})]})})}}ChartCanvas.defaultProps={clamp:!1,className:"react-financial-charts",defaultFocus:!0,disablePan:!1,disableInteraction:!1,disableZoom:!1,flipXScale:!1,maintainPointsPerPixelOnResize:!0,margin:{top:0,right:40,bottom:40,left:0},minPointsPerPxThreshold:.01,mouseMoveEvent:!0,postCalculator:identity.D,padding:0,pointsPerPxThreshold:2,useCrossHairStyleCursor:!0,xAccessor:identity.D,xExtents:[min.A,max.A],zIndex:1,zoomAnchor:zoomBehavior.z$,zoomMultiplier:1.1}},"../core/lib/GenericChartComponent.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>GenericChartComponent});var _GenericComponent__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../core/lib/GenericComponent.js"),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../core/lib/utils/index.js"),_Chart__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/Chart.js");const ALWAYS_TRUE_TYPES=["drag","dragend"];class GenericChartComponent extends _GenericComponent__WEBPACK_IMPORTED_MODULE_0__.By{constructor(props,context){super(props,context),this.preCanvasDraw=this.preCanvasDraw.bind(this),this.postCanvasDraw=this.postCanvasDraw.bind(this),this.shouldTypeProceed=this.shouldTypeProceed.bind(this),this.preEvaluate=this.preEvaluate.bind(this),this.updateMoreProps=this.updateMoreProps.bind(this)}preCanvasDraw(ctx,moreProps){super.preCanvasDraw(ctx,moreProps),ctx.save();const{margin,ratio}=this.context,{chartConfig:{width,height,origin}}=moreProps,canvasOriginX=.5*ratio+origin[0]+margin.left,canvasOriginY=.5*ratio+origin[1]+margin.top,{clip,edgeClip}=this.props;ctx.setTransform(1,0,0,1,0,0),ctx.scale(ratio,ratio),edgeClip&&(ctx.beginPath(),ctx.rect(-1,canvasOriginY-10,width+margin.left+margin.right+1,height+20),ctx.clip()),ctx.translate(canvasOriginX,canvasOriginY),clip&&(ctx.beginPath(),ctx.rect(-1,-1,width+1,height+1),ctx.clip())}postCanvasDraw(ctx,moreProps){super.postCanvasDraw(ctx,moreProps),ctx.restore()}updateMoreProps(moreProps){super.updateMoreProps(moreProps);const{chartConfig:chartConfigList}=moreProps;if(chartConfigList&&Array.isArray(chartConfigList)){const{chartId}=this.context,chartConfig=chartConfigList.find(each=>each.id===chartId);this.moreProps.chartConfig=chartConfig}if((0,_utils__WEBPACK_IMPORTED_MODULE_1__.O9)(this.moreProps.chartConfig)){const{origin:[ox,oy]}=this.moreProps.chartConfig;if((0,_utils__WEBPACK_IMPORTED_MODULE_1__.O9)(moreProps.mouseXY)){const{mouseXY:[x,y]}=moreProps;this.moreProps.mouseXY=[x-ox,y-oy]}if((0,_utils__WEBPACK_IMPORTED_MODULE_1__.O9)(moreProps.startPos)){const{startPos:[x,y]}=moreProps;this.moreProps.startPos=[x-ox,y-oy]}}}preEvaluate(){}shouldTypeProceed(type,moreProps){return!("mousemove"!==type&&"click"!==type||!this.props.disablePan)||(-1!==ALWAYS_TRUE_TYPES.indexOf(type)||!(0,_utils__WEBPACK_IMPORTED_MODULE_1__.O9)(moreProps)||!(0,_utils__WEBPACK_IMPORTED_MODULE_1__.O9)(moreProps.currentCharts)||moreProps.currentCharts.indexOf(this.context.chartId)>-1)}}GenericChartComponent.defaultProps=_GenericComponent__WEBPACK_IMPORTED_MODULE_0__.By.defaultProps,GenericChartComponent.contextType=_Chart__WEBPACK_IMPORTED_MODULE_2__.u},"../core/lib/GenericComponent.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{By:()=>GenericComponent,WJ:()=>getAxisCanvas,wk:()=>getMouseCanvas});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/utils/identity.js"),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../core/lib/utils/index.js"),_ChartCanvas__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../core/lib/ChartCanvas.js");const aliases={mouseleave:"mousemove",panend:"pan",pinchzoom:"pan",mousedown:"mousemove",click:"mousemove",contextmenu:"mousemove",dblclick:"mousemove",dragstart:"drag",dragend:"drag",dragcancel:"drag",zoom:"zoom"};class GenericComponent extends react__WEBPACK_IMPORTED_MODULE_1__.Component{constructor(props,context){super(props,context),this.moreProps={},this.dragInProgress=!1,this.evaluationInProgress=!1,this.iSetTheCursorClass=!1,this.listener=(type,moreProps,state,e)=>{void 0!==moreProps&&this.updateMoreProps(moreProps),this.evaluationInProgress=!0,this.evaluateType(type,e),this.evaluationInProgress=!1},this.updateMorePropsFromContext=(props,context)=>{const{xScale,plotData,chartConfig,getMutableState}=context;this.moreProps={...this.moreProps,...getMutableState(),xScale,plotData,chartConfig}},this.drawOnCanvas=this.drawOnCanvas.bind(this),this.getMoreProps=this.getMoreProps.bind(this),this.draw=this.draw.bind(this),this.updateMoreProps=this.updateMoreProps.bind(this),this.evaluateType=this.evaluateType.bind(this),this.isHover=this.isHover.bind(this),this.preCanvasDraw=this.preCanvasDraw.bind(this),this.postCanvasDraw=this.postCanvasDraw.bind(this),this.getPanConditions=this.getPanConditions.bind(this),this.shouldTypeProceed=this.shouldTypeProceed.bind(this),this.preEvaluate=this.preEvaluate.bind(this);const{generateSubscriptionId}=context;this.subscriberId=generateSubscriptionId(),this.updateMorePropsFromContext(props,context),this.state={updateCount:0}}updateMoreProps(moreProps){Object.keys(moreProps).forEach(key=>{this.moreProps[key]=moreProps[key]})}shouldTypeProceed(type,moreProps){return!0}preEvaluate(type,moreProps,e){}evaluateType(type,e){const newType=aliases[type]||type;if(this.props.drawOn.indexOf(newType)>-1&&(this.preEvaluate(type,this.moreProps,e),this.shouldTypeProceed(type,this.moreProps)))switch(type){case"zoom":case"mouseenter":break;case"mouseleave":this.moreProps.hovering=!1,this.props.onUnHover&&this.props.onUnHover(e,this.getMoreProps());break;case"contextmenu":this.props.onContextMenu&&this.props.onContextMenu(e,this.getMoreProps()),this.moreProps.hovering&&this.props.onContextMenuWhenHover&&this.props.onContextMenuWhenHover(e,this.getMoreProps());break;case"mousedown":this.props.onMouseDown&&this.props.onMouseDown(e,this.getMoreProps());break;case"click":{const{onClick,onClickOutside,onClickWhenHover}=this.props,moreProps=this.getMoreProps();moreProps.hovering&&void 0!==onClickWhenHover?onClickWhenHover(e,moreProps):void 0!==onClickOutside&&onClickOutside(e,moreProps),void 0!==onClick&&onClick(e,moreProps);break}case"mousemove":{const prevHover=this.moreProps.hovering;this.moreProps.hovering=this.isHover(e);const{amIOnTop,setCursorClass}=this.context;this.moreProps.hovering&&!this.props.selected&&amIOnTop(this.subscriberId)&&void 0!==this.props.onHover?(setCursorClass("react-financial-charts-pointer-cursor"),this.iSetTheCursorClass=!0):this.moreProps.hovering&&this.props.selected&&amIOnTop(this.subscriberId)?(setCursorClass(this.props.interactiveCursorClass),this.iSetTheCursorClass=!0):prevHover&&!this.moreProps.hovering&&this.iSetTheCursorClass&&(this.iSetTheCursorClass=!1,setCursorClass(null));const moreProps=this.getMoreProps();this.moreProps.hovering&&!prevHover&&this.props.onHover&&this.props.onHover(e,moreProps),prevHover&&!this.moreProps.hovering&&this.props.onUnHover&&this.props.onUnHover(e,moreProps),this.props.onMouseMove&&this.props.onMouseMove(e,moreProps);break}case"dblclick":{const moreProps=this.getMoreProps();this.props.onDoubleClick&&this.props.onDoubleClick(e,moreProps),this.moreProps.hovering&&this.props.onDoubleClickWhenHover&&this.props.onDoubleClickWhenHover(e,moreProps);break}case"pan":this.moreProps.hovering=!1,this.props.onPan&&this.props.onPan(e,this.getMoreProps());break;case"panend":this.props.onPanEnd&&this.props.onPanEnd(e,this.getMoreProps());break;case"dragstart":if(this.getPanConditions().draggable){const{amIOnTop}=this.context;amIOnTop(this.subscriberId)&&(this.dragInProgress=!0,void 0!==this.props.onDragStart&&this.props.onDragStart(e,this.getMoreProps()))}break;case"drag":this.dragInProgress&&this.props.onDrag&&this.props.onDrag(e,this.getMoreProps());break;case"dragend":this.dragInProgress&&this.props.onDragComplete&&this.props.onDragComplete(e,this.getMoreProps()),this.dragInProgress=!1;break;case"dragcancel":if(this.dragInProgress||this.iSetTheCursorClass){const{setCursorClass}=this.context;setCursorClass(null)}}}isHover(e){const{isHover}=this.props;return void 0!==isHover&&isHover(this.getMoreProps(),e)}getPanConditions(){return{draggable:!(!this.props.selected||!this.moreProps.hovering)||this.props.enableDragOnHover&&this.moreProps.hovering,panEnabled:!this.props.disablePan}}draw({trigger,force=!1}){const type=aliases[trigger]||trigger;if(this.props.drawOn.indexOf(type)>-1||this.props.selected||force){const{canvasDraw}=this.props;if(void 0===canvasDraw){const{updateCount}=this.state;this.setState({updateCount:updateCount+1})}else this.drawOnCanvas()}}componentDidMount(){const{subscribe,chartId}=this.context,{clip,edgeClip}=this.props;subscribe(this.subscriberId,{chartId,clip,edgeClip,listener:this.listener,draw:this.draw,getPanConditions:this.getPanConditions}),this.updateMorePropsFromContext(this.props,this.context),this.componentDidUpdate(this.props)}componentWillUnmount(){const{unsubscribe}=this.context;if(unsubscribe(this.subscriberId),this.iSetTheCursorClass){const{setCursorClass}=this.context;setCursorClass(null)}}componentDidUpdate(prevProps){const{canvasDraw,selected,interactiveCursorClass}=this.props;if(this.updateMorePropsFromContext(this.props,this.context),prevProps.selected!==selected){const{setCursorClass}=this.context;selected&&this.moreProps.hovering?(this.iSetTheCursorClass=!0,setCursorClass(interactiveCursorClass)):(this.iSetTheCursorClass=!1,setCursorClass(null))}void 0===canvasDraw||this.evaluationInProgress||(this.updateMoreProps(this.moreProps),this.drawOnCanvas())}static getDerivedStateFromProps(nextProps,prevState){return prevState}getMoreProps(){const{xScale,plotData,chartConfigs,morePropsDecorator,xAccessor,displayXAccessor,width,height}=this.context,{chartId,fullData}=this.context,moreProps={xScale,plotData,chartConfigs,xAccessor,displayXAccessor,width,height,chartId,fullData,...this.moreProps};return(morePropsDecorator||_utils__WEBPACK_IMPORTED_MODULE_2__.D)(moreProps)}preCanvasDraw(ctx,moreProps){}postCanvasDraw(ctx,moreProps){}drawOnCanvas(){const{canvasDraw,canvasToDraw}=this.props;if(void 0===canvasDraw||void 0===canvasToDraw)return;const{getCanvasContexts}=this.context,moreProps=this.getMoreProps(),ctx=canvasToDraw(getCanvasContexts());void 0!==ctx&&(this.preCanvasDraw(ctx,moreProps),canvasDraw(ctx,moreProps),this.postCanvasDraw(ctx,moreProps))}render(){const{canvasDraw,clip,svgDraw}=this.props;if(void 0!==canvasDraw||void 0===svgDraw)return null;this.updateMorePropsFromContext(this.props,this.context);const{chartId}=this.context,style=clip?{clipPath:`url(#chart-area-clip${void 0!==chartId?"-"+chartId:""})`}:void 0;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("g",{style,children:svgDraw(this.getMoreProps())})}}GenericComponent.defaultProps={svgDraw:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.ER)(null),draw:[],canvasToDraw:contexts=>contexts.mouseCoord,clip:!0,edgeClip:!1,selected:!1,disablePan:!1,enableDragOnHover:!1},GenericComponent.contextType=_ChartCanvas__WEBPACK_IMPORTED_MODULE_4__.c0;const getAxisCanvas=contexts=>contexts.axes,getMouseCanvas=contexts=>contexts.mouseCoord},"../core/lib/utils/ChartDataUtil.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Bp:()=>getCurrentItem,M4:()=>getXValue,Ry:()=>getCurrentCharts,bS:()=>getNewChartConfig,mZ:()=>getChartConfigWithUpdatedYScales});var d3_array__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/d3-array/src/extent.js"),d3_scale__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/d3-scale/src/linear.js"),lodash_flattendeep__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/lodash.flattendeep/index.js"),lodash_flattendeep__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash_flattendeep__WEBPACK_IMPORTED_MODULE_2__),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react/index.js"),_index__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../core/lib/utils/index.js"),_index__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../core/lib/utils/shallowEqual.js"),_index__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../core/lib/utils/zipper.js"),_index__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../core/lib/utils/closestItem.js");const ChartDefaultConfig={flipYScale:!1,id:0,origin:[0,0],padding:0,yPan:!0,yPanEnabled:!1,yScale:(0,d3_scale__WEBPACK_IMPORTED_MODULE_1__.A)()};function isArraySize2AndNumber(yExtentsProp){if(Array.isArray(yExtentsProp)&&2===yExtentsProp.length){const[a,b]=yExtentsProp;return"number"==typeof a&&"number"==typeof b}return!1}const isChartProps=props=>{if(void 0===props)return!1;return void 0!==props.id};function getNewChartConfig(innerDimension,children,existingChartConfig=[]){return react__WEBPACK_IMPORTED_MODULE_3__.Children.map(children,each=>{if(!each||!isChartProps(each.props))return;const chartProps={...ChartDefaultConfig,...each.props},{id,origin,padding,yExtents:yExtentsProp,yScale:yScaleProp=ChartDefaultConfig.yScale,flipYScale,yExtentsCalculator}=chartProps,yScale=yScaleProp.copy(),{width,height,availableHeight}=function getDimensions({width,height},chartProps){return{availableHeight:height,width,height:chartProps.height||height}}(innerDimension,chartProps),{yPan}=chartProps;let{yPanEnabled}=chartProps;const yExtents=yExtentsProp?(Array.isArray(yExtentsProp)?yExtentsProp:[yExtentsProp]).map(_index__WEBPACK_IMPORTED_MODULE_4__.ER):void 0,prevChartConfig=existingChartConfig.find(d=>d.id===id);if(isArraySize2AndNumber(yExtentsProp))if(prevChartConfig&&prevChartConfig.yPan&&prevChartConfig.yPanEnabled&&yPan&&yPanEnabled&&(0,_index__WEBPACK_IMPORTED_MODULE_5__.b)(prevChartConfig.originalYExtentsProp,yExtentsProp))yScale.domain(prevChartConfig.yScale.domain());else{const[a,b]=yExtentsProp;yScale.domain([a,b])}else prevChartConfig&&prevChartConfig.yPanEnabled&&(isArraySize2AndNumber(prevChartConfig.originalYExtentsProp)||(yScale.domain(prevChartConfig.yScale.domain()),yPanEnabled=!0));return{id,origin:(0,_index__WEBPACK_IMPORTED_MODULE_4__.ER)(origin)(width,availableHeight),padding,originalYExtentsProp:yExtentsProp,yExtents,yExtentsCalculator,flipYScale,yScale,yPan,yPanEnabled,width,height}}).filter(each=>void 0!==each)}function getCurrentCharts(chartConfig,mouseXY){return chartConfig.filter(eachConfig=>{const top=eachConfig.origin[1],bottom=top+eachConfig.height;return mouseXY[1]>top&&mouseXY[1]<bottom}).map(config=>config.id)}function yDomainFromYExtents(yExtents,yScale,plotData){const yValues=yExtents.map(eachExtent=>plotData.map(function values(func){return d=>{const obj=func(d);return(0,_index__WEBPACK_IMPORTED_MODULE_4__.Gv)(obj)?(0,_index__WEBPACK_IMPORTED_MODULE_4__.s8)(obj):obj}}(eachExtent))),allYValues=lodash_flattendeep__WEBPACK_IMPORTED_MODULE_2___default()(yValues);return yScale.invert?(0,d3_array__WEBPACK_IMPORTED_MODULE_0__.A)(allYValues):[...new Set(allYValues).values()]}function getChartConfigWithUpdatedYScales(chartConfig,{plotData,xAccessor,displayXAccessor,fullData},xDomain,dy,chartsToPan){const yDomains=chartConfig.map(({yExtentsCalculator,yExtents,yScale})=>({realYDomain:yExtentsCalculator?yExtentsCalculator({plotData,xDomain,xAccessor,displayXAccessor,fullData}):yDomainFromYExtents(yExtents,yScale,plotData),yDomainDY:void 0!==dy?yScale.range().map(each=>each-dy).map(yScale.invert):yScale.domain(),prevYDomain:yScale.domain()}));return(0,_index__WEBPACK_IMPORTED_MODULE_6__.A)().combine((config,{realYDomain,yDomainDY,prevYDomain})=>{const{id,padding,height,yScale,yPan,flipYScale,yPanEnabled=!1}=config,another=void 0===chartsToPan||chartsToPan.indexOf(id)>-1,domain=yPan&&yPanEnabled?another?yDomainDY:prevYDomain:realYDomain,newYScale=function setRange(scale,height,padding,flipYScale){if(scale.rangeRoundPoints||(0,_index__WEBPACK_IMPORTED_MODULE_4__.pN)(scale.invert)){if(isNaN(padding))throw new Error("padding has to be a number for ordinal scale");scale.rangeRoundPoints&&scale.rangeRoundPoints(flipYScale?[0,height]:[height,0],padding),scale.rangeRound&&scale.range(flipYScale?[0,height]:[height,0]).padding(padding)}else{const{top,bottom}=isNaN(padding)?padding:{top:padding,bottom:padding};scale.range(flipYScale?[top,height-bottom]:[height-bottom,top])}return scale}(yScale.copy().domain(domain),height,padding,flipYScale);return{...config,yScale:newYScale,realYDomain}})(chartConfig,yDomains)}function getCurrentItem(xScale,xAccessor,mouseXY,plotData){let xValue,item;if(xScale.invert)xValue=xScale.invert(mouseXY[0]),item=(0,_index__WEBPACK_IMPORTED_MODULE_7__.V)(plotData,xValue,xAccessor);else{const dr=xScale.range().map((d,idx)=>({x:Math.abs(d-mouseXY[0]),idx})).reduce((a,b)=>a.x<b.x?a:b);item=void 0!==dr?plotData[dr.idx]:plotData[0]}return item}function getXValue(xScale,xAccessor,mouseXY,plotData){let xValue,item;if(xScale.invert){if(xValue=xScale.invert(mouseXY[0]),xValue>xAccessor((0,_index__WEBPACK_IMPORTED_MODULE_4__.HV)(plotData)))return Math.round(xValue.valueOf());item=(0,_index__WEBPACK_IMPORTED_MODULE_7__.V)(plotData,xValue,xAccessor)}else{const dr=xScale.range().map((d,idx)=>({x:Math.abs(d-mouseXY[0]),idx})).reduce((a,b)=>a.x<b.x?a:b);item=void 0!==dr?plotData[dr.idx]:plotData[0]}return xAccessor(item)}},"../core/lib/utils/closestItem.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V:()=>getClosestItem,f:()=>getClosestItemIndexes});const getClosestItemIndexes=(array,value,accessor)=>{let lo=0,hi=array.length-1;for(;hi-lo>1;){const mid=Math.round((lo+hi)/2);accessor(array[mid])<=value?lo=mid:hi=mid}const lowItemValue=accessor(array[lo]),highItemValue=accessor(array[hi]);return lowItemValue?.valueOf()===value?.valueOf()&&(hi=lo),highItemValue?.valueOf()===value?.valueOf()&&(lo=hi),lowItemValue<value&&highItemValue<value&&(lo=hi),lowItemValue>value&&highItemValue>value&&(hi=lo),{left:lo,right:hi}},getClosestItem=(array,value,accessor)=>{const{left,right}=getClosestItemIndexes(array,value,accessor);if(left===right)return array[left];const leftItem=accessor(array[left]),rightItem=accessor(array[right]);return Math.abs(leftItem.valueOf()-value.valueOf())<Math.abs(rightItem.valueOf()-value.valueOf())?array[left]:array[right]}},"../core/lib/utils/identity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>identity});const identity=d=>d},"../core/lib/utils/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$1:()=>first,Ae:()=>path,ER:()=>functor,Gv:()=>isObject,HV:()=>last,L6:()=>touchPosition,O9:()=>isDefined,Sq:()=>getTouchProps,Xd:()=>MOUSEMOVE,_J:()=>MOUSEENTER,_S:()=>sign,d5:()=>head,du:()=>MOUSEUP,iV:()=>clearCanvas,jQ:()=>mousePosition,mK:()=>d3Window,pN:()=>isNotDefined,s8:()=>mapObject,t2:()=>TOUCHEND,vs:()=>MOUSELEAVE,vx:()=>TOUCHMOVE,xZ:()=>getClosestValue});const sign=x=>(x>0)-(x<0),path=(loc=[])=>{const key=Array.isArray(loc)?loc:[loc],length=key.length;return function(obj,defaultValue){if(0===length)return isDefined(obj)?obj:defaultValue;let index=0;for(;null!=obj&&index<length;)obj=obj[key[index++]];return index===length?obj:defaultValue}},functor=v=>"function"==typeof v?v:()=>v;function getClosestValue(inputValue,currentValue){const diff=(Array.isArray(inputValue)?inputValue:[inputValue]).map(each=>each-currentValue).reduce((diff1,diff2)=>Math.abs(diff1)<Math.abs(diff2)?diff1:diff2);return currentValue+diff}function d3Window(node){return node&&(node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView)}const MOUSEENTER="mouseenter.interaction",MOUSELEAVE="mouseleave.interaction",MOUSEMOVE="mousemove.pan",MOUSEUP="mouseup.pan",TOUCHMOVE="touchmove.pan",TOUCHEND="touchend.pan touchcancel.pan";function getTouchProps(touch){return{pageX:touch.pageX,pageY:touch.pageY,clientX:touch.clientX,clientY:touch.clientY}}function head(array,accessor){if(accessor&&array){let value;for(let i=0;i<array.length;i++)if(value=array[i],isDefined(accessor(value)))return value;return}return array?array[0]:void 0}const first=head;function last(array,accessor){if(accessor&&array){let value;for(let i=array.length-1;i>=0;i--)if(value=array[i],isDefined(accessor(value)))return value;return}const length=array?array.length:0;return length?array[length-1]:void 0}const isDefined=d=>null!=d;function isNotDefined(d){return!isDefined(d)}function isObject(d){return isDefined(d)&&"object"==typeof d&&!Array.isArray(d)}function touchPosition(touch,e){const container=e.currentTarget,rect=container.getBoundingClientRect(),x=touch.clientX-rect.left-container.clientLeft,y=touch.clientY-rect.top-container.clientTop;return[Math.round(x),Math.round(y)]}function mousePosition(e,defaultRect){const container=e.currentTarget,rect=defaultRect??container.getBoundingClientRect(),x=e.clientX-rect.left-container.clientLeft,y=e.clientY-rect.top-container.clientTop;return[Math.round(x),Math.round(y)]}function clearCanvas(canvasList,ratio){canvasList.forEach(each=>{each.setTransform(1,0,0,1,0,0),each.clearRect(-1,-1,each.canvas.width+2,each.canvas.height+2),each.scale(ratio,ratio)})}function mapObject(object={},iteratee=x=>x){const props=Object.keys(object),result=new Array(props.length);return props.forEach((key,index)=>{result[index]=iteratee(object[key],key,object)}),result}},"../core/lib/utils/shallowEqual.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{b:()=>shallowEqual});const shallowEqual=(a,b)=>{if(a===b)return!0;if(!(a instanceof Object&&b instanceof Object))return!1;const keys=Object.keys(a),length=keys.length;for(let i=0;i<length;i++)if(!(keys[i]in b))return!1;for(let i=0;i<length;i++)if(a[keys[i]]!==b[keys[i]])return!1;return length===Object.keys(b).length}},"../core/lib/utils/strokeDasharray.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>getStrokeDasharrayCanvas});const getStrokeDasharrayCanvas=type=>{const a=getStrokeDasharray(type).split(",");return 1===a.length?[]:a.map(d=>Number(d))},getStrokeDasharray=type=>{switch(type){default:case"Solid":return"none";case"ShortDash":return"6, 2";case"ShortDash2":return"6, 3";case"ShortDot":return"2, 2";case"ShortDashDot":return"6, 2, 2, 2";case"ShortDashDotDot":return"6, 2, 2, 2, 2, 2";case"Dot":return"2, 6";case"Dash":return"4, 6";case"LongDash":return"16, 6";case"DashDot":return"8, 6, 2, 6";case"LongDashDot":return"16, 6, 2, 6";case"LongDashDotDot":return"16, 6, 2, 6, 2, 6"}}},"../core/lib/utils/zipper.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>zipper});var d3_array__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/d3-array/src/min.js"),_identity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../core/lib/utils/identity.js");function zipper(){let combine=_identity__WEBPACK_IMPORTED_MODULE_1__.D;function zip(){const n=arguments.length;if(0===n)return[];const m=(0,d3_array__WEBPACK_IMPORTED_MODULE_0__.A)(arguments,d3_zipLength)??0,zips=new Array(m);for(let i=-1;++i<m;){for(let j=-1,zip=zips[i]=new Array(n);++j<n;)zip[j]=arguments[j][i];zips[i]=combine.apply(this,zips[i])}return zips}function d3_zipLength(d){return d.length}return zip.combine=function(x){return arguments.length?(combine=x,zip):combine},zip}},"../core/lib/zoom/zoomBehavior.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{by:()=>lastVisibleItemBasedZoomAnchor,g0:()=>rightDomainBasedZoomAnchor,z$:()=>mouseBasedZoomAnchor});var _utils_ChartDataUtil__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../core/lib/utils/ChartDataUtil.js"),_utils_index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../core/lib/utils/index.js");const mouseBasedZoomAnchor=options=>{const{xScale,xAccessor,mouseXY,plotData}=options;return xAccessor((0,_utils_ChartDataUtil__WEBPACK_IMPORTED_MODULE_0__.Bp)(xScale,xAccessor,mouseXY,plotData))},lastVisibleItemBasedZoomAnchor=options=>{const{xAccessor,plotData}=options;return xAccessor((0,_utils_index__WEBPACK_IMPORTED_MODULE_1__.HV)(plotData))},rightDomainBasedZoomAnchor=options=>{const{xScale}=options,[,end]=xScale.domain();return end}},"../utils/lib/withDeviceRatio.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>withDeviceRatio});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js");const withDeviceRatio=()=>OriginalComponent=>class WithRatio extends react__WEBPACK_IMPORTED_MODULE_1__.Component{constructor(){super(...arguments),this.ref=react__WEBPACK_IMPORTED_MODULE_1__.createRef()}componentDidMount(){const{current}=this.ref;if(null===current)return void this.setState({ratio:1});const context=current.getContext("2d"),{devicePixelRatio}=window,backingStoreRatio=context.webkitBackingStorePixelRatio??context.mozBackingStorePixelRatio??context.msBackingStorePixelRatio??context.oBackingStorePixelRatio??context.backingStorePixelRatio??1;this.setState({ratio:devicePixelRatio/backingStoreRatio})}render(){const state=this.state;return null!==state?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(OriginalComponent,{...this.props,ratio:state.ratio}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("canvas",{ref:this.ref})}}},"../utils/lib/withSize.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>withSize});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),react_virtualized_auto_sizer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react-virtualized-auto-sizer/dist/react-virtualized-auto-sizer.esm.js");const withSize=props=>OriginalComponent=>class WithSize extends react__WEBPACK_IMPORTED_MODULE_1__.Component{render(){const safeProps=props?{...props}:{};return"disableHeight"in safeProps&&!0===safeProps.disableHeight&&delete safeProps.disableHeight,"disableWidth"in safeProps&&!0===safeProps.disableWidth&&delete safeProps.disableWidth,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_virtualized_auto_sizer__WEBPACK_IMPORTED_MODULE_2__.Ay,{...safeProps,children:({height,width})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(OriginalComponent,{...this.props,height,width})})}}}}]);