"use strict";(self.webpackChunk_react_stockcharts3_stories=self.webpackChunk_react_stockcharts3_stories||[]).push([[7840],{"../coordinates/lib/CurrentCoordinate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>CurrentCoordinate});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../core/lib/GenericChartComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/GenericComponent.js"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react/index.js");class CurrentCoordinate extends react__WEBPACK_IMPORTED_MODULE_3__.Component{constructor(){super(...arguments),this.drawOnCanvas=(ctx,moreProps)=>{const circle=this.getCircle(moreProps);if(void 0===circle)return;const{fillStyle,r,strokeStyle}=this.props,fillColor=fillStyle instanceof Function?fillStyle(moreProps.currentItem):fillStyle;void 0!==fillColor&&(ctx.fillStyle=fillColor);const strokeColor=strokeStyle instanceof Function?strokeStyle(moreProps.currentItem):strokeStyle;void 0!==strokeColor&&(ctx.strokeStyle=strokeColor),ctx.beginPath(),ctx.arc(circle.x,circle.y,r,0,2*Math.PI,!1),ctx.fill(),void 0!==strokeColor&&ctx.stroke()},this.getCircle=moreProps=>{const{show,xScale,chartConfig:{yScale},currentItem,xAccessor}=moreProps;if(!show||void 0===currentItem)return;const{yAccessor}=this.props,xValue=xAccessor(currentItem),yValue=yAccessor(currentItem);if(void 0===yValue)return;return{x:Math.round(xScale(xValue)),y:Math.round(yScale(yValue))}}}render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__.P,{canvasDraw:this.drawOnCanvas,canvasToDraw:_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.wk,drawOn:["mousemove","pan"]})}}CurrentCoordinate.defaultProps={fillStyle:"#2196f3",r:3}},"../indicators/lib/indicator/ema.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../indicators/lib/utils/merge.js"),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../indicators/lib/utils/rebind.js"),_calculator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../indicators/lib/calculator/ema.js"),_baseIndicator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../indicators/lib/indicator/baseIndicator.js");const ALGORITHM_TYPE="EMA";function __WEBPACK_DEFAULT_EXPORT__(){const base=(0,_baseIndicator__WEBPACK_IMPORTED_MODULE_3__.A)().type(ALGORITHM_TYPE).accessor(d=>d.ema),underlyingAlgorithm=(0,_calculator__WEBPACK_IMPORTED_MODULE_2__.A)(),mergedAlgorithm=(0,_utils__WEBPACK_IMPORTED_MODULE_0__.A)().algorithm(underlyingAlgorithm).merge((datum,i)=>{datum.ema=i}),indicator=(data,options={merge:!0})=>{if(options.merge){if(!base.accessor())throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);return mergedAlgorithm(data)}return underlyingAlgorithm(data)};return(0,_utils__WEBPACK_IMPORTED_MODULE_1__.A)(indicator,base,"id","accessor","stroke","fill","echo","type"),(0,_utils__WEBPACK_IMPORTED_MODULE_1__.A)(indicator,underlyingAlgorithm,"options","undefinedLength"),(0,_utils__WEBPACK_IMPORTED_MODULE_1__.A)(indicator,mergedAlgorithm,"merge","skipUndefined"),indicator}},"../series/lib/BarSeries.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>BarSeries});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../core/lib/GenericChartComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/GenericComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../core/lib/utils/index.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../core/lib/utils/barWidth.js"),d3_array__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/d3-array/src/group.js"),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/react/index.js"),_StackedBarSeries__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../series/lib/StackedBarSeries.js");class BarSeries extends react__WEBPACK_IMPORTED_MODULE_6__.Component{constructor(){super(...arguments),this.drawOnCanvas=(ctx,moreProps)=>{if(this.props.swapScales){const{xAccessor}=moreProps;(0,_StackedBarSeries__WEBPACK_IMPORTED_MODULE_7__.aZ)(ctx,this.props,moreProps,xAccessor,_StackedBarSeries__WEBPACK_IMPORTED_MODULE_7__.Th)}else{const bars=this.getBars(moreProps),{strokeStyle}=this.props;(0,d3_array__WEBPACK_IMPORTED_MODULE_5__.Ay)(bars,d=>d.fillStyle).forEach((values,key)=>{void 0!==strokeStyle&&(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.d5)(values).width>1&&(ctx.strokeStyle=strokeStyle),ctx.fillStyle=key,values.forEach(d=>{d.width<=1?ctx.fillRect(d.x-.5,d.y,1,d.height):(ctx.fillRect(d.x+.5,d.y+.5,d.width,d.height),void 0!==strokeStyle&&ctx.strokeRect(d.x,d.y,d.width,d.height))})})}},this.getBars=moreProps=>{const{baseAt,fillStyle,width,yAccessor}=this.props,{xScale,xAccessor,plotData,chartConfig:{yScale}}=moreProps,getFill=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.ER)(fillStyle),getBase=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.ER)(baseAt),offset=.5*(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.ER)(width)(this.props,{xScale,xAccessor,plotData});return plotData.map(d=>{const yValue=yAccessor(d);if(void 0===yValue)return;const xValue=xAccessor(d),x=xScale(xValue)-offset;let y=yScale(yValue),h=getBase(xScale,yScale,d)-yScale(yValue);return h<0&&(y+=h,h=-h),{x,y:Math.round(y),height:Math.round(h),width:2*offset,fillStyle:getFill(d)}}).filter(d=>void 0!==d)}}render(){const{clip}=this.props;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__.P,{clip,canvasToDraw:_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.WJ,canvasDraw:this.drawOnCanvas,drawOn:["pan"]})}}BarSeries.defaultProps={baseAt:(xScale,yScale)=>(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.d5)(yScale.range()),clip:!0,fillStyle:"rgba(70, 130, 180, 0.5)",swapScales:!1,width:_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_4__.h,widthRatio:.8}},"../series/lib/CandlestickSeries.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>CandlestickSeries});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../core/lib/GenericChartComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/GenericComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../core/lib/utils/index.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../core/lib/utils/barWidth.js"),d3_array__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/d3-array/src/group.js"),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/react/index.js");class CandlestickSeries extends react__WEBPACK_IMPORTED_MODULE_6__.Component{constructor(){super(...arguments),this.drawOnCanvas=(ctx,moreProps)=>{const{candleStrokeWidth=CandlestickSeries.defaultProps.candleStrokeWidth}=this.props,{xScale,chartConfig:{yScale},plotData,xAccessor}=moreProps,candleData=this.getCandleData(xAccessor,xScale,yScale,plotData);(0,d3_array__WEBPACK_IMPORTED_MODULE_5__.Ay)(candleData,d=>d.wick.stroke).forEach((values,key)=>{ctx.fillStyle=key,values.forEach(each=>{const d=each.wick;ctx.fillRect(d.x-.5,d.y1,1,d.y2-d.y1),ctx.fillRect(d.x-.5,d.y3,1,d.y4-d.y3)})});(0,d3_array__WEBPACK_IMPORTED_MODULE_5__.Ay)(candleData,d=>d.stroke,d=>d.fill).forEach((strokeValues,strokeKey)=>{"none"!==strokeKey&&(ctx.strokeStyle=strokeKey,ctx.lineWidth=candleStrokeWidth),strokeValues.forEach((values,key)=>{ctx.fillStyle=key,values.forEach(d=>{d.width<=1?ctx.fillRect(d.x-.5,d.y,1,d.height):0===d.height?ctx.fillRect(d.x-.5,d.y,d.width,1):(ctx.fillRect(d.x-.5,d.y,d.width,d.height),"none"!==strokeKey&&ctx.strokeRect(d.x,d.y,d.width,d.height))})})})},this.getCandleData=(xAccessor,xScale,yScale,plotData)=>{const{fill:fillProp,stroke:strokeProp,yAccessor,wickStroke:wickStrokeProp}=this.props,fill=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.ER)(fillProp),stroke=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.ER)(strokeProp),wickStroke=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.ER)(wickStrokeProp),offset=.5*(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_3__.ER)(this.props.width)(this.props,{xScale,xAccessor,plotData});return plotData.filter(d=>void 0!==yAccessor(d)).map(d=>{const ohlc=yAccessor(d);if(void 0===ohlc)return;const xValue=xAccessor(d),x=xScale(xValue),y=Math.round(yScale(Math.max(ohlc.open,ohlc.close))),height=Math.max(1,Math.round(Math.abs(yScale(ohlc.open)-yScale(ohlc.close))));return{x:x-offset,y,wick:{stroke:wickStroke(ohlc),x,y1:Math.round(yScale(ohlc.high)),y2:y,y3:y+height,y4:Math.round(yScale(ohlc.low))},height,width:2*offset,fill:fill(ohlc),stroke:stroke(ohlc),direction:ohlc.close-ohlc.open}}).filter(d=>void 0!==d)}}render(){const{clip}=this.props;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__.P,{clip,canvasDraw:this.drawOnCanvas,canvasToDraw:_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.WJ,drawOn:["pan"]})}}CandlestickSeries.defaultProps={candleStrokeWidth:.5,clip:!0,fill:d=>d.close>d.open?"#26a69a":"#ef5350",stroke:"none",wickStroke:d=>d.close>d.open?"#26a69a":"#ef5350",width:_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_4__.h,widthRatio:.8,yAccessor:d=>({open:d.open,high:d.high,low:d.low,close:d.close})}},"../tooltip/lib/MovingAverageTooltip.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>MovingAverageTooltip});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../core/lib/GenericChartComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/utils/index.js"),d3_format__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/d3-format/src/defaultLocale.js"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/react/index.js"),_ToolTipText__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../tooltip/lib/ToolTipText.js"),_ToolTipTSpanLabel__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../tooltip/lib/ToolTipTSpanLabel.js");class SingleMAToolTip extends react__WEBPACK_IMPORTED_MODULE_4__.Component{constructor(){super(...arguments),this.onClick=event=>{const{onClick,forChart,options}=this.props;void 0!==onClick&&onClick(event,{chartId:forChart,...options})}}render(){const{color,displayName,fontSize,fontFamily,fontWeight,textFill,labelFill,labelFontWeight,value}=this.props,translate="translate("+this.props.origin[0]+", "+this.props.origin[1]+")";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("g",{transform:translate,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("line",{x1:0,y1:2,x2:0,y2:28,stroke:color,strokeWidth:4}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_ToolTipText__WEBPACK_IMPORTED_MODULE_5__.z,{x:5,y:11,fontFamily,fontSize,fontWeight,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ToolTipTSpanLabel__WEBPACK_IMPORTED_MODULE_6__.O,{fill:labelFill,fontWeight:labelFontWeight,children:displayName}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("tspan",{x:5,dy:15,fill:textFill,children:value})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("rect",{x:0,y:0,width:55,height:30,onClick:this.onClick,fill:"none",stroke:"none"})]})}}class MovingAverageTooltip extends react__WEBPACK_IMPORTED_MODULE_4__.Component{constructor(){super(...arguments),this.renderSVG=moreProps=>{const{chartId,chartConfig,chartConfig:{height=0}={},fullData}=moreProps,{className,displayInit=MovingAverageTooltip.defaultProps.displayInit,onClick,width=65,fontFamily,fontSize,fontWeight,textFill,labelFill,origin:originProp,displayFormat,displayValuesFor=MovingAverageTooltip.defaultProps.displayValuesFor,options}=this.props,currentItem=displayValuesFor(this.props,moreProps)??(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.HV)(fullData),config=chartConfig,origin=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.ER)(originProp),[x,y]=origin(width,height),[ox,oy]=config.origin;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("g",{transform:`translate(${ox+x}, ${oy+y})`,className,children:options.map((each,idx)=>{const yValue=currentItem&&each.yAccessor(currentItem),tooltipLabel=`${each.type} (${each.windowSize})`,yDisplayValue=yValue?displayFormat(yValue):displayInit;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SingleMAToolTip,{origin:[width*idx,0],color:each.stroke,displayName:tooltipLabel,value:yDisplayValue,options:each,forChart:chartId,onClick,fontFamily,fontSize,fontWeight,textFill,labelFill},idx)})})}}render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__.P,{clip:!1,svgDraw:this.renderSVG,drawOn:["mousemove"]})}}MovingAverageTooltip.defaultProps={className:"react-financial-charts-tooltip react-financial-charts-moving-average-tooltip",displayFormat:(0,d3_format__WEBPACK_IMPORTED_MODULE_3__.GP)(".2f"),displayInit:"n/a",displayValuesFor:(_,props)=>props.currentItem,origin:[0,10],width:65}},"../tooltip/lib/OHLCTooltip.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>OHLCTooltip});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../core/lib/GenericChartComponent.js"),_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../core/lib/utils/index.js"),d3_format__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/d3-format/src/defaultLocale.js"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/react/index.js"),_ToolTipText__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../tooltip/lib/ToolTipText.js"),_ToolTipTSpanLabel__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../tooltip/lib/ToolTipTSpanLabel.js");class OHLCTooltip extends react__WEBPACK_IMPORTED_MODULE_4__.Component{constructor(){super(...arguments),this.renderSVG=moreProps=>{const{accessor,changeFormat=OHLCTooltip.defaultProps.changeFormat,className,displayTexts=OHLCTooltip.defaultProps.displayTexts,displayValuesFor=OHLCTooltip.defaultProps.displayValuesFor,fontFamily,fontSize,fontWeight,labelFill,labelFontWeight,ohlcFormat=OHLCTooltip.defaultProps.ohlcFormat,onClick,percentFormat=OHLCTooltip.defaultProps.percentFormat,textFill}=this.props,{chartConfig:{width,height},fullData}=moreProps,currentItem=displayValuesFor(this.props,moreProps)??(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.HV)(fullData);let open=displayTexts.na,high=displayTexts.na,low=displayTexts.na,close=displayTexts.na,change=displayTexts.na;if(void 0!==currentItem&&void 0!==accessor){const item=accessor(currentItem);void 0!==item&&(open=ohlcFormat(item.open),high=ohlcFormat(item.high),low=ohlcFormat(item.low),close=ohlcFormat(item.close),change=`${changeFormat(item.close-item.open)} (${percentFormat((item.close-item.open)/item.open)})`)}const{origin:originProp}=this.props,[x,y]=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.ER)(originProp)(width,height),valueFill=(0,_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_2__.ER)(textFill)(currentItem);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("g",{className,transform:`translate(${x}, ${y})`,onClick,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_ToolTipText__WEBPACK_IMPORTED_MODULE_5__.z,{x:0,y:0,fontFamily,fontSize,fontWeight,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ToolTipTSpanLabel__WEBPACK_IMPORTED_MODULE_6__.O,{fill:labelFill,fontWeight:labelFontWeight,children:displayTexts.o},"label_O"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("tspan",{fill:valueFill,children:open},"value_O"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ToolTipTSpanLabel__WEBPACK_IMPORTED_MODULE_6__.O,{fill:labelFill,fontWeight:labelFontWeight,children:displayTexts.h},"label_H"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("tspan",{fill:valueFill,children:high},"value_H"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ToolTipTSpanLabel__WEBPACK_IMPORTED_MODULE_6__.O,{fill:labelFill,fontWeight:labelFontWeight,children:displayTexts.l},"label_L"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("tspan",{fill:valueFill,children:low},"value_L"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ToolTipTSpanLabel__WEBPACK_IMPORTED_MODULE_6__.O,{fill:labelFill,fontWeight:labelFontWeight,children:displayTexts.c},"label_C"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("tspan",{fill:valueFill,children:close},"value_C"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("tspan",{fill:valueFill,children:` ${change}`},"value_Change")]})})}}render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_react_stockcharts3_core__WEBPACK_IMPORTED_MODULE_1__.P,{clip:!1,svgDraw:this.renderSVG,drawOn:["mousemove"]})}}OHLCTooltip.defaultProps={accessor:d=>d,changeFormat:(0,d3_format__WEBPACK_IMPORTED_MODULE_3__.GP)("+.2f"),className:"react-financial-charts-tooltip-hover",displayTexts:{o:"O: ",h:" H: ",l:" L: ",c:" C: ",na:"n/a"},displayValuesFor:(_,props)=>props.currentItem,fontFamily:"-apple-system, system-ui, 'Helvetica Neue', Ubuntu, sans-serif",ohlcFormat:(0,d3_format__WEBPACK_IMPORTED_MODULE_3__.GP)(".2f"),origin:[0,0],percentFormat:(0,d3_format__WEBPACK_IMPORTED_MODULE_3__.GP)("+.2%")}},"./src/features/StockChart.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Mx:()=>MinutesStockChart,oD:()=>SecondsStockChart,Ay:()=>features_StockChart});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),defaultLocale=__webpack_require__("../../node_modules/d3-format/src/defaultLocale.js"),src_defaultLocale=__webpack_require__("../../node_modules/d3-time-format/src/defaultLocale.js"),react=__webpack_require__("../../node_modules/react/index.js"),discontinuousTimeScaleProvider=__webpack_require__("../scales/lib/discontinuousTimeScaleProvider.js"),ema=__webpack_require__("../indicators/lib/indicator/ema.js"),elderRay=__webpack_require__("../indicators/lib/indicator/elderRay.js"),ChartCanvas=__webpack_require__("../core/lib/ChartCanvas.js"),zoomBehavior=__webpack_require__("../core/lib/zoom/zoomBehavior.js"),Chart=__webpack_require__("../core/lib/Chart.js"),BarSeries=__webpack_require__("../series/lib/BarSeries.js"),XAxis=__webpack_require__("../axes/lib/XAxis.js"),YAxis=__webpack_require__("../axes/lib/YAxis.js"),CandlestickSeries=__webpack_require__("../series/lib/CandlestickSeries.js"),LineSeries=__webpack_require__("../series/lib/LineSeries.js"),CurrentCoordinate=__webpack_require__("../coordinates/lib/CurrentCoordinate.js"),MouseCoordinateY=__webpack_require__("../coordinates/lib/MouseCoordinateY.js"),EdgeIndicator=__webpack_require__("../coordinates/lib/EdgeIndicator.js"),MovingAverageTooltip=__webpack_require__("../tooltip/lib/MovingAverageTooltip.js"),utils=__webpack_require__("../core/lib/utils/index.js"),number=__webpack_require__("../../node_modules/d3-interpolate/src/number.js"),react_dom=__webpack_require__("../../node_modules/react-dom/index.js");class ZoomButtons extends react.Component{constructor(){super(...arguments),this.handleZoomIn=()=>{this.interval||this.zoom(-1)},this.handleZoomOut=()=>{this.interval||this.zoom(1)},this.handleReset=()=>{const{resetChart}=this.context,{onReset}=this.props;resetChart?resetChart():onReset&&onReset()},this.zoom=direction=>{const{xAxisZoom,xScale,plotData,xAccessor}=this.context,cx=xScale(xAccessor((0,utils.HV)(plotData))),{zoomMultiplier}=this.props,c=direction>0?1*zoomMultiplier:1/zoomMultiplier,scale=xScale,[start,end]=scale.domain(),[newStart,newEnd]=scale.range().map(x=>cx+(x-cx)*c).map(scale.invert);xAxisZoom&&react.startTransition(()=>{const left=(0,number.A)(start,newStart),right=(0,number.A)(end,newEnd),animationSteps=[.25,.3,.5,.6,.75,1].map(i=>[left(i),right(i)]),animateZoom=steps=>{if(0===steps.length)return;const domain=steps.shift();domain&&(0,react_dom.flushSync)(()=>{xAxisZoom(domain)}),steps.length>0&&requestAnimationFrame(()=>animateZoom(steps))};animateZoom(animationSteps)})}}render(){const{chartConfig}=this.context,{width,height}=chartConfig,{heightFromBase,r,fill,fillOpacity,stroke,strokeWidth,textFill}=this.props,centerX=Math.round(width/2),y=height-heightFromBase,zoomOutX=centerX-16-2*r,zoomInX=centerX-8,resetX=centerX+16+2*r;return(0,jsx_runtime.jsxs)("g",{className:"react-financial-charts-zoom-buttons",children:[(0,jsx_runtime.jsx)("circle",{className:"react-financial-charts-button",cx:zoomOutX-r/2,cy:y+r/2,fill,fillOpacity,stroke,strokeWidth,r}),(0,jsx_runtime.jsx)("g",{transform:`translate (${zoomOutX-20}, ${y-8+r/4})`,children:(0,jsx_runtime.jsx)("path",{d:"M19,13H5V11H19V13Z",fill:textFill})}),(0,jsx_runtime.jsx)("circle",{className:"react-financial-charts-button",cx:zoomInX-r/2,cy:y+r/2,fill,fillOpacity,stroke,strokeWidth,r}),(0,jsx_runtime.jsx)("g",{transform:`translate (${zoomInX-20}, ${y-8+r/4})`,children:(0,jsx_runtime.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z",fill:textFill})}),(0,jsx_runtime.jsx)("circle",{className:"react-financial-charts-button",cx:resetX-r/2,cy:y+r/2,fill,fillOpacity,stroke,strokeWidth,r}),(0,jsx_runtime.jsx)("g",{transform:`translate (${resetX-r}, ${y-4+r/4})`,children:(0,jsx_runtime.jsx)("path",{d:"M2.35 2.35A7.958 7.958 0 018 0a8 8 0 110 16c-3.73 0-6.84-2.55-7.73-6h2.08c.82 2.33 3.04 4 5.65 4A6 6 0 108 2c-1.66 0-3.14.69-4.22 1.78L7 7H0V0l2.35 2.35z",fill:textFill})}),(0,jsx_runtime.jsx)("circle",{className:"react-financial-charts-enable-interaction out",onClick:this.handleZoomOut,cx:zoomOutX-r/2,cy:y+r/2,r,fill:"none"}),(0,jsx_runtime.jsx)("circle",{className:"react-financial-charts-enable-interaction in",onClick:this.handleZoomIn,cx:zoomInX-r/2,cy:y+r/2,r,fill:"none"}),(0,jsx_runtime.jsx)("circle",{className:"react-financial-charts-enable-interaction reset",onClick:this.handleReset,cx:resetX-r/2,cy:y+r/2,r,fill:"none"})]})}}ZoomButtons.defaultProps={fill:"#ffffff",fillOpacity:.75,heightFromBase:32,r:16,stroke:"#e0e3eb",strokeWidth:1,textFill:"#000000",zoomMultiplier:1.5},ZoomButtons.contextType=Chart.u;var OHLCTooltip=__webpack_require__("../tooltip/lib/OHLCTooltip.js"),MouseCoordinateX=__webpack_require__("../coordinates/lib/MouseCoordinateX.js"),ElderRaySeries=__webpack_require__("../series/lib/ElderRaySeries.js"),SingleValueTooltip=__webpack_require__("../tooltip/lib/SingleValueTooltip.js"),CrossHairCursor=__webpack_require__("../coordinates/lib/CrossHairCursor.js"),withSize=__webpack_require__("../utils/lib/withSize.js"),withDeviceRatio=__webpack_require__("../utils/lib/withDeviceRatio.js"),data=__webpack_require__("./src/data/index.ts");class StockChart extends react.Component{constructor(){super(...arguments),this.margin={left:0,right:48,top:0,bottom:24},this.pricesDisplayFormat=(0,defaultLocale.GP)(".2f"),this.xScaleProvider=(0,discontinuousTimeScaleProvider.L)().inputDateAccessor(d=>d.date),this.barChartExtents=data=>data.volume,this.candleChartExtents=data=>[data.high,data.low],this.yEdgeIndicator=data=>data.close,this.volumeColor=data=>data.close>data.open?"rgba(38, 166, 154, 0.3)":"rgba(239, 83, 80, 0.3)",this.volumeSeries=data=>data.volume,this.openCloseColor=data=>data.close>data.open?"#26a69a":"#ef5350"}render(){const{data:initialData,dateTimeFormat="%d %b",height,ratio,width}=this.props,ema12=(0,ema.A)().id(1).options({windowSize:12}).merge((d,c)=>{d.ema12=c}).accessor(d=>d.ema12),ema26=(0,ema.A)().id(2).options({windowSize:26}).merge((d,c)=>{d.ema26=c}).accessor(d=>d.ema26),elder=(0,elderRay.A)(),calculatedData=elder(ema26(ema12(initialData))),{margin,xScaleProvider}=this,{data,xScale,xAccessor,displayXAccessor}=xScaleProvider(calculatedData),max=xAccessor(data[data.length-1]),xExtents=[xAccessor(data[Math.max(0,data.length-100)]),max+5],gridHeight=height-margin.top-margin.bottom,barChartHeight=gridHeight/4,chartHeight=gridHeight-100,timeDisplayFormat=(0,src_defaultLocale.DC)(dateTimeFormat);return(0,jsx_runtime.jsxs)(ChartCanvas.v,{height,ratio,width,margin,data,displayXAccessor,seriesName:"Data",xScale,xAccessor,xExtents,zoomAnchor:zoomBehavior.by,children:[(0,jsx_runtime.jsx)(Chart.t,{id:2,height:barChartHeight,origin:(_,h)=>[0,h-barChartHeight-100],yExtents:this.barChartExtents,children:(0,jsx_runtime.jsx)(BarSeries.R,{fillStyle:this.volumeColor,yAccessor:this.volumeSeries})}),(0,jsx_runtime.jsxs)(Chart.t,{id:3,height:chartHeight,yExtents:this.candleChartExtents,children:[(0,jsx_runtime.jsx)(XAxis.W,{showGridLines:!0,showTicks:!1,showTickLabel:!1}),(0,jsx_runtime.jsx)(YAxis.h,{showGridLines:!0,tickFormat:this.pricesDisplayFormat}),(0,jsx_runtime.jsx)(CandlestickSeries.H,{}),(0,jsx_runtime.jsx)(LineSeries.I,{yAccessor:ema26.accessor(),strokeStyle:ema26.stroke()}),(0,jsx_runtime.jsx)(CurrentCoordinate.A,{yAccessor:ema26.accessor(),fillStyle:ema26.stroke()}),(0,jsx_runtime.jsx)(LineSeries.I,{yAccessor:ema12.accessor(),strokeStyle:ema12.stroke()}),(0,jsx_runtime.jsx)(CurrentCoordinate.A,{yAccessor:ema12.accessor(),fillStyle:ema12.stroke()}),(0,jsx_runtime.jsx)(MouseCoordinateY.R,{rectWidth:margin.right,displayFormat:this.pricesDisplayFormat}),(0,jsx_runtime.jsx)(EdgeIndicator.b,{itemType:"last",rectWidth:margin.right,fill:this.openCloseColor,lineStroke:this.openCloseColor,displayFormat:this.pricesDisplayFormat,yAccessor:this.yEdgeIndicator}),(0,jsx_runtime.jsx)(MovingAverageTooltip.T,{origin:[8,24],options:[{yAccessor:ema26.accessor(),type:"EMA",stroke:ema26.stroke(),windowSize:ema26.options().windowSize},{yAccessor:ema12.accessor(),type:"EMA",stroke:ema12.stroke(),windowSize:ema12.options().windowSize}]}),(0,jsx_runtime.jsx)(ZoomButtons,{}),(0,jsx_runtime.jsx)(OHLCTooltip.m,{origin:[8,16]})]}),(0,jsx_runtime.jsxs)(Chart.t,{id:4,height:100,yExtents:[0,elder.accessor()],origin:(_,h)=>[0,h-100],padding:{top:8,bottom:8},children:[(0,jsx_runtime.jsx)(XAxis.W,{showGridLines:!0,gridLinesStrokeStyle:"#e0e3eb"}),(0,jsx_runtime.jsx)(YAxis.h,{ticks:4,tickFormat:this.pricesDisplayFormat}),(0,jsx_runtime.jsx)(MouseCoordinateX.Y,{displayFormat:timeDisplayFormat}),(0,jsx_runtime.jsx)(MouseCoordinateY.R,{rectWidth:margin.right,displayFormat:this.pricesDisplayFormat}),(0,jsx_runtime.jsx)(ElderRaySeries.Q,{yAccessor:elder.accessor()}),(0,jsx_runtime.jsx)(SingleValueTooltip.b,{yAccessor:elder.accessor(),yLabel:"Elder Ray",yDisplayFormat:d=>`${this.pricesDisplayFormat(d.bullPower)}, ${this.pricesDisplayFormat(d.bearPower)}`,origin:[8,16]})]}),(0,jsx_runtime.jsx)(CrossHairCursor.H,{})]})}}const features_StockChart=(0,data.p)()((0,withSize.U)({style:{minHeight:600}})((0,withDeviceRatio.O)()(StockChart))),MinutesStockChart=(0,data.p)("MINUTES")((0,withSize.U)({style:{minHeight:600}})((0,withDeviceRatio.O)()(StockChart))),SecondsStockChart=(0,data.p)("SECONDS")((0,withSize.U)({style:{minHeight:600}})((0,withDeviceRatio.O)()(StockChart)))}}]);